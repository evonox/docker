const e=0,t=1,i=2;var n,s,o,a,r,h,d;function l(e,t,i,n){var s,o=arguments.length,a=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(a=(o<3?s(a):o>3?s(t,i,a):s(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,i,n){return new(i||(i=Promise))((function(s,o){function a(e){try{h(n.next(e))}catch(e){o(e)}}function r(e){try{h(n.throw(e))}catch(e){o(e)}}function h(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,r)}h((n=n.apply(e,t||[])).next())}))}!function(e){e.Unselected="unselected",e.Selected="selected",e.Focused="focused"}(n||(n={})),function(e){e.Docked="docked",e.Floating="floating",e.Minimized="minimized",e.Maximized="maximized",e.InCollapser="in-collapser",e.PopupWindow="popup-window"}(s||(s={})),function(e){e.Left="left",e.Right="right",e.Up="up",e.Down="down",e.Fill="fill"}(o||(o={})),function(e){e.Row="row",e.Column="column",e.Fill="fill"}(a||(a={})),function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right"}(r||(r={})),function(e){e.Panel="panel",e.RowLayout="row",e.ColumnLayout="column",e.FillLayout="fill"}(h||(h={})),function(e){e.Left="left",e.Right="right",e.Top="top",e.Bottom="bottom",e.Fill="fill",e.SideLeft="side-left",e.SideRight="side-right",e.SideTop="side-top",e.SideBottom="side-bottom"}(d||(d={})),"function"==typeof SuppressedError&&SuppressedError;class g{constructor(e){this._container=e,this._children=[]}get parent(){return this._parent}get container(){return this._container}get childNodes(){return this._children}getChildNodeAt(e){if(e<0||e>=this._children.length)throw new Error("Index out of range");return this._children[e]}getChildNodeIndex(e){return this._children.indexOf(e)}getChildCount(){return this._children.length}detachFromParent(){this._parent&&(this._parent.removeChild(this),this._parent=void 0)}addChild(e){e.detachFromParent(),e._parent=this,this._children.push(e)}addChildBefore(e,t){this.insertChildNode(e,t,!0)}addChildAfter(e,t){this.insertChildNode(e,t,!1)}removeChild(e){const t=this._children.indexOf(e);t>=0&&(this._children.splice(t,1),e._parent=void 0)}performLayout(e){const t=this._children.map((e=>e._container));this._container.performLayout(t,e)}insertChildNode(e,t,i){t.detachFromParent(),t._parent=this;const n=this._children.indexOf(e);if(n<0)throw new Error("ReferenceNode is not child of this node.");const s=this._children.slice(0,n),o=this._children.slice(n+1,this._children.length);this._children=s.slice(),i?(this._children.push(t),this._children.push(e)):(this._children.push(e),this._children.push(t)),this._children=this._children.concat(o)}}class p{constructor(e,t){this.eventList=t,this.handler=e}trigger(e){var t;null===(t=this.handler)||void 0===t||t.call(this,e)}unsubscribe(){this.eventList.removeSubscription(this),this.handler=void 0}}class m{constructor(e){this.eventName=e,this.subscriptions=[]}getEventName(){return this.eventName}disposeAll(){const e=[...this.subscriptions];for(let t of e)t.unsubscribe()}subscribe(e){const t=new p(e,this);return this.subscriptions.push(t),t}trigger(e){for(let t of this.subscriptions)t.trigger(e)}removeSubscription(e){const t=this.subscriptions.indexOf(e);t>=0&&this.subscriptions.splice(t,1)}}class f{constructor(){this.componentEvents=[]}subscribe(e,t){let i=this.lookupEvent(e);return void 0!==i||(i=new m(e),this.componentEvents.push(i)),i.subscribe(t)}subscribeOnce(e,t){const i=this.subscribe(e,(e=>{t(e),i.unsubscribe()}));return i}unsubscribeAll(e){var t;null===(t=this.lookupEvent(e))||void 0===t||t.disposeAll()}triggerEvent(e,t){var i;null===(i=this.lookupEvent(e))||void 0===i||i.trigger(t)}disposeAll(){for(let e of this.componentEvents)e.disposeAll();this.componentEvents=[]}lookupEvent(e){return this.componentEvents.find((t=>t.getEventName()==e))}}class v{constructor(e){this.domElement=e}bind(e,t,i){this.name=e,this.handler=t,this.isCapture=i.capture,this.domElement.addEventListener(e,t,{capture:i.capture})}unbind(){this.domElement&&this.name&&this.handler&&(this.domElement.removeEventListener(this.name,this.handler,{capture:this.isCapture}),this.cleanup())}cleanup(){this.domElement=void 0,this.name=void 0,this.handler=void 0}}class C{constructor(e,t){this.domEvent=e,this.manager=t}unbind(){this.manager.removeSubscription(this),this.domEvent.unbind()}}class b{constructor(){this.subscriptions=[]}bind(e,t,i,n){let s=new v(e);s.bind(t,i,{capture:n.capture});const o=new C(s,this);return this.subscriptions.push(o),o}unbindAll(){const e=[...this.subscriptions];for(let t of e)t.unbind();this.subscriptions=[]}removeSubscription(e){const t=this.subscriptions.indexOf(e);t>=0&&this.subscriptions.splice(t,1)}}class y{static printStackTrace(){const e=new Error;console.dir(e.stack)}static startMeasuring(){return performance.now()}static stopMeasuring(e,t){const i=performance.now()-e;console.log(`${t}: ${i.toFixed(3)} ms`)}static reportCacheStatistics(e){this._isReportingStaticticsEnabled=e}static enableOptimizations(e){this.enableClassListCache(e),this.enableCSSStyleCache(e),this.enableQueuedDOMUpdates(e)}static enableClassListCache(e){this._isClassListCacheEnabled=e}static enableCSSStyleCache(e){this._isCSSStyleCacheEnabled=e}static enableQueuedDOMUpdates(e){this._isQueuedDOMUpdatesEnabled=e}static isDOMQueuedUpdatesEnabled(){return this._isQueuedDOMUpdatesEnabled}static isClassListCacheEnabled(){return this._isClassListCacheEnabled}static isCSSStyleCacheEnabled(){return this._isCSSStyleCacheEnabled}}y._isReportingStaticticsEnabled=!1,y._isClassListCacheEnabled=!0,y._isCSSStyleCacheEnabled=!0,y._isQueuedDOMUpdatesEnabled=!0;class S{static processAllDOMUpdates(){const e=[...this.domUpdateHandlers];this.domUpdateHandlers=[];for(const t of e)t()}static processAllComponentUpdates(){const e=[...this.componentUpdateHandlers];this.componentUpdateHandlers=[];for(const t of e)t()}static requestNextUpdateTick(){this.isUpdatedRequested=!0,requestAnimationFrame((()=>{this.processAllComponentUpdates(),this.processAllDOMUpdates(),this.isUpdatedRequested=!1,(this.domUpdateHandlers.length>0||this.componentUpdateHandlers.length>0)&&this.requestNextUpdateTick()}))}static forceAllEnqueuedUpdates(){this.isForceUpdateRunning||(this.isForceUpdateRunning=!0,this.processAllComponentUpdates(),this.processAllDOMUpdates(),this.isForceUpdateRunning=!1)}static forceEnqueuedComponentUpdates(){this.isForceUpdateRunning||(this.isForceUpdateRunning=!0,this.processAllComponentUpdates(),this.isForceUpdateRunning=!1)}static forceEnqueuedDOMUpdates(){this.isForceUpdateRunning||(this.isForceUpdateRunning=!0,this.processAllDOMUpdates(),this.isForceUpdateRunning=!1)}static requestDOMUpdate(e){y.isDOMQueuedUpdatesEnabled()?(this.domUpdateHandlers.push(e),!1===this.isUpdatedRequested&&this.requestNextUpdateTick()):e()}static requestComponentUpdate(e){y.isDOMQueuedUpdatesEnabled()?(this.componentUpdateHandlers.push((()=>{e.updateComponent()})),!1===this.isUpdatedRequested&&this.requestNextUpdateTick()):e.updateComponent()}}S.isUpdatedRequested=!1,S.domUpdateHandlers=[],S.componentUpdateHandlers=[],S.isForceUpdateRunning=!1;class M{constructor(){this.domEventManager=new b,this.componentEventManager=new f,this._isUpdateRequested=!1,this.requestUpdate=this.requestUpdate.bind(this)}isUpdateRequested(){return this._isUpdateRequested}initializeComponent(){this.onInitialized(),this.element=this.onInitialRender(),this.requestUpdate()}getDOM(){return this.element}detachFromDOM(){this.element.remove()}dispose(){this.onDisposed(),this.domEventManager.unbindAll(),this.componentEventManager.disposeAll(),this.element.remove(),this.element=void 0}on(e,t){return this.componentEventManager.subscribe(e,t)}off(e){return this.componentEventManager.unsubscribeAll(e)}once(e,t){return this.componentEventManager.subscribeOnce(e,t)}triggerEvent(e,t){this.componentEventManager.triggerEvent(e,t)}bind(e,t,i,n){var s;const o=null!==(s=null==n?void 0:n.capture)&&void 0!==s&&s;return this.domEventManager.bind(e,t,i.bind(this),{capture:o})}requestUpdate(){!0!==this.isUpdateRequested()&&(this._isUpdateRequested=!0,S.requestComponentUpdate(this))}updateComponent(){this.handleUpdateRequest()}handleUpdateRequest(){this._isUpdateRequested=!1,this.onUpdate(this.element)}}class w{static existsDOM(e){return this.registry.has(e)}static getDOM(e){return this.registry.has(e)?this.registry.get(e):void 0}static setDOM(e,t){this.registry.set(e,t)}}w.registry=new WeakMap;class D{static round(e,t){const i=Math.pow(10,t);return Math.round(e*i)/i}static roundToPX(e){return this.round(e,2)}static sum(e){let t=0;for(let i=0;i<e.length;i++)t+=e[i];return t}static toPX(e){return e.toFixed(2)+"px"}}class x{static isSizeOnly(e){return null===e.x||null===e.y}static round(e){return{x:Math.round(e.x),y:Math.round(e.y),w:Math.round(e.w),h:Math.round(e.h)}}static floor(e){return{x:Math.floor(e.x),y:Math.floor(e.y),w:Math.floor(e.w),h:Math.floor(e.h)}}static appendDelta(e,t){return{x:e.x+t.dx,y:e.y+t.dy,w:e.w+t.dw,h:e.h+t.dh}}static fromSize(e,t){return{x:null,y:null,w:e,h:t}}static from(e,t,i,n){return{x:e,y:t,w:i,h:n}}static fromDOMRect(e){return{x:e.left,y:e.top,w:e.width,h:e.height}}}class k{constructor(e){this.element=e,this.cssClasses=new Set,this.isBoundsCachingOn=!0,this.styleMap=new Map,w.setDOM(this.element,this),this.scanCssClasses()}hasClass(e){return y.isClassListCacheEnabled()?this.cssClasses.has(e):this.element.classList.contains(e)}addClass(e){return y.isClassListCacheEnabled()?!1===this.cssClasses.has(e)&&(this.cssClasses.add(e),S.requestDOMUpdate((()=>{this.element.classList.add(e)}))):this.element.classList.add(e),this}removeClass(e){return y.isClassListCacheEnabled()?!0===this.cssClasses.has(e)&&(this.cssClasses.delete(e),S.requestDOMUpdate((()=>{this.element.classList.remove(e)}))):this.element.classList.remove(e),this}addClasses(e){for(const t of e)this.addClass(t);return this}toggleClass(e,t){return t?this.addClass(e):this.removeClass(e),this}removeClasses(e){for(const t of e)this.removeClass(t);return this}applyClasses(e){for(const t in e)!0===e[t]?this.addClass(t):this.removeClass(t);return this}scanCssClasses(){[...this.element.classList].forEach((e=>this.cssClasses.add(e)))}getCss(e){if(y.isCSSStyleCacheEnabled()){if(this.styleMap.has(e))return this.styleMap.get(e);{const t=this.element.style.getPropertyValue(e);return""!==t&&this.styleMap.set(e,t),t}}return this.element.style.getPropertyValue(e)}css(e,t){if(y.isCSSStyleCacheEnabled()){if(this.styleMap.has(e)&&this.styleMap.get(e)===t)return this;null==t||""===t.trim()?this.styleMap.delete(e):this.styleMap.set(e,t),S.requestDOMUpdate((()=>{this.element.style.setProperty(e,t)}))}else this.element.style.setProperty(e,t);return this}cacheBounds(e){return this.isBoundsCachingOn=e,this}getLeft(){return!1===this.isBoundsCachingOn||!1===y.isCSSStyleCacheEnabled()?this.getBoundingClientRect().left:!1===this.styleMap.has("left")?(this.storeBoundsToCache(),parseFloat(this.getCss("left"))):parseFloat(this.getCss("left"))}getTop(){return!1===this.isBoundsCachingOn||!1===y.isCSSStyleCacheEnabled()?this.getBoundingClientRect().top:!1===this.styleMap.has("top")?(this.storeBoundsToCache(),parseFloat(this.getCss("top"))):parseFloat(this.getCss("top"))}getRight(){return!1===this.isBoundsCachingOn||!1===y.isCSSStyleCacheEnabled()?parseFloat(this.getCss("right")):!1===this.styleMap.has("right")?(this.storeBoundsToCache(),parseFloat(this.getCss("right"))):parseFloat(this.getCss("right"))}getBottom(){return!1===this.isBoundsCachingOn||!1===y.isCSSStyleCacheEnabled()?parseFloat(this.getCss("bottom")):!1===this.styleMap.has("bottom")?(this.storeBoundsToCache(),parseFloat(this.getCss("bottom"))):parseFloat(this.getCss("bottom"))}getWidth(){return!1===this.isBoundsCachingOn||!1===y.isCSSStyleCacheEnabled()?this.getBoundingClientRect().width:!1===this.styleMap.has("width")?(this.storeBoundsToCache(),parseFloat(this.getCss("width"))):parseFloat(this.getCss("width"))}getHeight(){return!1===this.isBoundsCachingOn||!1===y.isCSSStyleCacheEnabled()?this.getBoundingClientRect().height:!1===this.styleMap.has("height")?(this.storeBoundsToCache(),parseFloat(this.getCss("height"))):parseFloat(this.getCss("height"))}getBoundingClientRect(){return this.element.getBoundingClientRect()}getBoundsRect(){return!1===this.isBoundsCachingOn?x.fromDOMRect(this.getBoundingClientRect()):{x:this.getLeft(),y:this.getTop(),w:this.getWidth(),h:this.getHeight()}}getComputedRect(){const e=window.getComputedStyle(this.element);return{x:parseFloat(e.left),y:parseFloat(e.top),w:parseFloat(e.width),h:parseFloat(e.height)}}getClientRect(){return{x:this.element.clientLeft,y:this.element.clientTop,w:this.element.clientWidth,h:this.element.clientHeight}}getOffsetRect(){return{x:this.element.offsetLeft,y:this.element.offsetTop,w:this.element.offsetWidth,h:this.element.offsetHeight}}left(e){return"string"==typeof e?this.css("left",e):this.css("left",D.toPX(e)),this}top(e){return"string"==typeof e?this.css("top",e):this.css("top",D.toPX(e)),this}right(e){return"string"==typeof e?this.css("right",e):this.css("right",D.toPX(e)),this}bottom(e){return"string"==typeof e?this.css("bottom",e):this.css("bottom",D.toPX(e)),this}width(e){return"string"==typeof e?this.css("width",e):this.css("width",D.toPX(e)),this}height(e){return"string"==typeof e?this.css("height",e):this.css("height",D.toPX(e)),this}applySize(e){return e instanceof DOMRect?this.width(e.width).height(e.height):this.width(e.w).height(e.h),this}applyRect(e){return e instanceof DOMRect?this.left(e.left).top(e.top).width(e.width).height(e.height):this.left(e.x).top(e.y).width(e.w).height(e.h),this}storeBoundsToCache(){let e=x.fromDOMRect(this.element.getBoundingClientRect());e=x.floor(e),!1===this.styleMap.has("left")&&y.isCSSStyleCacheEnabled()&&this.styleMap.set("left",`${e.x}px`),!1===this.styleMap.has("top")&&y.isCSSStyleCacheEnabled()&&this.styleMap.set("top",`${e.y}px`),!1===this.styleMap.has("width")&&y.isCSSStyleCacheEnabled()&&this.styleMap.set("width",`${e.w}px`),!1===this.styleMap.has("height")&&y.isCSSStyleCacheEnabled()&&this.styleMap.set("height",`${e.h}px`)}getElement(){return this.element}getOffsetParent(){if(this.element.offsetParent instanceof HTMLElement)return new k(this.element.offsetParent)}removeAllChildren(){const e=this.element.children;for(let t=0;t<e.length;t++)e.item(t).remove();return this}removeFromDOM(){this.element.remove()}text(e){return this.element.innerText=e,this}getText(){return this.element.innerText}getHtml(){return this.element.innerHTML}html(e){return this.element.innerHTML=e,this}attr(e,t){return this.element.setAttribute(e,t),this}zIndex(e){return"number"==typeof e?this.css("z-index",String(e)):(""===e?this.css("z-index",""):this.css("z-index",String(e)),this)}getZIndex(){return parseInt(this.getCss("z-index"))}onClick(e){return this.element.onclick=e,this}appendTo(e){return e instanceof k?e.get().appendChild(this.element):e.appendChild(this.element),this}prependChild(e){const t=this.element.firstChild;return null===t?this.appendChild(e):(e instanceof k?this.element.insertBefore(e.get(),t):this.element.insertBefore(e,t),this)}appendChild(e){return e instanceof k?this.element.appendChild(e.get()):this.element.appendChild(e),this}appendChildren(e){for(const t of e)this.appendChild(t);return this}hide(){return this.css("display","none"),this}show(){return this.css("display",""),this}once(e,t){const i=n=>{this.element.removeEventListener(e,i),t(n)};this.element.addEventListener(e,i)}get(){return this.element}static from(e){let t=w.getDOM(e);return void 0!==t?t:new k(e)}static create(e){const t=document.createElement(e);return new k(t)}}function T(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}var R="object"==typeof global&&global&&global.Object===Object&&global,O="object"==typeof self&&self&&self.Object===Object&&self,z=R||O||Function("return this")(),P=function(){return z.Date.now()},E=z.Symbol,H=Object.prototype,I=H.hasOwnProperty,B=H.toString,F=E?E.toStringTag:void 0;var A=Object.prototype.toString;var L="[object Null]",N="[object Undefined]",_=E?E.toStringTag:void 0;function W(e){return null==e?void 0===e?N:L:_&&_ in Object(e)?function(e){var t=I.call(e,F),i=e[F];try{e[F]=void 0;var n=!0}catch(e){}var s=B.call(e);return n&&(t?e[F]=i:delete e[F]),s}(e):function(e){return A.call(e)}(e)}function U(e){return null!=e&&"object"==typeof e}var V="[object Symbol]";var j=NaN,q=/^\s+|\s+$/g,X=/^[-+]0x[0-9a-f]+$/i,Y=/^0b[01]+$/i,K=/^0o[0-7]+$/i,$=parseInt;function G(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||U(e)&&W(e)==V}(e))return j;if(T(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=T(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(q,"");var i=Y.test(e);return i||K.test(e)?$(e.slice(2),i?2:8):X.test(e)?j:+e}var Z="Expected a function",Q=Math.max,J=Math.min;function ee(e,t,i){var n,s,o,a,r,h,d=0,l=!1,c=!1,u=!0;if("function"!=typeof e)throw new TypeError(Z);function g(t){var i=n,o=s;return n=s=void 0,d=t,a=e.apply(o,i)}function p(e){var i=e-h;return void 0===h||i>=t||i<0||c&&e-d>=o}function m(){var e=P();if(p(e))return f(e);r=setTimeout(m,function(e){var i=t-(e-h);return c?J(i,o-(e-d)):i}(e))}function f(e){return r=void 0,u&&n?g(e):(n=s=void 0,a)}function v(){var e=P(),i=p(e);if(n=arguments,s=this,h=e,i){if(void 0===r)return function(e){return d=e,r=setTimeout(m,t),l?g(e):a}(h);if(c)return r=setTimeout(m,t),g(h)}return void 0===r&&(r=setTimeout(m,t)),a}return t=G(t)||0,T(i)&&(l=!!i.leading,o=(c="maxWait"in i)?Q(G(i.maxWait)||0,t):o,u="trailing"in i?!!i.trailing:u),v.cancel=function(){void 0!==r&&clearTimeout(r),d=0,n=h=s=r=void 0},v.flush=function(){return void 0===r?a:f(P())},v}var te,ie,ne;class se{static suppressEvent(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}static throttle(e,t,i){return function(e,t,i){var n=!0,s=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return T(i)&&(n="leading"in i?!!i.leading:n,s="trailing"in i?!!i.trailing:s),ee(e,t,{leading:n,maxWait:t,trailing:s})}(e,t,i)}static debounce(e,t,i){return ee(e,t,i)}}!function(e){e[e.withThreshold=0]="withThreshold",e[e.Immeadiate=1]="Immeadiate"}(te||(te={}));class oe{static initialize(e,t){this.BLOCKER_ZINDEX=e,this.FRAME_RATE=t}static createBlocker(e){this.domBlocker=k.create("div").addClass("DockerTS-Blocker").css("position","absolute").left(0).top(0).width("100%").height("100%").css("cursor",e).css("z-index",String(this.BLOCKER_ZINDEX)).appendTo(document.body)}static removeBlocker(){var e;null===(e=this.domBlocker)||void 0===e||e.removeFromDOM(),this.domBlocker=void 0}static start(e,t,i,n="grabbing",s=(()=>{}),o=te.Immeadiate){let a=!1,r=!1;o===te.Immeadiate&&(e.preventDefault(),a=!0,this.createBlocker(n));let h=e.pageX,d=e.pageY;const l=e=>Math.abs(e.pageX-h)>this.MOVE_DETECTION_THRESHOLD||Math.abs(e.pageY-d)>this.MOVE_DETECTION_THRESHOLD;let c=e=>{!1===a?l(e)&&(this.createBlocker(n),a=!0):(e.preventDefault(),!1===r&&t(e))};c=se.throttle(c,1e3/this.FRAME_RATE,{leading:!0,trailing:!1});const u=t=>{e.preventDefault(),this.removeBlocker(),window.removeEventListener("mousemove",c,{capture:!0}),window.removeEventListener("mouseup",u,{capture:!0}),window.removeEventListener("keydown",g,{capture:!0}),!1===r&&i(t)},g=e=>{"Escape"!==e.key||r||(r=!0,this.domBlocker.css("cursor","default"),e.preventDefault(),s())};window.addEventListener("mousemove",c,{capture:!0}),window.addEventListener("mouseup",u,{capture:!0}),window.addEventListener("keydown",g,{capture:!0})}}oe.BLOCKER_ZINDEX=0,oe.FRAME_RATE=0,oe.MOVE_DETECTION_THRESHOLD=5,function(e){e[e.Decrementing=0]="Decrementing",e[e.Incrementing=1]="Incrementing"}(ie||(ie={})),function(e){e[e.NotInOverflowState=0]="NotInOverflowState",e[e.OverflowStateTerminated=1]="OverflowStateTerminated",e[e.InOverflowState=2]="InOverflowState"}(ne||(ne={}));class ae{constructor(){this.isInOverflow=!1}reset(){this.isInOverflow=!1}getOverflowDirection(){return this.overflowDirection}startDragOverflow(e,t){!0!==this.isInOverflow&&(this.isInOverflow=!0,this.guardedCoordinate=e,this.overflowDirection=t)}isInDragOverflow(e){return!1===this.isInOverflow?ne.NotInOverflowState:this.overflowDirection===ie.Incrementing?e>=this.guardedCoordinate?ne.InOverflowState:ne.OverflowStateTerminated:this.overflowDirection===ie.Decrementing?e<=this.guardedCoordinate?ne.InOverflowState:ne.OverflowStateTerminated:void 0}adjustDeltaAfterOverflow(e,t){return!1===this.isInOverflow?e:this.overflowDirection===ie.Incrementing||this.overflowDirection===ie.Decrementing?t-this.guardedCoordinate:void 0}}class re extends M{constructor(e,t,i,n){super(),this.splitterPanel=e,this.prevContainer=t,this.nextContainer=i,this.orientation=n,this.overflowGuard=new ae,this.initializeComponent()}getBarSize(){return this.orientation===a.Row?this.domBar.getWidth():this.domBar.getHeight()}onInitialized(){}onDisposed(){}onInitialRender(){return this.domBar=k.create("div").addClass("DockerTS-SplitterBar").addClass(this.orientation===a.Row?"DockerTS-SplitterBar--Row":"DockerTS-SplitterBar--Column").cacheBounds(!1),this.bind(this.domBar.get(),"mousedown",this.handleMouseDown),this.domBar.get()}onUpdate(e){}handleMouseDown(e){this.lastPosX=e.pageX,this.lastPosY=e.pageY,this.overflowGuard.reset();const t=this.orientation===a.Row?"col-resize":"row-resize";oe.start(e,this.handleMouseMove.bind(this),this.handleMouseUp.bind(this),t)}handleMouseMove(e){const t=e.pageX-this.lastPosX,i=e.pageY-this.lastPosY;this.orientation===a.Row?this.processDraggingX(t,e):this.processDraggingY(i,e),this.lastPosX=e.pageX,this.lastPosY=e.pageY}handleMouseUp(e){this.overflowGuard.reset()}processDraggingX(e,t){if(this.splitterPanel.isMinWidthSizeOverflow())return;const i=this.overflowGuard.isInDragOverflow(t.pageX);if(i===ne.InOverflowState)return;i===ne.OverflowStateTerminated&&(e=this.overflowGuard.adjustDeltaAfterOverflow(e,t.pageX),this.overflowGuard.reset());const n=this.splitterPanel.getContainerSize(this.prevContainer),s=this.splitterPanel.getContainerSize(this.nextContainer),o=this.prevContainer.getMinWidth(),a=this.nextContainer.getMinWidth();if(n+e<o){e=o-n;const t=this.lastPosX+e;this.overflowGuard.startDragOverflow(t,ie.Decrementing)}else if(s-e<a){e=a-s;const t=this.lastPosX+e;this.overflowGuard.startDragOverflow(t,ie.Incrementing)}const r=n+e,h=s-e,d={prev:this.prevContainer,next:this.nextContainer,prevSize:r,nextSize:h,performResize:!0};this.triggerEvent("onResized",d)}processDraggingY(e,t){if(this.splitterPanel.isMinHeightSizeOverflow())return;const i=this.overflowGuard.isInDragOverflow(t.pageY);if(i===ne.InOverflowState)return;i===ne.OverflowStateTerminated&&(e=this.overflowGuard.adjustDeltaAfterOverflow(e,t.pageY),this.overflowGuard.reset());const n=this.splitterPanel.getContainerSize(this.prevContainer),s=this.splitterPanel.getContainerSize(this.nextContainer),o=this.prevContainer.getMinHeight(),a=this.nextContainer.getMinHeight();if(n+e<o){e=o-n;const t=this.lastPosY+e;this.overflowGuard.startDragOverflow(t,ie.Decrementing)}else if(s-e<a){e=a-s;const t=this.lastPosY+e;this.overflowGuard.startDragOverflow(t,ie.Incrementing)}const r=n+e,h=s-e,d={prev:this.prevContainer,next:this.nextContainer,prevSize:r,nextSize:h,performResize:!0};this.triggerEvent("onResized",d)}}class he{static orderItemsByIndexes(e,t){let i=[];for(let n=0;n<t.length;n++)i.push(e[t[n]]);return i}static removeItem(e,t){let i=e.indexOf(t);return i>=0&&e.splice(i,1)}static containsItem(e,t){let i=e.length;for(;i--;)if(e[i]===t)return!0;return!1}static isArrayEqual(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!=t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}static lastElement(e){return e[e.length-1]}}class de extends M{constructor(e,t){super(),this.childContainers=e,this.orientation=t,this.splitterBars=[],this.containerSizes=[],this.initializeComponent()}onInitialized(){}onDisposed(){this.removeFromDOM()}onInitialRender(){return this.domSplitterPanelWrapper=k.create("div").addClass("DockerTS-SplitterPanelWrapper").cacheBounds(!1),this.domSplitterPanel=k.create("div").addClass("DockerTS-SplitterPanel").addClass(this.orientation===a.Row?"DockerTS-SplitterPanel--Row":"DockerTS-SplitterPanel--Column").appendTo(this.domSplitterPanelWrapper).cacheBounds(!1),this.constructSplitterDOMInternals(),this.domSplitterPanelWrapper.get()}onUpdate(e){}constructSplitterDOMInternals(){if(this.childContainers.length<2)throw new Error("Splitter panel must contain at least 2 containers");for(let e=0;e<this.childContainers.length-1;e++){const t=this.childContainers[e],i=this.childContainers[e+1],n=new re(this,t,i,this.orientation);n.on("onResized",this.handleResizeEvent.bind(this)),this.splitterBars.push(n),this.appendContainerToSplitter(t),this.domSplitterPanel.appendChild(n.getDOM())}this.appendContainerToSplitter(he.lastElement(this.childContainers)),this.childContainers.forEach((e=>{e.setHeaderVisibility(!0),e.setVisible(!0)})),this.computeInitialSize(),void 0===this.splitterPanelRO&&(this.splitterPanelRO=new ResizeObserver((()=>{this.adjustContainerSizesToNewDimensions(),this.adjustSizesIfMinimumSizesOverflows(),this.applyChildContainerSizes()})),this.domSplitterPanel.css("overflow","hidden"),this.splitterPanelRO.observe(this.domSplitterPanel.get()))}appendContainerToSplitter(e){const t=e.getDOM();this.domSplitterPanel.appendChild(t)}removeFromDOM(){var e;null===(e=this.splitterPanelRO)||void 0===e||e.disconnect(),this.splitterPanelRO=void 0,this.childContainers.forEach((e=>{const t=e.getDOM();w.existsDOM(t)&&k.from(t).removeFromDOM()})),this.splitterBars.forEach((e=>e.dispose())),this.splitterBars=[],this.containerSizes=[]}getTotalBarSize(){return this.splitterBars[0].getBarSize()*this.splitterBars.length}getContainerSize(e){const t=this.childContainers.indexOf(e);return this.containerSizes[t]}performLayout(e,t){if(he.isArrayEqual(e,this.childContainers)&&!t)return;e.forEach((e=>e.setHeaderVisibility(!0)));let i=[...this.containerSizes];e.length!==this.childContainers.length&&(i=void 0),this.removeFromDOM(),this.childContainers=e,this.constructSplitterDOMInternals(),void 0!==i&&(this.containerSizes=i),this.adjustSizesIfMinimumSizesOverflows(),this.applyChildContainerSizes(),this.invalidate()}updateState(){this.childContainers.forEach((e=>e.updateState()))}setContainerRatio(e,t){const i=this.childContainers.indexOf(e);if(i<0)throw new Error("ERROR: Container is not member of splitter panel");const n=this.getRatios();n[i]=t;for(let e=0;e<n.length;e++)i!==e&&(n[e]=(1-t)/(n.length-1));this.setRatios(n)}getContainerRatio(e){const t=this.childContainers.indexOf(e);if(t<0)throw new Error("ERROR: Container is not member of splitter panel");return this.getRatios()[t]}getRatios(){let e=this.getVaryingSize(this.domSplitterPanel)-this.splitterBars[0].getBarSize()*this.splitterBars.length;return this.containerSizes.map((t=>t/e))}setRatios(e){let t=this.getVaryingSize(this.domSplitterPanel)-this.splitterBars[0].getBarSize()*this.splitterBars.length;this.containerSizes=e.map((e=>e*t)),this.adjustSizesIfMinimumSizesOverflows(),this.applyChildContainerSizes()}resize(e){}invalidate(){const e=this.domSplitterPanel.getBoundsRect();this.resize(e)}handleResizeEvent(e){const t=this.childContainers.indexOf(e.prev),i=this.childContainers.indexOf(e.next);this.containerSizes[t]=e.prevSize,this.containerSizes[i]=e.nextSize,e.performResize&&this.applyChildContainerSizes()}adjustContainerSizesToNewDimensions(){const e=this.domSplitterPanel.getBoundsRect();this.recomputeContainerSizes(e)}recomputeContainerSizes(e){x.isSizeOnly(e)&&(e.x=this.domSplitterPanel.getLeft(),e.y=this.domSplitterPanel.getTop());let t=D.sum(this.containerSizes);const i=this.splitterBars[0].getBarSize(),n=this.getVaryingSize(this.domSplitterPanel)-i*(this.childContainers.length-1);t=Math.max(t,1);const s=n/t;for(let e=0;e<this.childContainers.length;e++){const t=this.containerSizes[e]*s;this.containerSizes[e]=t}}applyChildContainerSizes(){let e=this.splitterBars[0].getBarSize(),t=[...this.containerSizes];const i=D.sum(t),n=this.computeSplitterBarSizeRemainder();let s=[];for(let o=0;o<t.length;o++){o>0&&s.push(D.toPX(e));let a=`calc(${(t[o]/i*100).toFixed(5)}% - ${n})`;s.push(a)}const o=s.join(" ");this.domSplitterPanel.css("--docker-splitter-panel-sizing",o)}computeSplitterBarSizeRemainder(){const e=this.splitterBars[0].getBarSize(),t=this.splitterBars.length,i=e*t;return D.toPX(i/(t+1))}triggerChildContainerResize(){const e=this.domSplitterPanel.getBoundsRect(),t=this.splitterBars[0].getBarSize();let i=0;for(let n=0;n<this.childContainers.length;n++){const s=this.childContainers[n],o=this.containerSizes[n];let r;const h=k.from(s.getDOM()).getBoundingClientRect();this.orientation===a.Row?r=x.from(D.roundToPX(i),h.y,D.roundToPX(o),e.h):this.orientation===a.Column&&(r=x.from(h.x,i,e.w,o)),s.resize(r),i+=o+t}}adjustSizesIfMinimumSizesOverflows(){if(!1===this.isVaryingMinSizeOverflow())return void this.probeMinSizesAreNotOverflown();const e=this.getRequiredMinimumVaryingSize(),t=this.getVaryingSize(this.domSplitterPanel),i=t/e;for(let n=0;n<this.containerSizes.length;n++){const s=this.childContainers[n],o=this.getContainerMinimumVaryingSize(s)/e*i;this.containerSizes[n]=o*t}}probeMinSizesAreNotOverflown(){const e=new Array(this.childContainers.length).fill(!1);for(let t=0;t<this.childContainers.length;t++){const i=this.childContainers[t],n=this.getContainerMinimumVaryingSize(i);n>this.containerSizes[t]&&(this.containerSizes[t]=n,e[t]=!0)}if(!e.reduce(((e,t)=>e||t),!1))return;const t=D.sum(this.containerSizes)-this.getVaryingSize(this.domSplitterPanel),i=D.sum(this.childContainers.filter(((t,i)=>!1===e[i])).map(((e,t)=>this.containerSizes[t])));for(let n=0;n<this.containerSizes.length;n++){if(e[n])continue;const s=this.containerSizes[n]/i*t;this.containerSizes[n]-=s}}computeInitialSize(){if(0===this.containerSizes.length){const e=this.childContainers.length,t=new Array(e).fill(1/e);this.setRatios(t)}}isVaryingMinSizeOverflow(){const e=this.getVaryingSize(this.domSplitterPanel);return this.getRequiredMinimumVaryingSize()>=e}getRequiredMinimumVaryingSize(){return this.orientation===a.Row?this.getRequiredMinimumWidth():this.getRequiredMinimumHeight()}getVaryingSize(e){return e instanceof HTMLElement&&(e=k.from(e)),this.orientation===a.Row?e.getWidth():e.getHeight()}isMinWidthSizeOverflow(){return this.getRequiredMinimumWidth()>=this.domSplitterPanel.getWidth()}isMinHeightSizeOverflow(){return this.getRequiredMinimumHeight()>=this.domSplitterPanel.getHeight()}getContainerMinimumVaryingSize(e){return this.orientation===a.Row?e.getMinWidth():e.getMinHeight()}getRequiredMinimumWidth(){return D.sum(this.childContainers.map((e=>e.getMinWidth())))}getRequiredMinimumHeight(){return D.sum(this.childContainers.map((e=>e.getMinHeight())))}}class le{constructor(e,t){this.childContainers=e,this.orientation=t,this.splitterPanel=new de(this.childContainers,this.orientation)}handleContextMenuAction(e){}updateState(){this.splitterPanel.updateState()}isHidden(){return!1}setHeaderVisibility(e){}queryLoadedSize(){return Object.assign({},this.loadedSize)}onQueryContextMenu(e){}getMinimumChildNodeCount(){return 2}getChildContainers(){return[...this.childContainers]}setActiveChild(e){}saveState(e){e.width=this.getWidth(),e.height=this.getHeight()}loadState(e){this.loadedSize={w:e.width,h:e.height}}performLayout(e,t){this.childContainers=e,this.splitterPanel.performLayout(e,t)}setContainerRatio(e,t){this.splitterPanel.setContainerRatio(e,t)}getContainerRatio(e){return this.splitterPanel.getContainerRatio(e)}getRatios(){return this.splitterPanel.getRatios()}setRatios(e){this.splitterPanel.setRatios(e)}resize(e){this.splitterPanel.resize(e)}dispose(){this.splitterPanel.dispose()}getDOM(){return this.splitterPanel.getDOM()}on(e,t){return this.splitterPanel.on(e,t)}off(e){this.splitterPanel.off(e)}once(e,t){return this.splitterPanel.once(e,t)}hasChanges(){return!1}setVisible(e){}getMinWidth(){return this.orientation===a.Row?this.childContainers.reduce(((e,t)=>e+t.getMinWidth()),0)+this.splitterPanel.getTotalBarSize():this.childContainers.reduce(((e,t)=>Math.max(e,t.getMinWidth())),0)}getMinHeight(){return this.orientation===a.Row?this.childContainers.reduce(((e,t)=>Math.max(e,t.getMinHeight())),0):this.childContainers.reduce(((e,t)=>e+t.getMinHeight()),0)+this.splitterPanel.getTotalBarSize()}getWidth(){return this.splitterPanel.getDOM().clientWidth}getHeight(){return this.splitterPanel.getDOM().clientHeight}getContainerType(){return this.orientation===a.Row?h.RowLayout:h.ColumnLayout}}class ce extends le{constructor(e,t){super(t,a.Column),this.dockManager=e}}class ue extends le{constructor(e,t){super(t,a.Row),this.dockManager=e}}function ge(e){return function(t,i){const n=Symbol();return t[n]=null==e?void 0:e.defaultValue,Object.defineProperty(t,i,{enumerable:!0,get:function(){return this[n]},set:function(e){e!==this[n]&&(this[n]=e,this.requestUpdate.apply(this,[]))}}),t}}function pe(e){return function(t,i){const n=Symbol();return t[n]=null==e?void 0:e.defaultValue,Object.defineProperty(t,i,{enumerable:!1,get:function(){return this[n]},set:function(e){e!==this[n]&&(this[n]=e,this.requestUpdate.apply(this,[]))}}),t}}const me='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/></svg>\n',fe='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z"/></svg>\n',ve='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V64zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32H96v64c0 17.7 14.3 32 32 32s32-14.3 32-32V352c0-17.7-14.3-32-32-32H32zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V64zM320 320c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V384h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320z"/></svg>\n',Ce='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M32 416c-17.7 0-32 14.3-32 32s14.3 32 32 32H480c17.7 0 32-14.3 32-32s-14.3-32-32-32H32z"/></svg>\n',be='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M246.6 470.6c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 402.7 361.4 265.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-160 160zm160-352l-160 160c-12.5 12.5-32.8 12.5-45.3 0l-160-160c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L224 210.7 361.4 73.4c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3z"/></svg>\n',ye='\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M246.6 41.4c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L224 109.3 361.4 246.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3l-160-160zm160 352l-160-160c-12.5-12.5-32.8-12.5-45.3 0l-160 160c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L224 301.3 361.4 438.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3z"/></svg>\n',Se="onExpand",Me="onCollapse",we="onMinimize",De="onRestore",xe="onMaximize",ke="onClose",Te="onShowPopup",Re="onTogglePin",Oe="onScrollLeft",ze="onScrollRight",Pe="onShowTabStripMenu",Ee=[ke,Me,Se,xe,we,De,Te,Re,Oe,ze,Pe];function He(e){return Ee.includes(e)}const Ie=[{displayOrder:11e3,icon:me,title:"Close",actionName:ke,visible:!0},{displayOrder:1e4,icon:fe,title:"Maximize",actionName:xe,visible:!0},{displayOrder:9e3,icon:ve,title:"Restore",actionName:De,visible:!0},{displayOrder:8e3,icon:Ce,title:"Minimize",actionName:we,visible:!0},{displayOrder:7e3,icon:'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M432 48H208c-17.7 0-32 14.3-32 32V96H128V80c0-44.2 35.8-80 80-80H432c44.2 0 80 35.8 80 80V304c0 44.2-35.8 80-80 80H416V336h16c17.7 0 32-14.3 32-32V80c0-17.7-14.3-32-32-32zM48 448c0 8.8 7.2 16 16 16H320c8.8 0 16-7.2 16-16V256H48V448zM64 128H320c35.3 0 64 28.7 64 64V448c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V192c0-35.3 28.7-64 64-64z"/></svg>\n',title:"Show in new window",actionName:Te,visible:!0},{displayOrder:6e3,icon:'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M32 32C32 14.3 46.3 0 64 0H320c17.7 0 32 14.3 32 32s-14.3 32-32 32H290.5l11.4 148.2c36.7 19.9 65.7 53.2 79.5 94.7l1 3c3.3 9.8 1.6 20.5-4.4 28.8s-15.7 13.3-26 13.3H32c-10.3 0-19.9-4.9-26-13.3s-7.7-19.1-4.4-28.8l1-3c13.8-41.5 42.8-74.8 79.5-94.7L93.5 64H64C46.3 64 32 49.7 32 32zM160 384h64v96c0 17.7-14.3 32-32 32s-32-14.3-32-32V384z"/></svg>\n',title:"Pin / Unpin Panel",actionName:Re,visible:!0},{displayOrder:5e3,icon:be,title:"Expand",actionName:Se,visible:!0},{displayOrder:4e3,icon:ye,title:"Collapse",actionName:Me,visible:!0}],Be=[{displayOrder:1e3,icon:'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160zm352-160l-160 160c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L301.3 256 438.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0z"/></svg>\n',title:"Scroll Left",actionName:Oe,visible:!0},{displayOrder:2e3,icon:'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M470.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L402.7 256 265.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160zm-352 160l160-160c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L210.7 256 73.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0z"/></svg>\n',title:"Scroll Right",actionName:ze,visible:!0},{displayOrder:3e3,icon:'\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z"/></svg>    \n',title:"Show Tabs",actionName:Pe,visible:!0}];class Fe extends M{constructor(){super(),this.initializeComponent()}onInitialized(){}onDisposed(){this.domButton=void 0}onInitialRender(){return this.domButton=k.create("div").html(me).addClass("DockerTS-CloseButton"),this.bind(this.domButton.get(),"mousedown",this.handleButtonClick),this.domButton.get()}onUpdate(e){this.visible?this.domButton.show():this.domButton.hide()}handleButtonClick(e){e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),this.triggerEvent("onClick")}}l([ge({defaultValue:!0}),c("design:type",Boolean)],Fe.prototype,"visible",void 0);class Ae extends M{constructor(e){super(),this.isUndockEnabled=e,this.initializeComponent()}setSelectionState(e){this.selectionState=e}getUndockEnabled(){return this.isUndockEnabled}setUndockEnabled(e){this.isUndockEnabled=e}onInitialized(){this.closeButton=new Fe,this.closeButton.visible=this.closeButtonVisible,this.closeButton.on("onClick",this.handleCloseButtonClick.bind(this))}onDisposed(){this.closeButton.dispose()}onInitialRender(){return this.domRoot=k.create("div").addClasses(["DockerTS-TabHandle","DockerTS--DisableSelection"]),this.domTitle=k.create("div").addClass("DockerTS-TabHandle__TitleText").appendTo(this.domRoot),this.domRoot.appendChild(this.closeButton.getDOM()),this.bind(this.domRoot.get(),"mousedown",this.handleMouseDown.bind(this)),this.bind(this.domRoot.get(),"dblclick",this.handleMouseDblClick.bind(this)),this.bind(this.domRoot.get(),"contextmenu",this.handleShowContextMenu.bind(this)),this.domRoot.get()}onUpdate(e){this.applyTabOrientationCSS(),this.applySelectionCSS(),this.closeButton.visible=this.closeButtonVisible;const t=k.create("div").html(this.icon);this.domTitle.html("").text(this.title).prependChild(t).attr("title",this.title),this.domTitle.toggleClass("DockerTS-TabHandle--HasChanges",this.isModifiedState)}applyTabOrientationCSS(){this.domRoot.applyClasses({"DockerTS-TabHandle--Left":this.orientation===r.Left,"DockerTS-TabHandle--Right":this.orientation===r.Right,"DockerTS-TabHandle--Top":this.orientation===r.Top,"DockerTS-TabHandle--Bottom":this.orientation===r.Bottom})}applySelectionCSS(){this.domRoot.applyClasses({"DockerTS-TabHandle--Unselected":this.selectionState===n.Unselected,"DockerTS-TabHandle--Selected":this.selectionState===n.Selected,"DockerTS-TabHandle--Focused":this.selectionState===n.Focused})}handleCloseButtonClick(){this.triggerEvent("onCloseClicked")}handleShowContextMenu(e){e.preventDefault(),this.triggerEvent("onContextMenu",e)}handleMouseDblClick(e){this.triggerEvent("onTabDblClicked")}handleMouseDown(e){this.triggerEvent("onMouseDown",{event:e,tabHandle:this}),this.triggerEvent("onTabClicked"),e.button}}l([ge({defaultValue:r.Bottom}),c("design:type",String)],Ae.prototype,"orientation",void 0),l([ge({defaultValue:""}),c("design:type",String)],Ae.prototype,"icon",void 0),l([ge({defaultValue:""}),c("design:type",String)],Ae.prototype,"title",void 0),l([ge({defaultValue:!1}),c("design:type",Boolean)],Ae.prototype,"closeButtonVisible",void 0),l([ge({defaultValue:!1}),c("design:type",Boolean)],Ae.prototype,"isModifiedState",void 0),l([pe({defaultValue:n.Unselected}),c("design:type",String)],Ae.prototype,"selectionState",void 0);class Le{constructor(){this.menuItems=[]}queryMenuItemsOrdered(){const e=[...this.menuItems];return e.sort(((e,t)=>e.displayOrder-t.displayOrder)),e}getMenuItems(){return[...this.menuItems]}appendMenuItem(e){if(!0===e.separator)this.menuItems.push(e);else{if("string"!=typeof e.actionName||"string"!=typeof e.title)throw new Error("ERROR: Menu item must have at least 'title' and 'actionName' fields defined");if(this.existsActionName(e.actionName))throw new Error(`ERROR: Action name ${e.actionName} is already registered.`);this.menuItems.push(e)}}removeMenuItem(e){const t=this.menuItems.indexOf(e);t>=0&&this.menuItems.splice(t,1)}existsActionName(e){return void 0!==this.menuItems.filter((e=>!0!==e.separator)).find((t=>t.actionName===e))}}class Ne extends M{constructor(e){super(),this.actionName=e,this.initializeComponent()}onInitialized(){}onDisposed(){}onInitialRender(){return this.domMenuItem=k.create("div").addClass("DockerTS-MenuItem"),this.domIcon=k.create("div").appendTo(this.domMenuItem).addClass("DockerTS-MenuItem__Icon"),this.domTitle=k.create("div").appendTo(this.domMenuItem),this.bind(this.domMenuItem.get(),"click",this.handleMouseClick.bind(this)),this.domMenuItem.get()}onUpdate(e){this.domIcon.html(this.icon),this.domTitle.text(this.title),this.domMenuItem.toggleClass("DockerTS-MenuItem--Disabled",this.disabled)}handleMouseClick(e){this.triggerEvent("onAction",this.actionName)}}l([ge({defaultValue:""}),c("design:type",String)],Ne.prototype,"icon",void 0),l([ge({defaultValue:""}),c("design:type",String)],Ne.prototype,"title",void 0),l([ge({defaultValue:!1}),c("design:type",Boolean)],Ne.prototype,"disabled",void 0);class _e extends M{constructor(){super(),this.initializeComponent()}onInitialized(){}onDisposed(){}onInitialRender(){return k.create("div").addClass("DockerTS--Separator").get()}onUpdate(e){}}var We,Ue;!function(e){e[e.Left=0]="Left",e[e.Center=1]="Center",e[e.Right=2]="Right"}(We||(We={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Bottom=2]="Bottom"}(Ue||(Ue={}));class Ve{static computeOverlayAnchor(e,t){const i=this.parsePosition(t),n=e.getBoundingClientRect();return this.computeOverlayAnchorPoint(n,i)}static computeOverlayAnchorPoint(e,t){let i=e.left;t.alignmentX===We.Center?i=e.left+e.width/2:t.alignmentX===We.Right&&(i=e.right);let n=e.top;return t.alignmentY===Ue.Center?n=e.top+e.height/2:t.alignmentY===Ue.Bottom&&(n=e.bottom),{x:i+t.offsetX,y:n+t.offsetY}}static computeFinalOverlayPosition(e,t,i){const n=this.parsePosition(i),s=t.getBoundingClientRect();return this.computeOverlayPosition(e,s,n)}static computeOverlayPosition(e,t,i){const n=Object.assign({},e);i.alignmentX===We.Center?n.x-=t.width/2:i.alignmentX===We.Right&&(n.x-=t.width),i.alignmentY===Ue.Center?n.y-=t.height/2:i.alignmentY===Ue.Bottom&&(n.y-=t.height);const s={x:0,y:0};return s.x=Math.round(n.x+i.offsetX),s.y=Math.round(n.y+i.offsetY),s}static parsePosition(e){const t=e.split(",");if(2!==t.length)throw new Error("Malformed alignment position");const[i,n]=this.parsePositionPart(t[0]),[s,o]=this.parsePositionPart(t[1]);return{alignmentX:this.translateHorizontalAlignment(i),offsetX:n,alignmentY:this.translateVerticalAlignment(s),offsetY:o}}static parsePositionPart(e){const t=e.split(/[\+\-]/),i=t[0].trim();if(1===t.length)return[i,0];{let n=parseInt(t[1]);if(isNaN(n))throw new Error("Offset not a number");return e.includes("-")&&(n=-n),[i,n]}}static translateHorizontalAlignment(e){switch(e=e.toLowerCase()){case"left":return We.Left;case"center":return We.Center;case"right":return We.Right;default:throw new Error("Undefined horizontal alignment")}}static translateVerticalAlignment(e){switch(e=e.toLowerCase()){case"top":return Ue.Top;case"middle":return Ue.Center;case"bottom":return Ue.Bottom;default:throw new Error("Undefined vertical alignment")}}}const je=[{at:"",my:"left, top"},{at:"",my:"left, bottom"},{at:"",my:"right, bottom"},{at:"",my:"right, top"}];class qe{static computeAutomaticallyOverlayPosition(e,t){let i;document.body.appendChild(e);for(const n of je)if(i=Ve.computeFinalOverlayPosition(t,e,n.my),this.isOverlayInViewport(e,i))break;return e.remove(),i}static isOverlayInViewport(e,t){e.style.setProperty("left",String(t.x)+"px"),e.style.setProperty("top",String(t.y)+"px");const i=e.getBoundingClientRect();return e.style.setProperty("left",""),e.style.setProperty("top",""),i.left>0&&i.top>0&&i.right<window.innerWidth&&i.bottom<window.innerHeight}}class Xe extends M{constructor(e){super(),this.config=e,this.menuItems=[],this.menuSeparators=[],this.handleInvokedAction=this.handleInvokedAction.bind(this),this.initializeComponent()}show(e,t){S.forceAllEnqueuedUpdates();const i=qe.computeAutomaticallyOverlayPosition(this.domContextMenu.get(),{x:e.pageX,y:e.pageY}),n=e.target;this.domContextMenu.addClass("DockerTS-ContextMenu--Visible").left(i.x).top(i.y).zIndex(t).appendTo(n.ownerDocument.body),this.bind(n.ownerDocument.documentElement,"mousedown",this.handleMouseDown.bind(this),{capture:!0})}hide(){this.domContextMenu.removeClass("DockerTS-ContextMenu--Visible"),this.dispose()}onInitialized(){}onDisposed(){this.menuItems.forEach((e=>e.dispose())),this.menuSeparators.forEach((e=>e.dispose())),this.menuItems=[],this.menuSeparators=[]}onInitialRender(){this.domContextMenu=k.create("div").addClasses(["DockerTS-ContextMenu"]);for(const e of this.config.queryMenuItemsOrdered())!0===e.separator?this.constructMenuSeparator():this.constructMenuItem(e);return this.domContextMenu.get()}onUpdate(e){}constructMenuItem(e){var t;const i=new Ne(e.actionName);i.icon=null!==(t=e.icon)&&void 0!==t?t:"",i.title=e.title,i.disabled=e.disabled,i.on("onAction",this.handleInvokedAction),this.menuItems.push(i),this.domContextMenu.appendChild(i.getDOM())}constructMenuSeparator(){let e=new _e;this.menuSeparators.push(e),this.domContextMenu.appendChild(e.getDOM())}handleInvokedAction(e){this.triggerEvent("onAction",e),this.hide()}handleMouseDown(e){!1===this.isClickInsideMenu(e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.hide())}isClickInsideMenu(e){const t=this.domContextMenu.getBoundsRect();return t.x<e.pageX&&t.y<e.pageY&&e.pageX<t.x+t.w&&e.pageY<t.y+t.h}}class Ye{static createDefaultContextMenu(e){const t=e.getDockManager().config.labels,i=new Le;return e.isActionAllowed(ke)&&i.appendMenuItem({displayOrder:100,icon:me,title:t.closeLabel,actionName:ke}),e.isActionAllowed(xe)&&i.appendMenuItem({displayOrder:200,icon:fe,title:t.maximizeLabel,actionName:xe}),e.isActionAllowed(De)&&i.appendMenuItem({displayOrder:300,icon:ve,title:t.restoreLabel,actionName:De}),e.isActionAllowed(we)&&i.appendMenuItem({displayOrder:400,icon:Ce,title:t.minimizeLabel,actionName:we}),e.isActionAllowed(Se)&&i.appendMenuItem({displayOrder:500,icon:be,title:t.expandLabel,actionName:Se}),e.isActionAllowed(Me)&&i.appendMenuItem({displayOrder:600,icon:ye,title:t.collapseLabel,actionName:Me}),i}}class Ke extends M{constructor(e,t,i,n,s){super(),this.dockManager=e,this.container=t,this.tabOrientation=i,this.isUndockEnabled=n,this.isMaximizationEnabled=s,this.initializeComponent()}getTabHandle(){return this.tabHandle}getContainer(){return this.container}setSelectionState(e){this.selectionState=e}getSelectionState(){return this.selectionState}setUndockEnabled(e){this.tabHandle.setUndockEnabled(e)}setMaximizationEnabled(e){this.isMaximizationEnabled=e}onInitialized(){this.tabHandle=new Ae(this.isUndockEnabled),this.tabHandle.orientation=this.tabOrientation,this.tabHandle.on("onTabClicked",this.handleTabSelected.bind(this)),this.tabHandle.on("onTabMoved",this.handleTabMoved.bind(this)),this.tabHandle.on("onContextMenu",this.handleShowContextMenu.bind(this)),this.tabHandle.on("onCloseClicked",this.handleCloseButtonClick.bind(this)),this.tabHandle.on("onTabDblClicked",this.handleTabDoubleClicked.bind(this)),this.titleSubscription=this.container.on("onTitleChanged",this.handleTitleChanged.bind(this)),this.focusSubscription=this.container.on("onFocused",this.handlePanelFocused.bind(this))}onDisposed(){this.tabHandle.dispose(),this.titleSubscription.unsubscribe(),this.focusSubscription.unsubscribe()}onInitialRender(){return this.domContentWrapper=k.create("div").addClass("DockerTS-TabPage--ContentWrapper").appendChild(this.container.getDOM()),this.updateTabTitle(),this.domContentWrapper.get()}onUpdate(e){this.tabHandle.setSelectionState(this.selectionState),this.selectionState===n.Unselected?(this.domContentWrapper.hide(),this.container.setVisible(!1)):(this.domContentWrapper.show(),this.container.setVisible(!0))}handleCloseButtonClick(){this.dockManager.requestClose(this.container)}handleTitleChanged(){this.updateTabTitle()}handlePanelFocused(){this.handleTabSelected()}handleTabSelected(){this.dockManager.setActivePanel(this.container),this.dockManager.notifyOnTabChange(this)}handleTabDoubleClicked(){this.isMaximizationEnabled&&this.container.toggleMaximizedPanelState()}handleTabMoved(e){this.triggerEvent("onTabMoved",e)}updateTabTitle(){this.container.getTitleHtml(),this.tabHandle.icon=this.container.getTitleIcon(),this.tabHandle.title=this.container.getTitle(),this.tabHandle.isModifiedState=this.container.hasChanges()}handleShowContextMenu(e){var t,i;let n;if(e.preventDefault(),n=this.container.isDefaultContextMenuEnabled()?Ye.createDefaultContextMenu(this.container):new Le,null===(i=(t=this.container).onQueryContextMenu)||void 0===i||i.call(t,n),0===n.getMenuItems().length)return;const s=this.dockManager.config.zIndexes.zIndexContextMenu,o=new Xe(n);o.on("onAction",(e=>{He(e)?this.container.handleDefaultPanelAction(e):this.container.handleContextMenuAction(e)})),o.show(e,s)}}l([pe({defaultValue:n.Unselected}),c("design:type",String)],Ke.prototype,"selectionState",void 0);class $e extends M{constructor(e,t){super(),this.actionName=e,this.displayOrder=t,this.initializeComponent()}getActionName(){return this.actionName}getDisplayOrder(){return this.displayOrder}onInitialized(){}onDisposed(){}onInitialRender(){return this.domButton=k.create("div").addClass("IconButton"),this.bind(this.domButton.get(),"mousedown",this.handleButtonPressed.bind(this)),this.bind(this.domButton.get(),"mouseup",this.handleButtonReleased.bind(this)),this.bind(this.domButton.get(),"click",this.handleButtonClick.bind(this)),this.bind(this.domButton.get(),"dblclick",(e=>{e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation()})),this.domButton.get()}onUpdate(e){this.domButton.html(this.icon).toggleClass("IconButton--Hidden",!this.visible).attr("title",this.title)}handleButtonPressed(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.triggerEvent("onPressed",{actionName:this.actionName,event:e})}handleButtonReleased(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.triggerEvent("onReleased",{actionName:this.actionName,event:e})}handleButtonClick(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),this.triggerEvent("onClicked",{actionName:this.actionName,event:e}),this.triggerEvent("onAction",this.actionName)}}l([ge({defaultValue:""}),c("design:type",String)],$e.prototype,"icon",void 0),l([ge({defaultValue:!0}),c("design:type",Boolean)],$e.prototype,"visible",void 0),l([ge({defaultValue:""}),c("design:type",String)],$e.prototype,"title",void 0);class Ge extends M{constructor(){super(),this.iconButtons=[],this.handleActionTriggered=this.handleActionTriggered.bind(this),this.initializeComponent()}appendUserButton(e){if(He(e.actionName))throw new Error(`ERROR: Action name ${e.actionName} is a reserved name.`);const t=this.constructButtonFromConfig(e);this.iconButtons.push(t),this.updateButtonsInDOM()}removeUserButton(e){if(He(e))throw new Error("ERROR: Cannot remove default panel button.");const t=this.getIconButtonByAction(e);t.dispose();const i=this.iconButtons.indexOf(t);i>=0&&this.iconButtons.splice(i,1)}allowAction(e){this.getIconButtonByAction(e).visible=!0}denyAction(e){this.getIconButtonByAction(e).visible=!1}isActionAllowed(e){return!0===this.getIconButtonByAction(e).visible}onInitialized(){}onDisposed(){for(const e of this.iconButtons)e.dispose();this.iconButtons=[]}onInitialRender(){this.domButtonBar=k.create("div").addClass("DockerTS-ButtonBar");for(const e of this.iconButtons)this.domButtonBar.appendChild(e.getDOM());return this.updateButtonsInDOM(),this.domButtonBar.get()}onUpdate(e){this.visible?this.domButtonBar.show():this.domButtonBar.hide()}constructButtonFromConfig(e){const t=new $e(e.actionName,e.displayOrder);return t.icon=e.icon,t.title=e.title,t.visible=e.visible,t.on("onPressed",(e=>this.triggerEvent("onPressed",e))),t.on("onReleased",(e=>this.triggerEvent("onReleased",e))),t.on("onClicked",(e=>this.triggerEvent("onClicked",e))),t.on("onAction",this.handleActionTriggered),t}handleActionTriggered(e){this.triggerEvent("onAction",e)}updateButtonsInDOM(){this.iconButtons.forEach((e=>e.getDOM().remove())),this.iconButtons.sort(((e,t)=>e.getDisplayOrder()-t.getDisplayOrder())),this.iconButtons.forEach((e=>this.domButtonBar.appendChild(e.getDOM())))}getIconButtonByAction(e){for(const t of this.iconButtons)if(t.getActionName()===e)return t;throw new Error(`ERROR: Icon Button for action ${e} not found.`)}}l([ge({defaultValue:!0}),c("design:type",Boolean)],Ge.prototype,"visible",void 0);class Ze extends Ge{onInitialized(){for(const e of Be){const t=this.constructButtonFromConfig(e);this.iconButtons.push(t)}}}const Qe={};function Je(e){const t=e[0],i=e[1];"string"!=typeof t?console.warn("VelocityJS: Trying to set 'registerEasing' name to an invalid value:",t):!function(e){return"[object Function]"===Object.prototype.toString.call(e)}(i)?console.warn("VelocityJS: Trying to set 'registerEasing' callback to an invalid value:",t,i):Qe[t]?console.warn("VelocityJS: Trying to override 'registerEasing' callback",t):Qe[t]=i}function et(e){return Math.min(Math.max(e,0),1)}function tt(e,t){return 1-3*t+3*e}function it(e,t){return 3*t-6*e}function nt(e){return 3*e}function st(e,t,i){return((tt(t,i)*e+it(t,i))*e+nt(t))*e}function ot(e,t,i){return 3*tt(t,i)*e*e+2*it(t,i)*e+nt(t)}function at(...e){const t=4,i=1e-7,n=10,s=11,o=1/(s-1),a="Float32Array"in window;if(4!==e.length)return;for(let t=0;t<4;++t)if("number"!=typeof e[t]||isNaN(e[t])||!isFinite(e[t]))return;const r=et(e[0]),h=e[1],d=et(e[2]),l=e[3],c=a?new Float32Array(s):new Array(s);function u(e){const a=s-1;let h=0,l=1;for(;l!==a&&c[l]<=e;++l)h+=o;--l;const u=h+(e-c[l])/(c[l+1]-c[l])*o,g=ot(u,r,d);return g>=.001?function(e,i){for(let n=0;n<t;++n){const t=ot(i,r,d);if(0===t)return i;i-=(st(i,r,d)-e)/t}return i}(e,u):0===g?u:function(e,t,s){let o,a,h=0;do{a=t+(s-t)/2,o=st(a,r,d)-e,o>0?s=a:t=a}while(Math.abs(o)>i&&++h<n);return a}(e,h,h+o)}let g=!1;function p(){g=!0,r===h&&d===l||function(){for(let e=0;e<s;++e)c[e]=st(e*o,r,d)}()}const m=`generateBezier(${[r,h,d,l]})`,f=(e,t,i,n)=>(g||p(),0===e?t:1===e?i:r===h&&d===l?t+e*(i-t):t+st(u(e),h,l)*(i-t));return f.getControlPoints=()=>[{x:r,y:h},{x:d,y:l}],f.toString=()=>m,f}Je(["linear",function(e,t,i,n){return t+e*(i-t)}]),Je(["swing",function(e,t,i){return t+(.5-Math.cos(e*Math.PI)/2)*(i-t)}]),Je(["spring",function(e,t,i){return t+(1-Math.cos(4.5*e*Math.PI)*Math.exp(6*-e))*(i-t)}]);const rt=at(.42,0,1,1),ht=at(0,0,.58,1),dt=at(.42,0,.58,1);Je(["ease",at(.25,.1,.25,1)]),Je(["easeIn",rt]),Je(["ease-in",rt]),Je(["easeOut",ht]),Je(["ease-out",ht]),Je(["easeInOut",dt]),Je(["ease-in-out",dt]),Je(["easeInSine",at(.47,0,.745,.715)]),Je(["easeOutSine",at(.39,.575,.565,1)]),Je(["easeInOutSine",at(.445,.05,.55,.95)]),Je(["easeInQuad",at(.55,.085,.68,.53)]),Je(["easeOutQuad",at(.25,.46,.45,.94)]),Je(["easeInOutQuad",at(.455,.03,.515,.955)]),Je(["easeInCubic",at(.55,.055,.675,.19)]),Je(["easeOutCubic",at(.215,.61,.355,1)]),Je(["easeInOutCubic",at(.645,.045,.355,1)]),Je(["easeInQuart",at(.895,.03,.685,.22)]),Je(["easeOutQuart",at(.165,.84,.44,1)]),Je(["easeInOutQuart",at(.77,0,.175,1)]),Je(["easeInQuint",at(.755,.05,.855,.06)]),Je(["easeOutQuint",at(.23,1,.32,1)]),Je(["easeInOutQuint",at(.86,0,.07,1)]),Je(["easeInExpo",at(.95,.05,.795,.035)]),Je(["easeOutExpo",at(.19,1,.22,1)]),Je(["easeInOutExpo",at(1,0,0,1)]),Je(["easeInCirc",at(.6,.04,.98,.335)]),Je(["easeOutCirc",at(.075,.82,.165,1)]),Je(["easeInOutCirc",at(.785,.135,.15,.86)]);const lt=["left","top","right","bottom","width","height"];class ct{constructor(e,t,i){this.element=e,this.cssTargetState=t,this.options=i,this.handleRAF=0,this.animationTick=this.animationTick.bind(this),void 0===i.delay?this.startAnimation():setTimeout((()=>this.startAnimation()),i.delay)}startAnimation(){var e,t;if(this.captureStartValues(),this.easingFn=Qe[this.options.easing],void 0===this.easingFn)throw new Error(`Easing function ${this.options.easing} as not found.`);null===(t=(e=this.options).begin)||void 0===t||t.call(e),this.zeroTime=document.timeline.currentTime,this.handleRAF=window.requestAnimationFrame(this.animationTick)}captureStartValues(){const e=window.getComputedStyle(this.element);this.cssSourceState={};for(const t in this.cssTargetState)this.cssSourceState[t]=parseFloat(e.getPropertyValue(t))}applyFrameStyle(e){for(const t in e){const i=e[t];lt.includes(t)?this.element.style.setProperty(t,D.toPX(i)):this.element.style.setProperty(t,i.toFixed(3))}}animationTick(e){var t,i,n,s;const o=(e-this.zeroTime)/this.options.duration;if(o<1){const e=this.computeNewFrameValues(o);console.dir(e),this.applyFrameStyle(e),null===(i=(t=this.options).progress)||void 0===i||i.call(t),this.handleRAF=window.requestAnimationFrame(this.animationTick)}else this.applyFrameStyle(this.cssTargetState),null===(s=(n=this.options).complete)||void 0===s||s.call(n),!0===this.options.restoreValues&&this.applyFrameStyle(this.cssSourceState)}computeNewFrameValues(e){const t={};for(const i in this.cssTargetState){const n=this.cssSourceState[i],s=this.cssTargetState[i],o=this.easingFn(e,n,s);t[i]=o}return t}cancel(){0!==this.handleRAF&&(window.cancelAnimationFrame(this.handleRAF),this.handleRAF=0)}finish(){0!==this.handleRAF&&(window.cancelAnimationFrame(this.handleRAF),this.handleRAF=0),this.applyFrameStyle(this.cssTargetState)}}function ut(e,t,i){return new ct(e,t,i)}class gt{static animateFadeOut(e){return new Promise(((t,i)=>{ut(e,{opacity:0},{easing:"linear",duration:300,complete:()=>t()})}))}static animateDockWheelPlaceholder(e,t){const i=ut(e,{left:t.x,top:t.y,width:t.w,height:t.h,opacity:1},{easing:"linear",duration:250});return{commit:()=>i.finish(),cancel:()=>i.cancel()}}static animateTabReorderTranslation(e,t){let i=!0,n=parseFloat(e.style.left);const s=ut(e,{left:t},{duration:150,easing:"easeInOut",complete:()=>i=!1});return{commit:()=>{i&&(i=!1,s.cancel(),e.style.left=t.toFixed(3)+"px")},cancel:()=>{i&&(i=!1,s.cancel(),e.style.left=n.toFixed(3)+"px")}}}static animatePanelCollapse(e,t,i){return u(this,void 0,void 0,(function*(){return new Promise(((n,s)=>{ut(e,{height:i},{duration:250,easing:"easeInSine",complete:()=>n()}),ut(t,{height:0},{duration:250,easing:"easeInSine",complete:()=>n()})}))}))}static animatePanelExpand(e,t,i,n){return u(this,void 0,void 0,(function*(){return new Promise(((s,o)=>{ut(e,{height:i},{duration:400,easing:"easeOutCubic",complete:()=>s()}),ut(t,{height:n},{duration:400,easing:"easeOutCubic",complete:()=>s()})}))}))}static animateMaximize(e,t){return u(this,void 0,void 0,(function*(){return new Promise(((i,n)=>{ut(e,{left:t.x,top:t.y,width:t.w,height:t.h},{duration:350,easing:"easeInOutCubic",complete:()=>i()})}))}))}static animateRestore(e,t){return u(this,void 0,void 0,(function*(){return new Promise(((i,n)=>{ut(e,{left:t.x,top:t.y,width:t.w,height:t.h},{duration:350,easing:"easeInOutCubic",complete:()=>i()})}))}))}static animateMaximizeNoHeader(e,t,i,n){return u(this,void 0,void 0,(function*(){return new Promise(((s,o)=>{ut(t,{height:i},{duration:100,easing:"linear",complete:()=>{ut(e,{left:n.x,top:n.y,width:n.w,height:n.h},{delay:100,duration:350,easing:"easeInOutCubic",complete:()=>s()})}})}))}))}static animateRestoreNoHeader(e,t,i){return u(this,void 0,void 0,(function*(){return new Promise(((n,s)=>{ut(e,{left:i.x,top:i.y,width:i.w,height:i.h},{duration:350,easing:"easeInOutCubic",complete:()=>{ut(t,{height:0},{delay:100,duration:100,easing:"linear",complete:()=>n()})}})}))}))}static animateMinimize(e,t){return u(this,void 0,void 0,(function*(){return new Promise(((i,n)=>{ut(e,{left:t.x,top:t.y,width:t.w,height:t.h},{duration:450,easing:"easeInOutCubic",complete:()=>i()})}))}))}static animateDialogMove(e,t,i,n){return u(this,void 0,void 0,(function*(){return new Promise(((s,o)=>{ut(e,{left:t,top:i},{duration:250,easing:"easeInOutCubic",progress:()=>n(),complete:()=>s()})}))}))}static animateCollapserMargin(e,t,i){return u(this,void 0,void 0,(function*(){return new Promise(((n,s)=>{ut(e,{[t]:i},{duration:350,easing:"linear",complete:()=>n()})}))}))}static animateShowCollapserPanel(e,t,i){return u(this,void 0,void 0,(function*(){return new Promise(((n,s)=>{ut(e,{left:t.x,top:t.y,width:t.w,height:t.h},{duration:500,easing:"linear",progress:()=>i(),complete:()=>n()})}))}))}static animateHideCollapserPanel(e,t,i){return u(this,void 0,void 0,(function*(){return new Promise(((n,s)=>{ut(e,{left:t.x,top:t.y,width:t.w,height:t.h},{duration:500,easing:"linear",progress:()=>i(),complete:()=>n()})}))}))}}class pt{constructor(e){this.count=e,this.indexes=[];for(let t=0;t<e;t++)this.indexes.push(t)}applyReorderLeft(e){const t=this.indexes[e];this.indexes[e+1]=this.indexes[e],this.indexes[e]=t}applyReorderRight(e){const t=this.indexes[e];this.indexes[e-1]=this.indexes[e],this.indexes[e]=t}mapToReordered(e){return this.indexes[e]}unmapFromReordered(e){for(let t=0;t<this.count;t++)if(this.indexes[t]===e)return t}}class mt{constructor(e,t,i,n=!1){this.dockManager=e,this.tabStrip=t,this.draggedHandle=i,this.checkUndockRequest=n,this.eventManager=new f,this.tabStripScrollLeft=0,this.domTabHandles=[]}processMouseMove(e){this.checkUndock(e)?this.handleUndockRequested(e):this.adjustDraggedTabHandlePosition(e)?(e.pageX<this.lastX?this.checkTabReorderToLeft()&&(this.toIndex--,this.indexMap.applyReorderLeft(this.toIndex),this.translateTabHandleToRight()):e.pageX>this.lastX&&this.checkTabReorderToRight()&&(this.toIndex++,this.indexMap.applyReorderRight(this.toIndex),this.translateTabHandleToLeft()),this.lastX=e.pageX):this.lastX=e.pageX}processMouseDown(e){this.initialize();const t=this.domTabHandles[this.fromIndex].getBoundingClientRect();this.dragOffset={x:e.pageX-t.left+this.tabStripScrollLeft,y:e.pageY-t.top},this.lastX=e.pageX}processMouseUp(e){this.handleCompletionRequest()}processCancelRequest(){this.handleCancelRequest()}initialize(){this.tabStrip.queryAttachedHandles().forEach((e=>{const t=e.getDOM();this.domTabHandles.push(k.from(t))})),this.indexMap=new pt(this.domTabHandles.length);const e=this.dockManager.config.zIndexes.zIndexTabReorderOperation,t=k.from(this.tabStrip.getDOM());this.tabStripScrollLeft=this.tabStrip.getTabHandleContainerDOM().get().scrollLeft,this.dragMinimumLeft=this.domTabHandles[0].getBoundingClientRect().left+this.tabStripScrollLeft,this.dragMaximumRight=this.domTabHandles[this.domTabHandles.length-1].getBoundingClientRect().right+this.tabStripScrollLeft;const i=t.getBoundsRect();t.css("min-width",i.w+"px"),t.css("min-height",i.h+"px"),this.domTabHandles.forEach((t=>{const i=t.getOffsetParent().getBoundingClientRect(),n=t.getBoundingClientRect();t.left(n.left-i.left+this.tabStripScrollLeft).top(n.top-i.top).zIndex(e)})),this.domTabHandles.forEach((e=>e.css("position","absolute"))),this.domTabHandleContainer=k.from(this.domTabHandles[0].get().parentElement);const n=this.domTabHandleContainer.get().scrollWidth;if(this.domTabHandleContainer.width(n).css("position","relative").left(-this.tabStripScrollLeft),this.fromIndex=this.toIndex=this.tabStrip.queryAttachedHandles().indexOf(this.draggedHandle),this.fromIndex<0)throw new Error("ERROR: Dragged TabHandle not found in the TabHostStrip.");this.domTabHandles[this.fromIndex].zIndex(e+1)}clenaUp(){this.unapplyInternalCSS(),this.dispose()}unapplyInternalCSS(){this.domTabHandles.forEach((e=>{e.css("position","").css("left","").css("top","").zIndex("")})),this.domTabHandleContainer.width("").css("position","").left(""),this.domTabHandleContainer=void 0;const e=this.tabStrip.getDOM();k.from(e).css("min-width","").css("min-height",""),this.tabStrip.getTabHandleContainerDOM().get().scrollLeft=this.tabStripScrollLeft}dispose(){this.domTabHandles=[],this.eventManager.disposeAll()}adjustDraggedTabHandlePosition(e){const t=this.domTabHandles[this.fromIndex];let i=e.pageX-this.dragOffset.x+this.tabStripScrollLeft,n=!1;i<this.dragMinimumLeft&&(i=this.dragMinimumLeft,n=!0),i+t.getWidth()>this.dragMaximumRight&&(i=this.dragMaximumRight-t.getWidth(),n=!0);return i-=t.getOffsetParent().getBoundingClientRect().left,t.left(i),!n}handleCompletionRequest(){this.fromIndex!==this.toIndex&&this.eventManager.triggerEvent("onTabReordered",{from:this.fromIndex,to:this.toIndex}),this.clenaUp()}handleCancelRequest(){this.eventManager.triggerEvent("onCancelled"),this.clenaUp()}handleUndockRequested(e){this.unapplyInternalCSS(),this.eventManager.triggerEvent("onUndockRequest",e),this.dispose()}checkUndock(e){if(!1===this.checkUndockRequest)return!1;const t=this.tabStrip.getDOM().getBoundingClientRect();return e.pageX<t.left||e.pageY<t.top||e.pageX>t.right||e.pageY>t.bottom}checkTabReorderToLeft(){if(0===this.toIndex)return!1;const e=this.indexMap.mapToReordered(this.toIndex-1),t=this.domTabHandles[this.fromIndex].getBoundingClientRect(),i=this.domTabHandles[e].getBoundingClientRect(),n=i.left+i.width/2;return t.left<=n}checkTabReorderToRight(){if(this.toIndex>=this.domTabHandles.length-1)return!1;const e=this.indexMap.mapToReordered(this.toIndex+1),t=this.domTabHandles[this.fromIndex].getBoundingClientRect(),i=this.domTabHandles[e].getBoundingClientRect(),n=i.left+i.width/2;return t.right>=n}translateTabHandleToLeft(){var e;null===(e=this.lastAnimation)||void 0===e||e.commit();let t=this.toIndex,i=t-2;t=this.indexMap.mapToReordered(t),i>=0&&(i=this.indexMap.mapToReordered(i));const n=this.domTabHandles[t];let s;if(i<0)s=this.tabStrip.getDOM().getBoundingClientRect().left-this.tabStripScrollLeft;else{s=this.domTabHandles[i].getBoundingClientRect().right}s-=n.getOffsetParent().getBoundingClientRect().left,this.lastAnimation=gt.animateTabReorderTranslation(n.getElement(),s)}translateTabHandleToRight(){var e;null===(e=this.lastAnimation)||void 0===e||e.commit();let t=this.toIndex,i=t+2;t=this.indexMap.mapToReordered(t),i>=this.domTabHandles.length&&(i=-1),i>=0&&(i=this.indexMap.mapToReordered(i));const n=this.domTabHandles[t],s=n.getBoundingClientRect();let o;if(i<0)o=this.dragMaximumRight-s.width-this.tabStripScrollLeft;else{o=this.domTabHandles[i].getBoundingClientRect().left-s.width}o-=n.getOffsetParent().getBoundingClientRect().left,this.lastAnimation=gt.animateTabReorderTranslation(n.getElement(),o)}on(e,t){return this.eventManager.subscribe(e,t)}off(e){return this.eventManager.unsubscribeAll(e)}once(e,t){return this.eventManager.subscribeOnce(e,t)}}class ft{constructor(e,t){this.draggedPanel=e,this.dragOffset=t}processMouseDown(e){return u(this,void 0,void 0,(function*(){yield this.draggedPanel.requestUndockToDialog(e,this.dragOffset),this.draggedPanel.triggerEvent("onDockingDragStart",e)}))}processMouseMove(e){this.draggedPanel.triggerEvent("onDockingDragMove",e)}processMouseUp(e){this.draggedPanel.triggerEvent("onDockingDragStop",e)}processCancelRequest(){}}class vt{constructor(e,t,i){this.dockManager=e,this.tabStrip=t,this.draggedHandle=i,this.eventManager=new f,this.isUndockInitiated=!1,this.tabReorderOperation=new mt(this.dockManager,this.tabStrip,this.draggedHandle,this.draggedHandle.getUndockEnabled()),this.tabReorderOperation.on("onTabReordered",(e=>{this.eventManager.triggerEvent("onTabReordered",e)})),this.tabReorderOperation.on("onUndockRequest",this.handleUndockRequest.bind(this))}processMouseDown(e){this.isUndockInitiated?this.tabUndockOperation.processMouseDown(e):this.tabReorderOperation.processMouseDown(e)}processMouseMove(e){this.isUndockInitiated?this.tabUndockOperation.processMouseMove(e):this.tabReorderOperation.processMouseMove(e)}processCancelRequest(){this.isUndockInitiated?this.tabUndockOperation.processCancelRequest():this.tabReorderOperation.processCancelRequest(),this.dispose()}processMouseUp(e){this.isUndockInitiated?this.tabUndockOperation.processMouseUp(e):this.tabReorderOperation.processMouseUp(e),this.dispose()}on(e,t){return this.eventManager.subscribe(e,t)}off(e){this.eventManager.unsubscribeAll(e)}once(e,t){return this.eventManager.subscribeOnce(e,t)}handleUndockRequest(e){return u(this,void 0,void 0,(function*(){const t=this.draggedHandle.getDOM().getBoundingClientRect(),i={x:Math.max(e.pageX-t.left,40),y:t.height/2},n=this.tabStrip.getTabHost().getTabPageByHandle(this.draggedHandle).getContainer();this.tabUndockOperation=new ft(n,i),yield this.tabUndockOperation.processMouseDown(e),this.isUndockInitiated=!0}))}dispose(){this.eventManager.disposeAll()}}class Ct extends M{constructor(e,t,i){super(),this.dockManager=e,this.tabHost=t,this.orientation=i,this.tabHandles=[],this._tabReorderingEnabled=!0,this.isButtonBarVisible=!1,this.SCROLL_DELTA=2,this.initializeComponent()}getTabHost(){return this.tabHost}getTabHandleContainerDOM(){return this.domTabHandleContainer}isTabReorderingEnabled(){return this._tabReorderingEnabled}enabledTabReordering(e){this._tabReorderingEnabled=e}attachTabHandle(e){this.tabHandles.push(e),this.domTabHandleContainer.appendChild(e.getDOM()),e.on("onMouseDown",(e=>this.handleTabOrderingRequest(e)))}detachTabHandle(e){const t=this.tabHandles.indexOf(e);t>=0&&(e.off("onMouseDown"),e.detachFromDOM(),this.tabHandles.splice(t,1))}queryAttachedHandles(){return[...this.tabHandles]}onInitialized(){this.buttonBar=new Ze}onDisposed(){this.resizeObserver.unobserve(this.domTabStrip.get()),this.resizeObserver.disconnect(),this.resizeObserver=void 0,this.buttonBar.dispose()}onInitialRender(){return this.domTabStrip=k.create("div").addClass("DockerTS-TabStrip").applyClasses({"DockerTS-TabStrip--Horizontal":this.orientation===r.Top||this.orientation===r.Bottom,"DockerTS-TabStrip--Vertical":this.orientation===r.Left||this.orientation===r.Right}).cacheBounds(!1),this.domTabHandleContainer=k.create("div").addClass("DockerTS-TabStrip__TabHandleContainer").appendTo(this.domTabStrip),this.domButtonBarContainer=k.create("div").addClass("DockerTS-TabStrip__ButtonBar").css("visibility","hidden").appendChild(this.buttonBar.getDOM()).appendTo(this.domTabStrip),this.buttonBar.on("onPressed",(({actionName:e,event:t})=>{e===Oe?this.handleBeginScrollingToStart():e===ze&&this.handleBeginScrollingToEnd()})),this.buttonBar.on("onReleased",(({actionName:e,event:t})=>{e!==Oe&&e!==ze||this.handleStopScrolling()})),this.buttonBar.on("onClicked",(({actionName:e,event:t})=>{e===Pe&&this.handleShowTabStripPopup(t)})),this.resizeObserver=new ResizeObserver((()=>this.checkTabStripOverflowStatus())),this.domTabStrip.css("overflow","hidden"),this.resizeObserver.observe(this.domTabStrip.get(),{box:"border-box"}),this.domTabStrip.get()}onUpdate(e){}checkTabStripOverflowStatus(){!1===this.isButtonBarVisible&&!0===this.isTabStripOverflown()?(this.isButtonBarVisible=!0,this.domButtonBarContainer.css("visibility","visible").addClass("DockerTS-TabStrip__ButtonBar--Visible")):!0===this.isButtonBarVisible&&!1===this.isTabStripOverflown()&&(this.isButtonBarVisible=!1,this.domButtonBarContainer.removeClass("DockerTS-TabStrip__ButtonBar--Visible").once("transitionend",(()=>{this.domButtonBarContainer.css("visibility","hidden")})))}isTabStripOverflown(){const e=this.domTabHandleContainer.get();return this.orientation===r.Top||this.orientation===r.Bottom?e.scrollWidth>e.clientWidth:e.scrollHeight>e.clientHeight}handleBeginScrollingToStart(){this.isIncrementScroll=!1,this.handleRAFScroll=window.requestAnimationFrame((()=>this.handleScrollingTick()))}handleBeginScrollingToEnd(){this.isIncrementScroll=!0,this.handleRAFScroll=window.requestAnimationFrame((()=>this.handleScrollingTick()))}handleStopScrolling(){window.cancelAnimationFrame(this.handleRAFScroll)}handleScrollingTick(){const e=this.isIncrementScroll?this.SCROLL_DELTA:-this.SCROLL_DELTA;this.orientation===r.Top||this.orientation===r.Bottom?this.domTabHandleContainer.get().scrollBy({left:e,top:0,behavior:"instant"}):this.domTabHandleContainer.get().scrollBy({left:0,top:e,behavior:"instant"}),this.handleRAFScroll=window.requestAnimationFrame((()=>this.handleScrollingTick()))}handleShowTabStripPopup(e){const t=new Le;for(let e=0;e<this.tabHandles.length;e++){const i=this.tabHandles[e];t.appendMenuItem({displayOrder:e,icon:i.icon,title:i.title,actionName:e.toString()})}const i=this.dockManager.config.zIndexes.zIndexContextMenu,n=new Xe(t);n.on("onAction",(e=>{const t=parseInt(e);this.triggerEvent("onTabActivated",t)})),n.show(e,i)}handleTabOrderingRequest({event:e,tabHandle:t}){if(!this._tabReorderingEnabled)return void se.suppressEvent(e);const i=new vt(this.dockManager,this,t);i.processMouseDown(e),i.on("onTabReordered",(e=>{this.triggerEvent("onTabReordered",e)})),oe.start(e,(e=>i.processMouseMove(e)),(e=>i.processMouseUp(e)),"pointer",(()=>{i.processCancelRequest()}),te.withThreshold)}}class bt extends M{constructor(e,t){super(),this.dockManager=e,this.tabStripDirection=t,this.isUndockEnabled=!0,this.isMaximizationEnabled=!0,this.isFrameHeaderVisibilityEnabled=!0,this.tabPages=[],this.initializeComponent()}setEnableUndock(e){this.isUndockEnabled=e,this.tabPages.forEach((t=>t.setUndockEnabled(e)))}setEnableMaximization(e){this.isMaximizationEnabled=e,this.tabPages.forEach((t=>t.setMaximizationEnabled(e)))}setEnableTabReordering(e){this.tabStrip.enabledTabReordering(e)}setEnableFrameHeaderVisibility(e){this.isFrameHeaderVisibilityEnabled=e}getTabOrientation(){return this.tabStripDirection}getSelectedTab(){return this.selectedTab}focusActiveTab(e){var t;if(!1===this.isContainerInsideHost(e))this.selectedTab.setSelectionState(n.Selected);else{null===(t=this.selectedTab)||void 0===t||t.setSelectionState(n.Unselected);const i=this.getTabPageForContainer(e);void 0!==i&&(this.selectedTab=i,i.setSelectionState(n.Focused))}this.isFocused=this.selectedTab.getSelectionState()===n.Focused}getMinWidth(){let e=this.tabPages.reduce(((e,t)=>Math.max(e,t.getContainer().getMinWidth())),0);if(this.tabStripDirection===r.Left||this.tabStripDirection===r.Right){e+=k.from(this.tabStrip.getDOM()).getOffsetRect().w}return e}getMinHeight(){let e=this.tabPages.reduce(((e,t)=>Math.max(e,t.getContainer().getMinHeight())),0);if(this.tabStripDirection===r.Top||this.tabStripDirection===r.Bottom){e+=k.from(this.tabStrip.getDOM()).getOffsetRect().h+this.domSeparator.getOffsetRect().h}return e}updateLayoutState(){this.tabPages.forEach((e=>e.getContainer().updateState()))}updateContainerState(){var e,t,i;this.tabPages.forEach((e=>e.getContainer().updateState()));const s=this.dockManager.getActivePanel();s!==(null===(e=this.selectedTab)||void 0===e?void 0:e.getContainer())?this.isContainerInsideHost(s)?this.focusActiveTab(s):(null===(t=this.selectedTab)||void 0===t||t.setSelectionState(n.Selected),this.isFocused=!1):(null===(i=this.selectedTab)||void 0===i||i.setSelectionState(n.Focused),this.isFocused=!0)}performLayout(e,t){let i=this.tabPages.indexOf(this.selectedTab);const s=[...this.tabPages];for(const t of s)!1===e.includes(t.getContainer())&&(this.tabStrip.detachTabHandle(t.getTabHandle()),he.removeItem(this.tabPages,t),t.dispose());if(0!==e.length){for(const t of e){if(t.getContainerType()!==h.Panel)throw new Error("ERROR: Only panel containers are allowed to be inserted inside TabHost");if(!1===this.isContainerInsideHost(t)){t.setHeaderVisibility(this.tabStripDirection===r.Bottom&&this.isFrameHeaderVisibilityEnabled);const e=new Ke(this.dockManager,t,this.tabStripDirection,this.isUndockEnabled,this.isMaximizationEnabled);this.tabPages.push(e),this.tabStrip.attachTabHandle(e.getTabHandle()),this.domContent.appendChild(e.getDOM())}}void 0!==this.selectedTab&&!1!==e.includes(this.selectedTab.getContainer())||(this.selectedTab=void 0,i=Math.max(0,i-1),this.selectedTab=this.tabPages[i],this.selectedTab.setSelectionState(n.Selected))}}resize(e){}invalidate(){}computeTabContentRect(e){if(this.tabStripDirection===r.Top){const t=k.from(this.tabStrip.getDOM()).getHeight()+this.domSeparator.getHeight();return x.from(e.x,e.y+t,e.w,e.h-t)}if(this.tabStripDirection===r.Bottom){const t=k.from(this.tabStrip.getDOM()).getHeight()+this.domSeparator.getHeight();return x.from(e.x,e.y,e.w,e.h-t)}if(this.tabStripDirection===r.Left){const t=k.from(this.tabStrip.getDOM()).getWidth()+this.domSeparator.getWidth();return x.from(e.x+t,e.y,e.w-t,e.h)}if(this.tabStripDirection===r.Right){const t=k.from(this.tabStrip.getDOM()).getWidth()+this.domSeparator.getWidth();return x.from(e.x,e.y,e.w-t,e.h)}}isContainerInsideHost(e){return void 0!==this.getTabPageForContainer(e)}getTabPageForContainer(e){return this.tabPages.find((t=>t.getContainer()===e))}onInitialized(){this.tabStrip=new Ct(this.dockManager,this,this.tabStripDirection),this.tabStrip.on("onTabActivated",(e=>{const t=this.tabPages[e].getContainer();this.dockManager.setActivePanel(t)})),this.tabStrip.on("onTabReordered",(({from:e,to:t})=>{this.handleReorderTabs(e,t)}))}onDisposed(){this.tabStrip.dispose()}onInitialRender(){return this.domHost=k.create("div").addClass("DockerTS-TabHost"),this.domSeparator=k.create("div").applyClasses({"DockerTS-TabStrip__Separator--Vertical":this.tabStripDirection===r.Top||this.tabStripDirection===r.Bottom,"DockerTS-TabStrip__Separator--Horizontal":this.tabStripDirection===r.Left||this.tabStripDirection===r.Right}).cacheBounds(!1),this.domContent=k.create("div").attr("tabIndex","-1").addClass("DockerTS-TabContent"),this.tabStripDirection===r.Top?this.domHost.appendChildren([this.tabStrip.getDOM(),this.domSeparator,this.domContent]).addClass("DockerTS-TabHost--Top"):this.tabStripDirection===r.Bottom?this.domHost.appendChildren([this.domContent,this.domSeparator,this.tabStrip.getDOM()]).addClass("DockerTS-TabHost--Bottom"):this.tabStripDirection===r.Left?this.domHost.appendChildren([this.tabStrip.getDOM(),this.domSeparator,this.domContent]).addClass("DockerTS-TabHost--Left"):this.tabStripDirection===r.Right&&this.domHost.appendChildren([this.domContent,this.domSeparator,this.tabStrip.getDOM()]).addClass("DockerTS-TabHost--Right"),this.domHost.get()}onUpdate(e){this.domSeparator.toggleClass("DockerTS-TabStrip__Separator--Focused",this.isFocused)}handleReorderTabs(e,t){let i=this.tabPages.map((e=>e.getContainer()));const n=i[e];i.splice(e,1),i.splice(t,0,n),this.performLayout([],!1),this.performLayout(i,!1),this.selectedTab=void 0,this.updateContainerState(),this.updateLayoutState(),this.dockManager.setActivePanel(n),S.forceAllEnqueuedUpdates();const s=n.getPlaceholderDOM().getBoundingClientRect();n.getContentFrameDOM().applyRect(s)}getTabPageByHandle(e){return this.tabPages.find((t=>t.getTabHandle()===e))}}l([pe(),c("design:type",Boolean)],bt.prototype,"isFocused",void 0);class yt{constructor(e,t){this.dockManager=e,this.tabStripDirection=t,this.childContainers=[],this.domContainer=k.create("div").addClass("DockerTS-FillDockContainer").cacheBounds(!1),this.tabHost=new bt(this.dockManager,this.tabStripDirection),this.domContainer.appendChild(this.tabHost.getDOM())}handleContextMenuAction(e){}updateState(){this.tabHost.updateContainerState(),this.tabHost.updateLayoutState()}setHeaderVisibility(e){}isHidden(){return!1}queryLoadedSize(){return Object.assign({},this._loadedSize)}onQueryContextMenu(e){}dispose(){this.tabHost.dispose(),this.domContainer.removeFromDOM()}getDOM(){return this.domContainer.get()}hasChanges(){return!1}getMinimumChildNodeCount(){return 2}setActiveChild(e){this.tabHost.focusActiveTab(e)}setVisible(e){}getMinWidth(){return this.tabHost.getMinWidth()}getMinHeight(){return this.tabHost.getMinHeight()}getWidth(){return this.domContainer.getWidth()}getHeight(){return this.domContainer.getHeight()}performLayout(e,t){this.childContainers=e,this.tabHost.performLayout(e,t)}getChildContainers(){return[...this.childContainers]}resize(e){this.tabHost.resize(e)}getContainerType(){return h.FillLayout}saveState(e){e.width=this.getWidth(),e.height=this.getHeight()}loadState(e){this._loadedSize={w:e.width,h:e.height}}on(e,t){return this.tabHost.on(e,t)}off(e){this.tabHost.off(e)}once(e,t){return this.tabHost.once(e,t)}}class St{constructor(e){this.dockManager=e}dockLeft(e,t){this.performDock(e,t,a.Row,!0)}dockRight(e,t){this.performDock(e,t,a.Row,!1)}dockUp(e,t){this.performDock(e,t,a.Column,!0)}dockDown(e,t){this.performDock(e,t,a.Column,!1)}dockFill(e,t){this.performDock(e,t,a.Fill,!1)}undock(e){const t=e.parent;if(!t)throw new Error("Cannot undock node without a parent.");const i=t.getChildNodeIndex(e);if(e.detachFromParent(),t.getChildCount()<t.container.getMinimumChildNodeCount()){let e=t.parent;for(let i=0;i<t.getChildCount();i++){const n=t.getChildNodeAt(i);if(e){e.addChildAfter(t,n),t.detachFromParent();const i=t.container.getWidth(),s=t.container.getHeight();t.container.dispose(),n.container.resize({x:null,y:null,w:i,h:s}),e.performLayout(!1)}else t.detachFromParent(),t.container.dispose(),this.dockManager.setRootNode(n)}}else if(t.performLayout(!1),t.getChildCount()>0){const e=Math.max(0,i-1),n=t.getChildNodeAt(e);t.container.setActiveChild(n.container)}this.dockManager.invalidate(),this.dockManager.notifyOnUnDock(e)}close(e){const t=null==e?void 0:e.parent;if(t){if(t.getChildCount(),t.getChildNodeIndex(e),e.detachFromParent(),t.getChildCount()<t.container.getMinimumChildNodeCount()){let e=t.parent;for(let i=0;i<t.getChildCount();i++){const n=t.getChildNodeAt(i);if(e){e.addChildAfter(t,n),t.detachFromParent();const i=t.container.getWidth(),s=t.container.getHeight();n.container.resize({x:null,y:null,w:i,h:s}),t.container.dispose(),e.performLayout(!1)}else t.detachFromParent(),t.container.dispose(),this.dockManager.setRootNode(n)}}else t.performLayout(!1);this.dockManager.invalidate(),this.dockManager.notifyOnUnDock(e)}}queryDockInformation(e){const t=e.parent;if(!t)throw new Error("ERROR: Panel Container does not have parent node.");const i=t.container.getContainerType();if(i===h.FillLayout){if(t.getChildCount()>1){let i=t.getChildNodeIndex(e);return i--,i<0&&(i=t.getChildCount()-1),{referenceNode:t.getChildNodeAt(i),dockKind:o.Fill}}return{referenceNode:e.parent,dockKind:o.Fill}}if(i===h.RowLayout){const i=t.container.getContainerRatio(e.container);return 0===t.getChildNodeIndex(e)?{referenceNode:t.getChildNodeAt(1),dockKind:o.Left,ratio:i}:{referenceNode:t.getChildNodeAt(0),dockKind:o.Right,ratio:i}}if(i===h.ColumnLayout){const i=t.container.getContainerRatio(e.container);return 0===t.getChildNodeIndex(e)?{referenceNode:t.getChildNodeAt(1),dockKind:o.Up,ratio:i}:{referenceNode:t.getChildNodeAt(0),dockKind:o.Down,ratio:i}}throw new Error("ERROR: Invalid container type.")}reorderTabs(e,t,i,n){e.getChildCount();"right"===i&&e.getChildCount()}performDock(e,t,i,n){if(e.parent&&e.parent.container.getContainerType()===h.FillLayout&&(e=e.parent),i===a.Fill&&e.container.getContainerType()===h.FillLayout)return e.addChild(t),e.performLayout(!1),e.container.setActiveChild(t.container),this.dockManager.invalidate(),void this.dockManager.notifyOnDock(t);const s=this.dockManager.getModelContext().model;let o,r,d;const l=this.mapOrientationToContainerType(i);if(e===s.rootNode)return n?(o=this.createDockContainer(l,t,e),r=new g(o),r.addChild(t),r.addChild(e)):(o=this.createDockContainer(l,e,t),r=new g(o),r.addChild(e),r.addChild(t)),this.dockManager.setRootNode(r),this.dockManager.rebuildLayout(this.dockManager.getModelContext().model.rootNode),r.container.setActiveChild(t.container),this.dockManager.invalidate(),void this.dockManager.notifyOnDock(t);if(e.parent.container.getContainerType()!==l){d=e.parent;let i=e.container.getWidth(),s=e.container.getHeight();d.container.getWidth();let a=d.container.getHeight();o=this.createDockContainer(l,t,e),r=new g(o),d.addChildAfter(e,r),e.detachFromParent(),e.container.getDOM().remove(),n?(r.addChild(t),r.addChild(e)):(r.addChild(e),r.addChild(t)),d.performLayout(!1),r.performLayout(!0),r.container.setActiveChild(t.container),r.container.resize({x:null,y:null,w:i,h:s}),d.container.resize({x:null,y:null,w:i,h:a})}else d=e.parent,n?d.addChildBefore(e,t):d.addChildAfter(e,t),console.log("RELAYOUTING"),d.performLayout(!1),d.container.setActiveChild(t.container);let c=t.container.getWidth(),u=t.container.getHeight();t.container.resize({x:null,y:null,w:c,h:u}),this.dockManager.invalidate(),this.dockManager.notifyOnDock(t)}forceResizeCompositeContainer(e){const t=x.fromDOMRect(k.from(e.getDOM()).getBoundingClientRect());e.resize(t)}mapOrientationToContainerType(e){return e===a.Fill?h.FillLayout:e===a.Row?h.RowLayout:e===a.Column?h.ColumnLayout:void 0}createDockContainer(e,t,i){if(e===h.FillLayout)return new yt(this.dockManager,r.Bottom);if(e===h.RowLayout)return new ue(this.dockManager,[t.container,i.container]);if(e===h.ColumnLayout)return new ce(this.dockManager,[t.container,i.container]);throw new Error("Invalid DockContainer kind.")}getDockBounds(e,t,i,n){if(i===a.Fill){const t=e.container.getDOM(),i=this.dockManager.getContainerBoundingRect(),n=t.getBoundingClientRect();return{x:n.left-i.left,y:n.top-i.top,w:n.width,h:n.height}}{e.parent&&e.parent.container.getContainerType()===h.FillLayout&&(e=e.parent);let s,o,r,d=!1;e.parent&&this.hasContainerOrientation(e.parent.container,i)?(s=e.parent,o=s.getChildCount(),r=s.getChildNodeIndex(e)+(n?0:1)):(s=e,o=1,r=n?0:1,d=!0);const l=2;let c=0,u=0;if(i===a.Row||i===a.Column){const e=this.getVaryingDimension(s.container,i)-(o-1)*l,a=this.getVaryingDimension(t,i),h=e/(e+a);if(c=a*h,d)u=n?0:e*h;else{for(let e=0;e<r;e++)u+=this.getVaryingDimension(s.getChildNodeAt(e).container,i);u*=h}}let g={x:0,y:0,w:0,h:0};const p=this.dockManager.getContainerBoundingRect(),m=s.container.getDOM().getBoundingClientRect();return i===a.Column?(g.x=m.left-p.left,g.y=m.top-p.top+u,g.w=m.width,g.h=c):i===a.Row&&(g.x=m.left-p.left+u,g.y=m.top-p.top,g.w=c,g.h=m.height),g}}hasContainerOrientation(e,t){return e.getContainerType()===h.FillLayout&&t===a.Fill||e.getContainerType()===h.RowLayout&&t===a.Row||e.getContainerType()===h.ColumnLayout&&t===a.Column}getVaryingDimension(e,t){if(t===a.Row)return e.getWidth();if(t===a.Column)return e.getHeight();throw new Error("Invalid OrientationKind")}}class Mt{constructor(e){this.panelContainer=e}channel(e){return this.panelContainer.getDockManager().getChannel(e)}enableProgressLoader(e){var t,i;e?(this.domProgressLoader=null===(i=(t=this.panelContainer.getAPI()).getProgressLoader)||void 0===i?void 0:i.call(t),void 0===this.domProgressLoader&&(this.domProgressLoader=k.create("div").addClass("DockerTS-ProgressLoader").html('\n    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">\x3c!--!Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2024 Fonticons, Inc.--\x3e<path d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4 .6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"/></svg>\n').get()),this.panelContainer.setContentElement(this.domProgressLoader)):void 0!==this.domProgressLoader&&(this.domProgressLoader.remove(),this.domProgressLoader=void 0)}activate(){this.panelContainer.activatePanel()}getDockManager(){return this.panelContainer.getDockManager()}setPanelIcon(e){this.panelContainer.setTitleIcon(e)}setPanelFAIcon(e){this.setPanelIcon(`<i class="${e}"></i>`)}setPanelTitle(e){this.panelContainer.setTitle(e)}notifyHasChanges(e){this.panelContainer.setHasChanges(e)}addHeaderButton(e){this.panelContainer.addHeaderButton(e)}removeHeaderButton(e){this.panelContainer.removeHeaderButton(e)}showHeaderButton(e,t){this.panelContainer.showHeaderButton(e,t)}listenTo(e,t){return this.panelContainer.on(e,t)}}class wt{constructor(e={}){this.state=e}getValue(e,t){return void 0===this.state[e]?t:this.state[e]}setValue(e,t){this.state[e]=t}getState(){return Object.assign({},this.state)}}class Dt extends Ge{constructor(){super()}onInitialized(){for(const e of Ie){const t=this.constructButtonFromConfig(e);this.iconButtons.push(t)}}}class xt{constructor(e,t,i){this.dockManager=e,this.panel=t,this.config=i,this._lastNotifiedSize={w:-1,h:-1},this.RESIZE_FRAME_RATE=60,this.elementObservers=new Map,this.invokeClientResizeEvent=se.throttle(this.invokeClientResizeEvent.bind(this),1e3/this.RESIZE_FRAME_RATE,{leading:!0,trailing:!0})}enterState(e){return u(this,void 0,void 0,(function*(){this.resizeObserver=new ResizeObserver((e=>{console.dir("--- OBSERVING ----");for(const t of e)if(console.log(t),this.elementObservers.has(t.target)){console.dir("--- MAP OBSERVER HIT ---- ");this.elementObservers.get(t.target)()}}))}))}leaveState(){return u(this,void 0,void 0,(function*(){this.disposeResizeObserver()}))}dispose(){this.disposeResizeObserver()}disposeResizeObserver(){if(void 0!==this.resizeObserver){for(const e of this.elementObservers.keys())this.unobserveElement(e);this.resizeObserver.disconnect(),this.resizeObserver=void 0}}dockPanel(){return u(this,void 0,void 0,(function*(){return!1}))}floatPanel(e){return u(this,void 0,void 0,(function*(){return!1}))}minimize(){return u(this,void 0,void 0,(function*(){return!1}))}maximize(){return u(this,void 0,void 0,(function*(){return!1}))}restore(){return u(this,void 0,void 0,(function*(){return!1}))}collapse(){return u(this,void 0,void 0,(function*(){return!1}))}expand(){return u(this,void 0,void 0,(function*(){return!1}))}showPopup(){return u(this,void 0,void 0,(function*(){return!1}))}hidePopup(){return u(this,void 0,void 0,(function*(){return!1}))}pinPanel(){return u(this,void 0,void 0,(function*(){return!1}))}unpinPanel(){return u(this,void 0,void 0,(function*(){return!1}))}observeElement(e,t){this.elementObservers.set(e,t),this.resizeObserver.observe(e)}unobserveElement(e){this.resizeObserver.unobserve(e),this.elementObservers.delete(e)}configureButtons(e){this.panel.showHeaderButton(we,e.minimize),this.panel.showHeaderButton(xe,e.maximize),this.panel.showHeaderButton(De,e.restore),this.panel.showHeaderButton(Se,e.expand),this.panel.showHeaderButton(Me,e.collapse),this.panel.showHeaderButton(Te,e.popup),this.panel.showHeaderButton(Re,e.pin)}updateState(){this.notifyIfSizeChanged(),this.updateFrameHeaderSelectionState()}notifyIfSizeChanged(){console.log("notifyIfSizeChanged");let e=this.panel.getContentHostDOM().getBoundsRect();e=x.floor(e),this.hasSizeChanged(e)&&(this._lastNotifiedSize={w:e.w,h:e.h},this.invokeClientResizeEvent(e))}invokeClientResizeEvent(e){var t,i;null===(i=(t=this.panel.getAPI()).onResize)||void 0===i||i.call(t,e.w,e.h)}hasSizeChanged(e){return this._lastNotifiedSize.w!==e.w||this._lastNotifiedSize.h!==e.h}updateFrameHeaderSelectionState(){const e=this.panel.getFrameHeaderDOM();this.dockManager.getActivePanel()===this.panel?e.addClass("DockerTS-FrameHeader--Selected"):e.removeClass("DockerTS-FrameHeader--Selected")}}class kt extends xt{enterState(e){const t=Object.create(null,{enterState:{get:()=>super.enterState}});return u(this,void 0,void 0,(function*(){yield t.enterState.call(this,e),this.configureButtons({minimize:!1,maximize:!0,restore:!1,expand:!1,collapse:!1,popup:!0,pin:!0});const i=!1===this.dockManager.isInsideDocumentManager(this.panel);this.panel.setHeaderVisibility(i);this.panel.getContentFrameDOM().zIndex(1),this.panel.updateState();const n=this.panel.getPlaceholderDOM().get();this.observeElement(n,(()=>this.adjustPanelContentSize()))}))}leaveState(){const e=Object.create(null,{leaveState:{get:()=>super.leaveState}});return u(this,void 0,void 0,(function*(){yield e.leaveState.call(this)}))}floatPanel(e){return u(this,void 0,void 0,(function*(){if(void 0===this.config.get("lastFloatingRect")){const t=this.dockManager.config.minimumDefaultWidth,i=this.dockManager.config.minimumDefaultHeight,n=this.dockManager.config.defaultPanelSizeMagnitude,s=Math.max(this.panel.getMinWidth()*n,t),o=Math.max(this.panel.getMinHeight()*n,i);S.forceAllEnqueuedUpdates();const a=e.getPosition(),r=x.from(a.x,a.y,s,o);this.config.set("lastFloatingRect",r)}else{const t=this.config.get("lastFloatingRect"),i=e.getPosition();t.x=i.x,t.y=i.y,this.config.set("lastFloatingRect",t)}return!0}))}maximize(){return u(this,void 0,void 0,(function*(){this.config.set("restoreState",s.Docked),this.config.set("wasHeaderVisible",this.panel.isHeaderVisible());const e=this.panel.getContentFrameDOM().getComputedRect();return this.config.set("originalRect",e),!0}))}showPopup(){return u(this,void 0,void 0,(function*(){return this.config.set("restoreState",s.Docked),!0}))}unpinPanel(){return u(this,void 0,void 0,(function*(){return!0}))}updateState(){this.adjustPanelContentSize(),super.updateState()}adjustPanelContentSize(){let e=this.panel.getPlaceholderDOM().getBoundsRect();const t=this.dockManager.getContentBoundingRect();e.x-=t.x,e.y-=t.y,requestAnimationFrame((()=>{this.panel.getContentFrameDOM().applyRect(e),this.notifyIfSizeChanged()}))}}class Tt extends xt{constructor(e,t,i,n){super(e,t,i),this.dialog=n}enterState(e){const t=Object.create(null,{enterState:{get:()=>super.enterState}});return u(this,void 0,void 0,(function*(){yield t.enterState.call(this,e),void 0===this.dialog&&(this.dialog=this.config.get("panelDialog"));let i=this.config.get("lastFloatingRect");if(void 0===i&&(i=this.config.get("originalRect")),void 0!==i){const e=this.dialog.getDialogFrameDOM();k.from(e).applyRect(i),this.panel.getContentFrameDOM().applyRect(i)}this.configureButtons({minimize:!0,maximize:!0,restore:!1,expand:!1,collapse:!0,popup:!1,pin:!1}),this.panel.updateState(),this.dialog.show();const n=this.dialog.getDialogFrameDOM();this.observeElement(n,(()=>this.adjustPanelContentState()))}))}leaveState(){const e=Object.create(null,{leaveState:{get:()=>super.leaveState}});return u(this,void 0,void 0,(function*(){this.panel.getContentFrameDOM().zIndex(1),this.panel.updateState(),this.dialog.hide(),yield e.leaveState.call(this)}))}dockPanel(){return u(this,void 0,void 0,(function*(){return!0}))}maximize(){return u(this,void 0,void 0,(function*(){this.isCollapsed&&(yield this.expand(!0)),this.config.set("restoreState",s.Floating),this.config.set("panelDialog",this.dialog),this.config.set("wasHeaderVisible",this.panel.isHeaderVisible());const e=k.from(this.dialog.getDialogFrameDOM()).getComputedRect();return this.config.set("lastFloatingRect",e),this.config.set("originalRect",e),!0}))}minimize(){return u(this,void 0,void 0,(function*(){this.isCollapsed&&(yield this.expand(!0));const e=k.from(this.dialog.getDialogFrameDOM()).getComputedRect();return this.config.set("lastFloatingRect",e),this.config.set("restoreState",s.Floating),this.config.set("panelDialog",this.dialog),this.config.set("originalRect",e),!0}))}expand(e){return u(this,void 0,void 0,(function*(){if(void 0===e&&(e=!0),!this.isCollapsed)return!1;this.isCollapsed=!1,this.panel.showHeaderButton(Se,!1),this.panel.showHeaderButton(Me,!0);const t=this.dialog.getDialogFrameDOM(),i=this.panel.getContentContainerDOM();!0===e&&(yield gt.animatePanelExpand(t,i.get(),this.lastDialogExpandedHeight,this.lastContentExpandedHeight)),k.from(t).height(this.lastDialogExpandedHeight),i.height("").css("opacity",""),this.panel.triggerEvent("onEnableResize",!0)}))}collapse(e){return u(this,void 0,void 0,(function*(){if(void 0===e&&(e=!0),this.isCollapsed)return!1;this.isCollapsed=!0,this.panel.showHeaderButton(Se,!0),this.panel.showHeaderButton(Me,!1),this.panel.triggerEvent("onEnableResize",!1);const t=this.dialog.getDialogFrameDOM(),i=this.panel.getFrameHeaderDOM(),n=this.panel.getContentContainerDOM(),s=i.getOffsetRect().h;this.lastDialogExpandedHeight=k.from(t).getHeight(),this.lastContentExpandedHeight=n.getHeight(),!0===e&&(yield gt.animatePanelCollapse(t,n.get(),s)),k.from(t).height(s)}))}updateState(){const e=k.from(this.dialog.getDialogFrameDOM()).getZIndex();this.panel.getContentFrameDOM().zIndex(e-2),this.adjustPanelContentState(),super.updateState()}adjustPanelContentState(){const e=k.from(this.dialog.getDialogFrameDOM()).getBoundsRect(),t=this.dockManager.getContentBoundingRect();e.x-=t.x,e.y-=t.y,this.panel.getContentFrameDOM().applyRect(e)}}class Rt extends M{constructor(e,t){super(),this.collapseKind=e,this.thickness=t,this.initializeComponent()}onInitialized(){}onDisposed(){}onInitialRender(){return this.domRoot=k.create("div").applyClasses({"DockerTS-CollapserHeader":!0,"DockerTS-CollapserHeader--Left":this.collapseKind===o.Left,"DockerTS-CollapserHeader--Right":this.collapseKind===o.Right,"DockerTS-CollapserHeader--Down":this.collapseKind===o.Down}).css("--docker-ts-header-thickness",`${this.thickness}px`),this.domIcon=k.create("div").addClass("DockerTS-CollapserHeader__Icon").appendTo(this.domRoot),this.domTitle=k.create("div").addClass("DockerTS-CollapserHeader__Title").appendTo(this.domRoot),this.bind(this.domRoot.get(),"mouseenter",this.handleOnMouseEnter.bind(this)),this.bind(this.domRoot.get(),"mouseleave",this.handleOnMouseLeave.bind(this)),this.domRoot.get()}onUpdate(e){this.domIcon.html(this.icon),this.domTitle.text(this.title)}handleOnMouseEnter(e){se.suppressEvent(e),this.triggerEvent("onMouseEnter")}handleOnMouseLeave(e){se.suppressEvent(e),this.triggerEvent("onMouseLeave")}}l([ge({defaultValue:""}),c("design:type",String)],Rt.prototype,"icon",void 0),l([ge({defaultValue:""}),c("design:type",String)],Rt.prototype,"title",void 0);class Ot{constructor(e,t){this.elements=e,this.mouseLeaveHandler=t,this.handlerTriggered=!1,this.handleMouseMove=this.handleMouseMove.bind(this),window.addEventListener("mousemove",this.handleMouseMove)}dispose(){window.removeEventListener("mousemove",this.handleMouseMove)}handleMouseMove(e){let t=!1;for(const i of this.elements)t=t||this.isInsideRect(e,i);!1===t&&(this.handlerTriggered||(this.handlerTriggered=!0,this.mouseLeaveHandler()))}isInsideRect(e,t){const i=t.getBoundingClientRect();return i.left<=e.pageX&&i.top<=e.pageY&&e.pageX<=i.right&&e.pageY<=i.bottom}}class zt extends M{constructor(e,t,i,n){super(),this.dockManager=e,this.panel=t,this.collapseKind=i,this.panelRect=n,this.animationRunning=!1,this.initializeComponent();this.dockManager.getContainerElement().appendChild(this.getDOM())}onInitialized(){const e=this.dockManager.config.collapserMarginSize;this.header=new Rt(this.collapseKind,e),this.dockManager.getCollapserMargin(this.collapseKind).appendHeader(this.header.getDOM()),this.header.on("onMouseEnter",(()=>this.showPanel())),this.titleChangeSubscription=this.panel.on("onTitleChanged",(()=>this.requestUpdate())),this.dockManager.getModelContext().appendCollapser(this)}onDisposed(){var e;this.dockManager.getModelContext().removeCollapser(this),this.titleChangeSubscription.unsubscribe(),this.dockManager.getCollapserMargin(this.collapseKind).removeHeader(this.header.getDOM()),null===(e=this.mouseLeaveGuard)||void 0===e||e.dispose(),this.mouseLeaveGuard=void 0,this.header.dispose()}onInitialRender(){return this.domPanelPlaceholder=k.create("div").addClass("DockerTS-Collapser-Placeholder").hide(),this.domPanelPlaceholder.get()}onUpdate(e){this.header.icon=this.panel.getTitleIcon(),this.header.title=this.panel.getTitle()}getPanel(){return this.panel}getPanelPlaceholderDOM(){return this.domPanelPlaceholder}showPanel(){return u(this,void 0,void 0,(function*(){if(this.isPanelVisible()||this.animationRunning)return;this.animationRunning=!0;let e=this.computePanelHiddenRect(),t=this.computePanelVisibleRect();this.triggerEvent("onShowPanel"),this.domPanelPlaceholder.show().applyRect(e),yield gt.animateShowCollapserPanel(this.domPanelPlaceholder.get(),t,(()=>this.panel.updateState())),this.domPanelPlaceholder.applyRect(t),this.panel.updateState(),this.mouseLeaveGuard=new Ot([this.domPanelPlaceholder.get(),this.header.getDOM()],(()=>this.hidePanel())),this.animationRunning=!1}))}hidePanel(){return u(this,void 0,void 0,(function*(){if(this.animationRunning)return;this.animationRunning=!0,this.mouseLeaveGuard.dispose(),this.mouseLeaveGuard=void 0;let e=this.computePanelHiddenRect();yield gt.animateHideCollapserPanel(this.domPanelPlaceholder.get(),e,(()=>this.panel.updateState())),this.triggerEvent("onHidePanel"),this.domPanelPlaceholder.hide(),this.animationRunning=!1}))}isPanelVisible(){return!1===this.panel.isHidden()}computePanelVisibleRect(){const e=this.getHeaderArchorPosition(),t=this.getSlidingDimensionSize(),i=this.getNonSlidingDimensionSize();switch(this.collapseKind){case o.Left:return{x:e.x,y:e.y,w:t,h:i};case o.Right:return{x:e.x-t,y:e.y,w:t,h:i};case o.Down:return{x:e.x,y:e.y-t,w:i,h:t}}}computePanelHiddenRect(){const e=this.getHeaderArchorPosition(),t=this.getSlidingDimensionSize(),i=this.getNonSlidingDimensionSize();switch(this.collapseKind){case o.Left:return{x:e.x-t,y:e.y,w:t,h:i};case o.Right:return{x:e.x+t,y:e.y,w:t,h:i};case o.Down:return{x:e.x,y:e.y+t,w:i,h:t}}}getSlidingDimensionSize(){const e=this.dockManager.getContentBoundingRect(),t=this.collapseKind===o.Down?this.panelRect.h:this.panelRect.w,i=this.collapseKind===o.Down?e.h:e.w,n=this.collapseKind===o.Down?this.dockManager.config.collapserVerticalSlidingRatio:this.dockManager.config.collapserHorizontalSlidingRatio;return Math.min(t,n*i)}getNonSlidingDimensionSize(){const e=this.collapseKind===o.Down?this.panelRect.w:this.panelRect.h,t=this.collapseKind===o.Down?this.dockManager.config.collapserMaxVerticalNonSlidingDim:this.dockManager.config.collapserMaxHorizontalNonSlidingDim;return Math.min(e,t)}getHeaderArchorPosition(){let e=x.fromDOMRect(this.header.getDOM().getBoundingClientRect());switch(e=this.dockManager.adjustToFullWindowRelative(e),this.collapseKind){case o.Left:return{x:e.x+e.w,y:e.y};case o.Right:case o.Down:return{x:e.x,y:e.y}}}}class Pt{constructor(e,t){this.dockManager=e,this.panel=t,this.dockingInfo=new Map,this.dockingHierarchy=new Array}getCollapserDockKind(){for(let e=0;e<this.dockingHierarchy.length;e++){const t=this.dockingHierarchy[e],i=this.dockingInfo.get(t);if(i.dockKind===o.Left||i.dockKind===o.Right)return i.dockKind;if(i.dockKind===o.Up||i.dockKind===o.Down)return o.Down}return o.Down}scanDock(){let e=this.dockManager.findNodeFromContainer(this.panel);for(;e.parent;){this.dockingHierarchy.push(e);const t=this.dockManager.queryDockInformationForNode(e);this.dockingInfo.set(e,t),e=e.parent}}restoreDock(){for(let e=0;e<this.dockingHierarchy.length;e++){const t=this.dockingHierarchy[e],i=this.dockingInfo.get(t);if(!1!==this.dockManager.existsDockNodeInModel(i.referenceNode))return void this.performDock(i)}this.performDock({referenceNode:this.dockManager.getDocumentNode(),dockKind:o.Fill})}dispose(){this.dockingInfo.clear(),this.dockingHierarchy=[]}performDock(e){e.dockKind===o.Fill?this.dockManager.dockFill(e.referenceNode,this.panel):e.dockKind===o.Left?this.dockManager.dockLeft(e.referenceNode,this.panel,e.ratio):e.dockKind===o.Right?this.dockManager.dockRight(e.referenceNode,this.panel,e.ratio):e.dockKind===o.Up?this.dockManager.dockUp(e.referenceNode,this.panel,e.ratio):e.dockKind===o.Down&&this.dockManager.dockDown(e.referenceNode,this.panel,e.ratio)}}class Et{static scanDockInfo(e,t){const i=new Pt(e,t);return i.scanDock(),i}}class Ht extends xt{enterState(e){const t=Object.create(null,{enterState:{get:()=>super.enterState}});return u(this,void 0,void 0,(function*(){yield t.enterState.call(this,e),this.configureButtons({minimize:!1,maximize:!1,restore:!1,expand:!1,collapse:!1,popup:!1,pin:!0});const i=this.panel.getContentFrameDOM().getBoundsRect();this.autoDock=Et.scanDockInfo(this.dockManager,this.panel),this.dockManager.requestUndock(this.panel),this.panel.updateState(),this.panel.setVisible(!1);const n=this.autoDock.getCollapserDockKind();this.collapser=new zt(this.dockManager,this.panel,n,i),this.collapser.on("onShowPanel",(()=>this.handlePanelShown())),this.collapser.on("onHidePanel",(()=>this.handlePanelHidden()))}))}leaveState(){const e=Object.create(null,{leaveState:{get:()=>super.leaveState}});return u(this,void 0,void 0,(function*(){this.autoDock.restoreDock(),this.autoDock.dispose(),this.collapser.dispose(),yield e.leaveState.call(this)}))}dispose(){this.autoDock.dispose()}pinPanel(){return u(this,void 0,void 0,(function*(){return!0}))}updateState(){if(void 0===this.collapser)return;const e=this.collapser.getPanelPlaceholderDOM(),t=this.panel.getContentFrameDOM();let i=e.getBoundsRect();i=this.dockManager.adjustToFullWindowRelative(i),t.applyRect(i).zIndex(3),super.updateState()}handlePanelShown(){this.panel.setVisible(!0)}handlePanelHidden(){this.panel.setVisible(!1)}}class It extends xt{enterState(e){const t=Object.create(null,{enterState:{get:()=>super.enterState}});return u(this,void 0,void 0,(function*(){yield t.enterState.call(this,e);const i=this.config.get("restoreState");this.configureButtons({minimize:i===s.Floating,restore:!0,maximize:!1,expand:!1,collapse:!1,popup:!1,pin:!1});this.panel.getContentFrameDOM().zIndex(this.dockManager.config.zIndexes.zIndexMaximizedPanel),this.panel.updateState();const n=this.dockManager.getContainerElement();this.observeElement(n,(()=>this.adjustMaximizedElementRect()))}))}leaveState(){const e=Object.create(null,{leaveState:{get:()=>super.leaveState}});return u(this,void 0,void 0,(function*(){this.panel.getContentFrameDOM().zIndex(1),this.panel.updateState(),yield e.leaveState.call(this)}))}minimize(){return u(this,void 0,void 0,(function*(){return!0}))}restore(){return u(this,void 0,void 0,(function*(){return!0}))}updateState(){}adjustMaximizedElementRect(){const e=this.dockManager.getRelativeFullWindowRect();this.panel.getContentFrameDOM().applyRect(e)}}class Bt extends xt{constructor(){super(...arguments),this.minimizingSlotId=0,this.isCapturedInMinimizingSlot=!1}enterState(e){const t=Object.create(null,{enterState:{get:()=>super.enterState}});return u(this,void 0,void 0,(function*(){yield t.enterState.call(this,e),this.configureButtons({minimize:!1,maximize:!0,restore:!0,expand:!1,collapse:!1,popup:!1,pin:!1});this.panel.getContentFrameDOM().addClass("DockerTS-ContentFrame--Minimized"),this.isCapturedInMinimizingSlot=!0,this.minimizingSlotId=this.dockManager.requestMinimizeSlot(),this.updateMinimizedSlotPosition()}))}leaveState(){const e=Object.create(null,{leaveState:{get:()=>super.leaveState}});return u(this,void 0,void 0,(function*(){const t=this.panel.getContentFrameDOM(),i=t.getComputedRect();t.zIndex("").removeClass("DockerTS-ContentFrame--Minimized").css("right","").applyRect(i),this.isCapturedInMinimizingSlot=!1,this.dockManager.releaseMinimizeSlot(this.minimizingSlotId),yield e.leaveState.call(this)}))}dispose(){this.dockManager.releaseMinimizeSlot(this.minimizingSlotId),super.dispose()}maximize(){return u(this,void 0,void 0,(function*(){return this.config.set("restoreState",s.Floating),this.config.set("wasHeaderVisible",!0),!0}))}restore(){return u(this,void 0,void 0,(function*(){return!0}))}updateState(){super.updateState(),this.isCapturedInMinimizingSlot&&this.updateMinimizedSlotPosition()}updateMinimizedSlotPosition(){const e=this.panel.getContentFrameDOM(),t=this.panel.getFrameHeaderDOM(),i=this.dockManager.getSlotCSSPropertyName(this.minimizingSlotId);e.left("").top("").width("").height(t.getHeight()).css("right",`var(${i})`)}}class Ft{static showElementInBrowserWindow(e,t,i){const n=e.getBoundingClientRect(),s={x:n.left+i.windowOffset.x,y:n.top+i.windowOffset.y,w:n.width,h:n.height},o=this.openPopupWindow(s);return o.onfocus=e=>{var t;return null===(t=i.onFocused)||void 0===t?void 0:t.call(i,e)},o.onblur=e=>{var t;return null===(t=i.onBlurred)||void 0===t?void 0:t.call(i,e)},o.onunload=()=>{var e;return null===(e=i.onPopupWindowClosed)||void 0===e?void 0:e.call(i)},this.transferAllCSSStyles(o),this.applyWindowTitle(o,i.title),e.remove(),(e=o.document.adoptNode(e)).setAttribute("style","left: 0; top: 0; width: 100%; height: 100%"),o.document.body.appendChild(e),t.forEach((e=>{e.remove(),e=o.document.adoptNode(e),o.document.body.appendChild(e)})),o}static applyWindowTitle(e,t){const i=e.document.createElement("title");i.innerText=t,e.document.head.appendChild(i)}static transferAllCSSStyles(e){const t=[...document.head.querySelectorAll("link")].map((e=>e.cloneNode()));for(const i of t)e.document.head.appendChild(e.document.adoptNode(i));const i=e.document.createElement("style");i.innerText="\n    html {\n        overflow: hidden;\n        position: fixed;\n        width: 100%;\n        height: 100%;\n    }\n    body {\n        height: 100%;\n        width: 100%;\n        padding: 0;\n        margin: 0;\n        display: grid;\n    }\n",e.document.head.appendChild(i)}static openPopupWindow(e){const t=`popup=yes,left=${e.x},top=${e.y},width=${e.w},height=${e.h}`;return window.open("about:blank",void 0,t)}}class At extends xt{constructor(){super(...arguments),this.adoptedPopupElements=[]}enterState(e){const t=Object.create(null,{enterState:{get:()=>super.enterState}});return u(this,void 0,void 0,(function*(){yield t.enterState.call(this,e),this.configureButtons({maximize:!1,minimize:!1,expand:!1,collapse:!1,restore:!1,popup:!1,pin:!1}),this.panel.enableDefaultContextMenu(!1),this.autoDock=Et.scanDockInfo(this.dockManager,this.panel),this.undockPanel(),this.panel.updateState(),setTimeout((()=>{this.openWindowInPopup()}))}))}leaveState(){const e=Object.create(null,{leaveState:{get:()=>super.leaveState}});return u(this,void 0,void 0,(function*(){this.autoDock.dispose(),this.adoptedPopupElements=[],this.popupWindow=void 0,yield e.leaveState.call(this)}))}hidePopup(){return u(this,void 0,void 0,(function*(){return this.adoptedPopupElements.forEach((e=>{e=document.adoptNode(e),document.body.appendChild(e)})),this.popupWindow.close(),this.autoDock.restoreDock(),this.panel.activatePanel(),this.panel.updateState(),!0}))}updateState(){super.updateState()}undockPanel(){this.dockManager.requestUndock(this.panel)}openWindowInPopup(){const e=this.panel.getContentFrameDOM(),t=this.panel.getChildContainers().map((e=>e.getContentFrameDOM().get()));this.adoptedPopupElements=[e.get()].concat(t),this.popupWindow=Ft.showElementInBrowserWindow(e.get(),t,{title:this.panel.getTitle(),windowOffset:{x:0,y:0},onPopupWindowClosed:()=>this.panel.hidePopupWindow()})}}class Lt{constructor(){this.data={}}get(e,t){return void 0===this.data[e]?t:this.data[e]}set(e,t){this.data[e]=t}}class Nt{constructor(e,t,i){this.dockManager=e,this.panel=t,this.config=i}}class _t extends Nt{trigger(){return u(this,void 0,void 0,(function*(){const e=this.panel.getContentFrameDOM();e.addClass("DockerTS-ContentFrame--Animating"),this.panel.isHeaderVisible()?yield this.animateWithHeaderVisible():yield this.animateWithHeaderShowing(),e.removeClass("DockerTS-ContentFrame--Animating")}))}animateWithHeaderShowing(){return u(this,void 0,void 0,(function*(){const e=this.panel.getContentFrameDOM();e.zIndex(this.dockManager.config.zIndexes.zIndexMaximizedPanel),this.panel.updateState();const t=this.dockManager.getRelativeFullWindowRect(),i=this.panel.getFrameHeaderDOM(),n=i.getOffsetRect().h;this.panel.setHeaderVisibility(!0),i.height(0),S.forceEnqueuedDOMUpdates(),yield gt.animateMaximizeNoHeader(e.get(),i.get(),n,{x:t.x,y:t.y,w:t.w,h:t.h}),i.height(""),e.applyRect(t),this.panel.updateState()}))}animateWithHeaderVisible(){return u(this,void 0,void 0,(function*(){const e=this.panel.getContentFrameDOM();e.zIndex(this.dockManager.config.zIndexes.zIndexMaximizedPanel),this.panel.updateState();const t=this.dockManager.getRelativeFullWindowRect();yield gt.animateMaximize(e.get(),{x:t.x,y:t.y,w:t.w,h:t.h}),e.applyRect(t)}))}}class Wt extends Nt{trigger(){return u(this,void 0,void 0,(function*(){const e=this.panel.getContentFrameDOM();e.zIndex(this.dockManager.config.zIndexes.zIndexMaximizedPanel).addClass("DockerTS-ContentFrame--Animating"),this.panel.updateState();const t=this.config.get("restoreState");let i=this.config.get("originalRect");t===s.Docked&&(i=this.panel.getPlaceholderDOM().getBoundsRect(),i=this.dockManager.adjustToFullWindowRelative(i));const n=this.config.get("wasHeaderVisible",!0);if(t===s.Docked)if(!1===n){const t=this.panel.getFrameHeaderDOM();yield gt.animateRestoreNoHeader(e.get(),t.get(),i),t.height("")}else yield gt.animateRestore(e.get(),i);else yield gt.animateRestore(e.get(),i);e.applyRect(i).removeClass("DockerTS-ContentFrame--Animating").zIndex(""),this.panel.updateState()}))}}class Ut extends Nt{trigger(){return u(this,void 0,void 0,(function*(){const e=this.panel.getContentFrameDOM();e.zIndex(this.dockManager.config.zIndexes.zIndexMaximizedPanel).addClass("DockerTS-ContentFrame--Animating"),this.panel.updateState();let t=this.dockManager.getNextFreeMinimizedSlotRect();t=this.dockManager.adjustToFullWindowRelative(t),yield gt.animateMinimize(e.get(),t),e.applyRect(t).removeClass("DockerTS-ContentFrame--Animating").zIndex(""),this.panel.updateState()}))}}class Vt extends Nt{trigger(){return u(this,void 0,void 0,(function*(){}))}}const jt=[{fromState:s.Minimized,toState:s.Maximized,transitionCtor:_t},{fromState:s.Minimized,toState:s.Floating,transitionCtor:Wt},{fromState:s.Maximized,toState:s.Minimized,transitionCtor:Ut},{fromState:s.Maximized,toState:s.Docked,transitionCtor:Wt},{fromState:s.Maximized,toState:s.Floating,transitionCtor:Wt},{fromState:s.Docked,toState:s.Maximized,transitionCtor:_t},{fromState:s.Floating,toState:s.Maximized,transitionCtor:_t},{fromState:s.Floating,toState:s.Minimized,transitionCtor:Ut},{fromState:s.Docked,toState:s.Floating,transitionCtor:Vt},{fromState:s.Floating,toState:s.Docked,transitionCtor:Vt},{fromState:s.Docked,toState:s.PopupWindow,transitionCtor:Vt},{fromState:s.PopupWindow,toState:s.Docked,transitionCtor:Vt},{fromState:s.Docked,toState:s.InCollapser,transitionCtor:Vt},{fromState:s.InCollapser,toState:s.Docked,transitionCtor:Vt}];class qt{static create(e,t,i,n,s){return new(this.lookupTransition(n,s))(e,t,i)}static lookupTransition(e,t){const i=jt.find((i=>i.fromState===e&&i.toState===t));if(void 0===i)throw new Error(`Transition from state ${e} to state ${t} was not found.`);return i.transitionCtor}}class Xt{constructor(e,t,i){this.dockManager=e,this.panel=t,this.config=new Lt,this.containerState=i,this.currentState=this.createStateByType(i),this.currentState.enterState(!0)}getCurrentState(){return this.containerState}dispose(){this.currentState.dispose(),this.panel=void 0,this.currentState=void 0,this.dockManager=void 0}dockPanel(){return u(this,void 0,void 0,(function*(){const e=yield this.currentState.dockPanel();return e&&(delete this.dialog,yield this.changeStateTo(s.Docked)),e}))}floatPanel(e){return u(this,void 0,void 0,(function*(){const t=yield this.currentState.floatPanel(e);return t&&(this.dialog=e,yield this.changeStateTo(s.Floating)),t}))}minimize(){return u(this,void 0,void 0,(function*(){const e=yield this.currentState.minimize();return e&&(delete this.dialog,yield this.changeStateTo(s.Minimized)),e}))}maximize(){return u(this,void 0,void 0,(function*(){const e=yield this.currentState.maximize();return e&&(delete this.dialog,yield this.changeStateTo(s.Maximized)),e}))}restore(){return u(this,void 0,void 0,(function*(){const e=yield this.currentState.restore();return e&&(yield this.changeStateTo(this.config.get("restoreState",s.Docked))),e}))}showPopup(){return u(this,void 0,void 0,(function*(){const e=yield this.currentState.showPopup();return e&&(yield this.changeStateTo(s.PopupWindow)),e}))}hidePopup(){return u(this,void 0,void 0,(function*(){const e=yield this.currentState.hidePopup();return e&&(yield this.changeStateTo(this.config.get("restoreState",s.Docked))),e}))}pinPanel(){return u(this,void 0,void 0,(function*(){const e=yield this.currentState.pinPanel();return e&&(yield this.changeStateTo(s.Docked)),e}))}unpinPanel(){return u(this,void 0,void 0,(function*(){const e=yield this.currentState.unpinPanel();return e&&(yield this.changeStateTo(s.InCollapser)),e}))}collapse(){return u(this,void 0,void 0,(function*(){return yield this.currentState.collapse()}))}expand(){return u(this,void 0,void 0,(function*(){return yield this.currentState.expand()}))}updateState(){var e;null===(e=this.currentState)||void 0===e||e.updateState()}changeStateTo(e){return u(this,void 0,void 0,(function*(){yield this.currentState.leaveState(),this.currentState=void 0;const t=qt.create(this.dockManager,this.panel,this.config,this.containerState,e);yield t.trigger(),this.containerState=e,this.currentState=this.createStateByType(e),yield this.currentState.enterState(!1)}))}createStateByType(e){switch(e){case s.Docked:return new kt(this.dockManager,this.panel,this.config);case s.Floating:return new Tt(this.dockManager,this.panel,this.config,this.dialog);case s.Maximized:return new It(this.dockManager,this.panel,this.config);case s.Minimized:return new Bt(this.dockManager,this.panel,this.config);case s.PopupWindow:return new At(this.dockManager,this.panel,this.config);case s.InCollapser:return new Ht(this.dockManager,this.panel,this.config);default:throw new Error(`Unknown Panel State ${e}`)}}}class Yt extends M{constructor(e,t,i){super(),this.dockManager=e,this.panelTypeName=t,this.api=i,this._isDefaultContextMenuEnabled=!0,this._isProcessingDefaultAction=!1,this._iconHtml="",this._title="",this._hasChanges=!1,this._isVisible=!1,this.initializeComponent()}getAPI(){return this.api}getTitleHtml(){return this.domTitle.getHtml()}setTitle(e){this._title=e,this.updateTitle()}getTitle(){return this._title}getTitleIcon(){return this._iconHtml}setTitleIcon(e){this._iconHtml=e,this.updateTitle()}hasChanges(){return this._hasChanges}setHasChanges(e){this._hasChanges=e,this.updateTitle()}updateTitle(){this.domTitle.html(this._iconHtml),this.domTitleText.addClass("DockerTS-HeaderTitleText").text(this._title).appendTo(this.domTitle),this.triggerEvent("onTitleChanged",this.getTitleHtml())}queryLoadedSize(){return Object.assign({},this._loadedSize)}getDockManager(){return this.dockManager}getContentFrameDOM(){return this.domContentFrame}getContentContainerDOM(){return this.domContentContainer}getFrameHeaderDOM(){return this.domFrameHeader}getContentHostDOM(){return this.domContentHost}getPlaceholderDOM(){return this.domPanelPlaceholder}isHidden(){return!this._isVisible}setVisible(e){this._isVisible=e,e?(this.domContentFrame.show(),this.updateState()):this.domContentFrame.hide()}isHeaderVisible(){return!1===this.domContentFrame.hasClass("DockerTS-ContentFrame--NoHeader")}setHeaderVisibility(e){e?(this.domFrameHeader.css("visibility",""),this.domContentFrame.removeClass("DockerTS-ContentFrame--NoHeader")):(this.domFrameHeader.css("visibility","collapse"),this.domContentFrame.addClass("DockerTS-ContentFrame--NoHeader"))}enableDefaultContextMenu(e){this._isDefaultContextMenuEnabled=e}isDefaultContextMenuEnabled(){return this._isDefaultContextMenuEnabled}getContainerType(){return h.Panel}onQueryContextMenu(e){var t,i;return null===(i=(t=this.api).onQueryContextMenu)||void 0===i?void 0:i.call(t,e)}handleContextMenuAction(e){var t,i;null===(i=(t=this.api).onActionInvoked)||void 0===i||i.call(t,e)}getMinimumChildNodeCount(){return 0}getChildContainers(){return[]}setActiveChild(e){}activatePanel(){this.triggerEvent("onFocused"),this.dockManager.setActivePanel(this)}getPosition(){const e=this.domContentFrame.getBoundsRect();return{x:e.x,y:e.y}}getWidth(){return this.domContentFrame.getBoundsRect().w}getHeight(){return this.domContentFrame.getBoundsRect().h}getMinWidth(){var e,t,i;return null!==(i=null===(t=(e=this.api).getMinWidth)||void 0===t?void 0:t.call(e))&&void 0!==i?i:this.dockManager.config.defaultMinWidth}getMinHeight(){var e,t,i;let n=null!==(i=null===(t=(e=this.api).getMinHeight)||void 0===t?void 0:t.call(e))&&void 0!==i?i:this.dockManager.config.defaultMinHeight;return this.isHeaderVisible()&&(n+=this.domFrameHeader.getOffsetRect().h),n}expandPanel(){return u(this,void 0,void 0,(function*(){this.activatePanel(),yield this.state.expand()}))}collapsePanel(){return u(this,void 0,void 0,(function*(){this.activatePanel(),yield this.state.collapse()}))}restorePanel(){return u(this,void 0,void 0,(function*(){this.activatePanel(),yield this.state.restore()}))}minimizePanel(){return u(this,void 0,void 0,(function*(){yield this.state.minimize()}))}showPopupWindow(){return u(this,void 0,void 0,(function*(){this.activatePanel(),yield this.state.showPopup()}))}hidePopupWindow(){return u(this,void 0,void 0,(function*(){yield this.state.hidePopup()}))}togglePinState(){return u(this,void 0,void 0,(function*(){this.state.getCurrentState()===s.InCollapser?yield this.state.pinPanel():yield this.state.unpinPanel()}))}toggleMaximizedPanelState(){this.state.getCurrentState()===s.Maximized?this.restorePanel():this.maximizePanel()}maximizePanel(){this.activatePanel(),this.state.maximize()}resize(e){}invalidate(){const e=this.domContentFrame.getComputedRect();this.resize(e)}performLayout(e,t){}updateState(){this.state.updateState()}onDraggingStarted(){this.getContentFrameDOM().addClass("DockerTS-ContentFrame--Dragging")}onDraggingEnded(){this.getContentFrameDOM().removeClass("DockerTS-ContentFrame--Dragging")}setContentElement(e){var t,i,n;this.domContent===e&&this.domContent.parentElement===e.parentElement||(null===(t=this.domContent)||void 0===t||t.remove(),this.domContent=e,null===(i=this.domContentHost)||void 0===i||i.appendChild(this.domContent),null===(n=this.contentPanelMouseDown)||void 0===n||n.unbind(),this.contentPanelMouseDown=new v(this.domContentHost.get()),this.contentPanelMouseDown.bind("mousedown",this.handleMouseDownOnPanel.bind(this),{capture:!0}))}getContentElement(){return this.domContent}getHeaderElement(){return this.domTitle.get()}addHeaderButton(e){this.buttonBar.appendUserButton(e)}removeHeaderButton(e){this.buttonBar.removeUserButton(e)}showHeaderButton(e,t){t?this.buttonBar.allowAction(e):this.buttonBar.denyAction(e)}isActionAllowed(e){return this.buttonBar.isActionAllowed(e)}handleDefaultPanelAction(e){return u(this,void 0,void 0,(function*(){this._isProcessingDefaultAction||(this._isProcessingDefaultAction=!0,e===Me?yield this.collapsePanel():e===Se?yield this.expandPanel():e===xe?yield this.maximizePanel():e===De?yield this.restorePanel():e===we?yield this.minimizePanel():e===ke?yield this.close():e===Te?yield this.showPopupWindow():e===Re&&(yield this.togglePinState()),this._isProcessingDefaultAction=!1)}))}onInitialized(){this._iconHtml="",this._hasChanges=!1,this._title=this.dockManager.config.defaultPanelLabel}onDisposed(){this.contentPanelMouseDown.unbind(),this.state.dispose(),this.buttonBar.dispose()}onInitialRender(){return this.domContentFrame=k.create("div").addClass("DockerTS-ContentFrame"),this.domFrameHeader=k.create("div").addClass("DockerTS-FrameHeader").appendTo(this.domContentFrame),this.domTitle=k.create("div").addClass("DockerTS-HeaderTitleBar"),this.domTitleText=k.create("div"),this.buttonBar=new Dt,this.buttonBar.on("onAction",this.handleDefaultPanelAction.bind(this)),this.domFrameHeader.appendChild(this.domTitle),this.domFrameHeader.appendChild(this.buttonBar.getDOM()),this.bind(this.domFrameHeader.get(),"dblclick",(()=>{this.toggleMaximizedPanelState()})),this.bind(this.domFrameHeader.get(),"mousedown",this.handleMouseDownOnHeader.bind(this)),this.bind(this.domFrameHeader.get(),"contextmenu",this.handleContextMenuClick.bind(this)),this.domContentContainer=k.create("div").addClass("DockerTS-ContentContainer").appendTo(this.domContentFrame),this.domContentHost=k.create("div").addClass("DockerTS-ContentHost").appendTo(this.domContentContainer),this.bind(this.domContentContainer.get(),"mousedown",this.handleMouseFocusEvent.bind(this)),this.dockManager.getContainerElement().appendChild(this.domContentFrame.get()),this.domPanelPlaceholder=k.create("div").attr("tabIndex","-1").addClass("DockerTS-PanelPlaceholder").cacheBounds(!1),this.bind(this.domContentFrame.get(),"mousedown",this.handleMouseDownOnPanel.bind(this)),this.state=new Xt(this.dockManager,this,s.Docked),this.setHeaderVisibility(!1),this.updateTitle(),this.updateState(),this.domPanelPlaceholder.get()}onUpdate(e){}static loadFromState(e,t){return u(this,void 0,void 0,(function*(){const i=t.gainPanelApiContract(e.panelName),n=new Yt(t,e.panelName,i),s=yield i.initialize(new Mt(n),null);return n.setContentElement(s),n.loadState(e),n}))}saveState(e){var t,i;e.panelName=this.panelTypeName,e.width=this.getWidth(),e.height=this.getHeight();const n=new wt;null===(i=(t=this.api).saveState)||void 0===i||i.call(t,n),e.panelClientState=n.getState()}loadState(e){var t,i,n;this._loadedSize={w:e.width,h:e.height},this.panelTypeName=e.panelName;const s=new wt(null!==(t=e.panelClientState)&&void 0!==t?t:{});null===(n=(i=this.api).loadState)||void 0===n||n.call(i,s)}canUndock(e){return!0}requestUndockToDialog(e,t){return u(this,void 0,void 0,(function*(){const i=this.dockManager.requestUndockToDialog(this,e,t);return yield this.state.floatPanel(i),i}))}performUndock(){this.dockManager.requestUndock(this)}prepareForDocking(){return u(this,void 0,void 0,(function*(){this.dockManager.getContainerElement().appendChild(this.domContentFrame.get()),yield this.state.dockPanel(),this.updateState()}))}close(){return u(this,void 0,void 0,(function*(){var e,t,i;return!(null!==(i=yield null===(t=(e=this.api).canClose)||void 0===t?void 0:t.call(e))&&void 0!==i&&!i)&&(this.performClose(),!0)}))}performClose(){return u(this,arguments,void 0,(function*(e=!0){var t,i;yield null===(i=(t=this.api).onClose)||void 0===i?void 0:i.call(t),this.triggerEvent("onClose"),e&&this.dockManager.requestClose(this),this.domContent.remove(),this.domContentHost.removeFromDOM(),this.domContentFrame.removeFromDOM(),this.destroy()}))}destroy(){this.dispose()}handleMouseDownOnHeader(e){e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),this.triggerEvent("onFocused");const t=e.pageX,i=e.pageY;if(this.state.getCurrentState()===s.Docked){let n=!1;oe.start(e,(e=>u(this,void 0,void 0,(function*(){if(!1===n){n=!0;const s=this.domFrameHeader.getBoundsRect(),o={x:t-s.x,y:i-s.y};yield this.requestUndockToDialog(e,o),this.triggerEvent("onDockingDragStart",e)}else this.triggerEvent("onDockingDragMove",e)}))),(e=>{this.triggerEvent("onDockingDragStop",e)}),"pointer",(()=>{}),te.withThreshold)}}handleMouseDownOnPanel(e){this.triggerEvent("onFocused"),this.activatePanel()}handleContextMenuClick(e){var t,i;let n;if(e.preventDefault(),n=this._isDefaultContextMenuEnabled?Ye.createDefaultContextMenu(this):new Le,null===(i=(t=this.api).onQueryContextMenu)||void 0===i||i.call(t,n),0===n.getMenuItems().length)return;const s=this.dockManager.config.zIndexes.zIndexContextMenu,o=new Xe(n);o.on("onAction",(e=>{var t,i;He(e)?this.handleDefaultPanelAction(e):null===(i=(t=this.api).onActionInvoked)||void 0===i||i.call(t,e)})),o.show(e,s)}handleMouseFocusEvent(e){}}class Kt extends M{constructor(e,t){super(),this.wheelType=e,this.zIndex=t,this.initializeComponent()}getWheelType(){return this.wheelType}isSideWheelItem(){return this.wheelType===d.SideTop||this.wheelType===d.SideBottom||this.wheelType===d.SideLeft||this.wheelType===d.SideRight}onInitialized(){}onDisposed(){}onInitialRender(){return this.domWheelItem=k.create("div").addClasses(["dock-wheel-item","DockerTS--DisableSelection"]).addClasses(this.getWheelItemCssClasses()).zIndex(this.zIndex),this.bind(this.domWheelItem.get(),"mouseenter",this.handleMouseEnter.bind(this)),this.bind(this.domWheelItem.get(),"mouseleave",this.handleMouseLeave.bind(this)),this.domWheelItem.get()}getWheelItemCssClasses(){const e=this.getCssClassPart();return[`dock-wheel-${e}`,`dock-wheel-${e}-icon`]}getWheelItemIcon(){return`dock-wheel-${this.getCssClassPart()}-icon`}getWheelItemHoverIcon(){return`dock-wheel-${this.getCssClassPart()}-icon-hover`}getCssClassPart(){switch(this.wheelType){case d.Bottom:case d.SideBottom:return"down";case d.Fill:return"fill";case d.Left:case d.SideLeft:return"left";case d.Right:case d.SideRight:return"right";case d.Top:case d.SideTop:return"top"}}onUpdate(e){this.domWheelItem.toggleClass(this.getWheelItemIcon(),!this.active),this.domWheelItem.toggleClass(this.getWheelItemHoverIcon(),this.active)}handleMouseEnter(e){this.active=!0,this.triggerEvent("onMouseEnter",{wheelItem:this,event:e})}handleMouseLeave(e){this.active=!1,this.triggerEvent("onMouseLeave",{wheelItem:this,event:e})}}l([ge({defaultValue:!1}),c("design:type",Boolean)],Kt.prototype,"active",void 0);class $t{constructor(e){this.dockManager=e,this.wheelItems=[],this.previewOff=!0,this.removeDOMPreviewDbc=se.debounce(this.removeDOMPreview,350,{leading:!1,trailing:!0}),this.isVisible=!1,this.activeDialog=void 0,this.activeNode=void 0,this.handleWheelMouseEnter=this.handleWheelMouseEnter.bind(this),this.handleWheelMouseLeave=this.handleWheelMouseLeave.bind(this),this.initialize()}initialize(){const e=this.dockManager.getWheelZIndex();this.domMainWheel=k.create("div").addClass("dock-wheel-base"),this.domSideWheel=k.create("div").addClass("dock-wheel-base"),this.domPanelPreview=k.create("div").addClass("dock-wheel-panel-preview").zIndex(e-1),this.constructWheelItems()}constructWheelItems(){const e=this.dockManager.config.zIndexes.zIndexWheelItem;for(const t in d){const i=d[t],n=new Kt(i,e);n.on("onMouseEnter",this.handleWheelMouseEnter),n.on("onMouseLeave",this.handleWheelMouseLeave),this.wheelItems.push(n),n.isSideWheelItem()?this.domSideWheel.appendChild(n.getDOM()):this.domMainWheel.appendChild(n.getDOM())}}setActiveDialog(e){this.activeDialog=e}setActiveNode(e){this.activeNode!==e&&(this.activeNode=e,this.isVisible&&this.showWheel())}getActiveNode(){return this.activeNode}showWheel(){if(this.isVisible=!0,this.activeNode){const e=this.dockManager.getContentBoundingRect(),t=this.activeNode.container.getDOM().getBoundingClientRect(),i={x:t.x+t.width/2,y:t.y+t.height/2};this.domMainWheel.left(i.x-e.x).top(i.y);const n=this.dockManager.getContainerElement();this.domMainWheel.appendTo(n),this.domSideWheel.appendTo(n);const s=this.dockManager.config.sideWheelMargin,o=e.w,a=e.h;this.setWheelButtonPosition(d.SideLeft,s,a/2),this.setWheelButtonPosition(d.SideRight,o-s,a/2),this.setWheelButtonPosition(d.SideTop,o/2,s),this.setWheelButtonPosition(d.SideBottom,o/2,a-s)}else this.domMainWheel.removeFromDOM(),this.domSideWheel.removeFromDOM()}setWheelButtonPosition(e,t,i){const n=this.wheelItems.find((t=>t.getWheelType()===e)).getDOM(),s=n.getBoundingClientRect(),o={x:t-s.width/2,y:i-s.height/2};k.from(n).left(o.x).top(o.y).css("margin-left","0").css("margin-top","0")}hideWheel(){this.isVisible=!1,this.activeNode=void 0,this.domMainWheel.removeFromDOM(),this.domSideWheel.removeFromDOM(),this.domPanelPreview.removeFromDOM(),this.wheelItems.forEach((e=>e.active=!1)),this.previewOff=!0}onDialogDropped(e){const t=this.getActiveWheelItem();void 0!==t&&this.handleDockRequest(t.getWheelType(),e)}getActiveWheelItem(){return this.wheelItems.find((e=>!0===e.active))}handleWheelMouseEnter(e){var t;if(!this.activeDialog)return;const{wheelItem:i,event:n}=e;if(this.activeDialog.getPanel()&&this.activeNode){this.removeDOMPreviewDbc.cancel(),null===(t=this.animation)||void 0===t||t.cancel(),this.previewOff&&(this.previewOff=!1,this.originalBounds=k.from(this.activeDialog.getDialogFrameDOM()).getComputedRect(),this.domPanelPreview.css("opacity","").applyRect(this.originalBounds).appendTo(this.dockManager.getContainerElement())),this.domPanelPreview.css("opacity","");let e=this.queryDockingBounds(i);e=this.dockManager.adjustToFullWindowRelative(e),this.animation=gt.animateDockWheelPlaceholder(this.domPanelPreview.get(),e)}}handleWheelMouseLeave(e){this.removeDOMPreviewDbc()}removeDOMPreview(){gt.animateFadeOut(this.domPanelPreview.get()).then((()=>{this.domPanelPreview.removeFromDOM(),this.previewOff=!0}))}queryDockingBounds(e){const t=this.dockManager.getModelContext().model.rootNode;switch(e.getWheelType()){case d.Top:return this.dockManager.getLayoutEngine().getDockBounds(this.activeNode,this.activeDialog.getPanel(),a.Column,!0);case d.Bottom:return this.dockManager.getLayoutEngine().getDockBounds(this.activeNode,this.activeDialog.getPanel(),a.Column,!1);case d.Left:return this.dockManager.getLayoutEngine().getDockBounds(this.activeNode,this.activeDialog.getPanel(),a.Row,!0);case d.Right:return this.dockManager.getLayoutEngine().getDockBounds(this.activeNode,this.activeDialog.getPanel(),a.Row,!1);case d.Fill:return this.dockManager.getLayoutEngine().getDockBounds(this.activeNode,this.activeDialog.getPanel(),a.Fill,!1);case d.SideTop:return this.dockManager.getLayoutEngine().getDockBounds(t,this.activeDialog.getPanel(),a.Column,!0);case d.SideBottom:return this.dockManager.getLayoutEngine().getDockBounds(t,this.activeDialog.getPanel(),a.Column,!1);case d.SideLeft:return this.dockManager.getLayoutEngine().getDockBounds(t,this.activeDialog.getPanel(),a.Row,!0);case d.SideRight:return this.dockManager.getLayoutEngine().getDockBounds(t,this.activeDialog.getPanel(),a.Row,!1)}}handleDockRequest(e,t){if(!this.activeNode)return;const i=this.dockManager.getModelContext().model.rootNode;switch(e){case d.Fill:this.dockManager.dockDialogFill(this.activeNode,this.activeDialog);break;case d.Left:this.dockManager.dockDialogLeft(this.activeNode,this.activeDialog);break;case d.Right:this.dockManager.dockDialogRight(this.activeNode,this.activeDialog);break;case d.Top:this.dockManager.dockDialogUp(this.activeNode,this.activeDialog);break;case d.Bottom:this.dockManager.dockDialogDown(this.activeNode,this.activeDialog);break;case d.SideLeft:this.dockManager.dockDialogLeft(i,this.activeDialog);break;case d.SideRight:this.dockManager.dockDialogRight(i,this.activeDialog);break;case d.SideTop:this.dockManager.dockDialogUp(i,this.activeDialog);break;case d.SideBottom:this.dockManager.dockDialogDown(i,this.activeDialog)}}}class Gt{constructor(e,t,i,n){this.dockManager=e,this.delegate=t,this.topElement=i,this.dragHandle=n,this.eventManager=new f,this.handleMouseDown=this.handleMouseDown.bind(this),this.domEventMouseDown=new v(this.dragHandle),this.domEventMouseDown.bind("mousedown",this.handleMouseDown.bind(this),{capture:!1}),this.dockDragStart=this.delegate.on("onDockingDragStart",(e=>{this.isDragAndDropTriggered=!0,this.lastMousePosition={x:e.pageX,y:e.pageY},this.startDragging(e)})),this.dockDragMove=this.delegate.on("onDockingDragMove",(e=>this.handleMouseMove(e))),this.dockDragStop=this.delegate.on("onDockingDragStop",(e=>this.handleMouseUp(e)))}handleContextMenuAction(e){this.delegate.handleContextMenuAction(e)}updateState(){this.delegate.updateState()}setHeaderVisibility(e){this.delegate.setHeaderVisibility(e)}queryLoadedSize(){return this.delegate.queryLoadedSize()}onQueryContextMenu(e){return this.delegate.onQueryContextMenu(e)}getMinimumChildNodeCount(){return this.delegate.getMinimumChildNodeCount()}getChildContainers(){return this.delegate.getChildContainers()}isHidden(){return this.delegate.isHidden()}setActiveChild(e){return this.delegate.setActiveChild(e)}saveState(e){return this.delegate.saveState(e)}loadState(e){return this.delegate.loadState(e)}removeDecorator(){this.domEventMouseDown.unbind()}handleMouseDown(e){0===e.button&&(this.isDragAndDropTriggered=!1,this.lastMousePosition={x:e.pageX,y:e.pageY},oe.start(e,this.handleMouseMove.bind(this),this.handleMouseUp.bind(this),"pointer",(()=>{}),te.withThreshold))}handleMouseUp(e){this.stopDragging(e)}startDragging(e){this.delegate.isHidden()||this.eventManager.triggerEvent("onDraggableDragStart",e)}stopDragging(e){return u(this,void 0,void 0,(function*(){let[t,i]=this.computeDialogPositionInsideViewport();const n=this.topElement.getBoundingClientRect(),s=this.dockManager.getContentBoundingRect();(Math.abs(n.x-t)>1||Math.abs(n.y-i)>1)&&(yield gt.animateDialogMove(this.topElement,t-s.x,i,(()=>{const t=this.topElement.getBoundingClientRect();this.eventManager.triggerEvent("onDraggableDragMove",{event:e,x:t.x,y:t.y})}))),k.from(this.topElement).left(t).top(i),this.eventManager.triggerEvent("onDraggableDragMove",{event:e,x:t,y:i}),this.eventManager.triggerEvent("onDraggableDragStop",e)}))}handleMouseMove(e){e.preventDefault(),this.isDragAndDropTriggered||(this.isDragAndDropTriggered=!0,this.startDragging(e));let t=e.pageX-this.lastMousePosition.x,i=e.pageY-this.lastMousePosition.y;const n=k.from(this.topElement).getBoundsRect();n.x+=t,n.y+=i,this.eventManager.triggerEvent("onDraggableDragMove",{event:e,x:n.x,y:n.y}),this.lastMousePosition={x:e.pageX,y:e.pageY}}computeDialogPositionInsideViewport(){const e=k.from(this.topElement).getBoundsRect(),t=this.dockManager.getContainerBoundingRect(),i=e.x+e.w/2,n=e.y+e.h/2;let s=e.x,o=e.y;return i<t.left&&(s=t.left-e.w/2),i>t.right&&(s=t.right-e.w/2),e.y<t.top&&(o=t.top-0),n>t.bottom&&(o=t.bottom-e.h/2),[s,o]}dispose(){this.removeDecorator(),this.dockDragStart.unsubscribe(),this.dockDragMove.unsubscribe(),this.dockDragStop.unsubscribe(),this.eventManager.disposeAll()}getDOM(){return this.delegate.getDOM()}hasChanges(){return this.delegate.hasChanges()}setVisible(e){this.delegate.setVisible(e)}getMinWidth(){return this.delegate.getMinWidth()}getMinHeight(){return this.delegate.getMinHeight()}getWidth(){return this.delegate.getWidth()}getHeight(){return this.delegate.getHeight()}performLayout(e,t){this.delegate.performLayout(e,t)}resize(e){this.delegate.resize(e)}getContainerType(){return this.delegate.getContainerType()}on(e,t){return this.isDraggableContainerEvent(e)?this.eventManager.subscribe(e,t):this.delegate.on(e,t)}off(e){this.isDraggableContainerEvent(e)?this.eventManager.unsubscribeAll(e):this.delegate.off(e)}once(e,t){return this.isDraggableContainerEvent(e)?this.eventManager.subscribeOnce(e,t):this.delegate.once(e,t)}isDraggableContainerEvent(e){return!!e.startsWith("onDraggable")}}const Zt=[{handleType:{north:!0,south:!1,east:!1,west:!1},cursor:"n-resize"},{handleType:{north:!1,south:!0,east:!1,west:!1},cursor:"s-resize"},{handleType:{north:!1,south:!1,east:!0,west:!1},cursor:"e-resize"},{handleType:{north:!1,south:!1,east:!1,west:!0},cursor:"w-resize"},{handleType:{north:!0,south:!1,east:!0,west:!1},cursor:"ne-resize"},{handleType:{north:!0,south:!1,east:!1,west:!0},cursor:"nw-resize"},{handleType:{north:!1,south:!0,east:!0,west:!1},cursor:"se-resize"},{handleType:{north:!1,south:!0,east:!1,west:!0},cursor:"sw-resize"}];class Qt extends M{constructor(e){super(),this.handleType=e,this.initializeComponent()}getCursor(){return function(e){const t=Zt.find((t=>e.north()===t.handleType.north&&e.south()===t.handleType.south&&e.east()===t.handleType.east&&e.west()===t.handleType.west));if(void 0===t)throw new Error("ERROR: Mouse Cursor for given handle not found.");return t.cursor}(this)}adjustZIndex(e){this.domHandle.zIndex(e)}north(){return this.handleType.north}south(){return this.handleType.south}east(){return this.handleType.east}west(){return this.handleType.west}onInitialized(){}onDisposed(){}onInitialRender(){return this.domHandle=k.create("div").addClass("DockerTS-ResizeHandle"),this.updateHandleCssClass(),this.bind(this.domHandle.get(),"mousedown",this.handleMouseDown),this.domHandle.get()}onUpdate(e){}handleMouseDown(e){this.triggerEvent("onMouseDown",{event:e,handle:this})}updateHandleCssClass(){this.isCornerHandle()?this.updateCornerHandle():this.updateBorderHandle()}updateBorderHandle(){this.handleType.north?this.domHandle.addClass("ResizeHandler--North"):this.handleType.south?this.domHandle.addClass("ResizeHandler--South"):this.handleType.east?this.domHandle.addClass("ResizeHandler--East"):this.handleType.west&&this.domHandle.addClass("ResizeHandler--West")}updateCornerHandle(){this.handleType.north?this.handleType.east?this.domHandle.addClass("ResizeHandler--NorthEast"):this.handleType.west&&this.domHandle.addClass("ResizeHandler--NorthWest"):this.handleType.south&&(this.handleType.east?this.domHandle.addClass("ResizeHandler--SouthEast"):this.handleType.west&&this.domHandle.addClass("ResizeHandler--SouthWest"))}isCornerHandle(){return this.handleType.north&&this.handleType.east||this.handleType.north&&this.handleType.west||this.handleType.south&&this.handleType.west||this.handleType.south&&this.handleType.east}}class Jt{constructor(e,t,i){this.dockManager=e,this.delegate=t,this.topElement=i,this.resizeHandles=[],this.eventManager=new f,this.dragOverflowGuardX=new ae,this.dragOverflowGuardY=new ae,this.isResizeEnabled=!0,this.checkedX=!1,this.checkedY=!1,this.handleMouseDown=this.handleMouseDown.bind(this),this.buildResizeHandles(),this.subscriptionResizeEnable=this.delegate.on("onEnableResize",(e=>{this.toggleResizeHandles(e)}))}handleContextMenuAction(e){this.delegate.handleContextMenuAction(e)}isHidden(){return this.delegate.isHidden()}setHeaderVisibility(e){this.delegate.setHeaderVisibility(e)}queryLoadedSize(){return this.delegate.queryLoadedSize()}onQueryContextMenu(e){this.delegate.onQueryContextMenu(e)}getMinimumChildNodeCount(){return this.delegate.getMinimumChildNodeCount()}getChildContainers(){return this.delegate.getChildContainers()}setActiveChild(e){this.delegate.setActiveChild(e)}saveState(e){this.delegate.saveState(e)}loadState(e){this.delegate.loadState(e)}performLayout(e,t){this.delegate.performLayout(e,t)}dispose(){this.removeDecorator(),this.eventManager.disposeAll()}removeDecorator(){this.subscriptionResizeEnable.unsubscribe(),this.destroyResizeHandles()}updateState(){this.delegate.updateState(),this.adjustResizeHandleZIndexes()}toggleResizeHandles(e){this.isResizeEnabled!==e&&(this.isResizeEnabled=e,e?this.buildResizeHandles():this.destroyResizeHandles())}buildResizeHandles(){const e=this.dockManager.config.dialogResizeHandleThickness,t=this.dockManager.config.dialogResizeHandleCornerSize;k.from(this.topElement).css("--docker-ts-resize-handle-size",`${e}px`).css("--docker-ts-corner-handle-size",`${t}px`),this.buildResizeHandle({north:!0,south:!1,west:!1,east:!1}),this.buildResizeHandle({north:!1,south:!0,west:!1,east:!1}),this.buildResizeHandle({north:!1,south:!1,west:!0,east:!1}),this.buildResizeHandle({north:!1,south:!1,west:!1,east:!0}),this.buildResizeHandle({north:!0,south:!1,west:!0,east:!1}),this.buildResizeHandle({north:!1,south:!0,west:!0,east:!1}),this.buildResizeHandle({north:!1,south:!0,west:!1,east:!0}),this.adjustResizeHandleZIndexes()}buildResizeHandle(e){const t=new Qt(e);this.topElement.appendChild(t.getDOM()),this.resizeHandles.push(t),t.on("onMouseDown",this.handleMouseDown)}destroyResizeHandles(){for(const e of this.resizeHandles)e.dispose();this.resizeHandles=[]}adjustResizeHandleZIndexes(){}handleMouseDown(e){const{handle:t,event:i}=e;!1!==this.isResizeEnabled?(this.draggedHandle=t,this.lastMousePos={x:i.pageX,y:i.pageY},this.dragOverflowGuardX.reset(),this.dragOverflowGuardY.reset(),oe.start(i,this.handleMouseMove.bind(this),this.handleMouseUp.bind(this),t.getCursor())):se.suppressEvent(i)}handleMouseMove(e){const t=e.pageX-this.lastMousePos.x,i=e.pageY-this.lastMousePos.y;this.performDrag(this.draggedHandle,{x:e.pageX,y:e.pageY},t,i),this.lastMousePos={x:e.pageX,y:e.pageY}}handleMouseUp(e){delete this.lastMousePos,delete this.draggedHandle}performDrag(e,t,i,n){let s=k.from(this.topElement).getBoundsRect();s.w=this.delegate.getWidth(),s.h=this.delegate.getHeight(),this.checkedX=!1,this.checkedY=!1,e.north()&&(s=this.resizeNorth(t,n,s)),e.south()&&(s=this.resizeSouth(t,n,s)),e.west()&&(s=this.resizeWest(t,i,s)),e.east()&&(s=this.resizeEast(t,i,s)),this.eventManager.triggerEvent("onDialogResized",s)}resizeNorth(e,t,i){return this.resizeContainer(e,i,{dx:0,dy:t,dw:0,dh:-t})}resizeSouth(e,t,i){return this.resizeContainer(e,i,{dx:0,dy:0,dw:0,dh:t})}resizeEast(e,t,i){return this.resizeContainer(e,i,{dx:0,dy:0,dw:t,dh:0})}resizeWest(e,t,i){return this.resizeContainer(e,i,{dx:t,dy:0,dw:-t,dh:0})}resizeContainer(e,t,i){return this.constrainByDragOverflows(e,Object.assign({},t),i),this.constrainContainerRect(e,Object.assign({},t),i),t=x.appendDelta(t,i)}constrainByDragOverflows(e,t,i){if(0!==i.dw){const t=this.dragOverflowGuardX.isInDragOverflow(e.x);t===ne.InOverflowState?(i.dw=0,i.dx=0,this.checkedX=!0):t===ne.OverflowStateTerminated&&(this.dragOverflowGuardX.getOverflowDirection()===ie.Decrementing?i.dw=this.dragOverflowGuardX.adjustDeltaAfterOverflow(i.dw,e.x):(i.dx=this.dragOverflowGuardX.adjustDeltaAfterOverflow(i.dx,e.x),i.dw=-i.dx),this.dragOverflowGuardX.reset(),this.checkedX=!0)}if(0!==i.dh){const t=this.dragOverflowGuardY.isInDragOverflow(e.y);t===ne.InOverflowState?(i.dh=0,i.dy=0,this.checkedY=!0):t===ne.OverflowStateTerminated&&(this.dragOverflowGuardY.getOverflowDirection()===ie.Decrementing?i.dh=this.dragOverflowGuardY.adjustDeltaAfterOverflow(i.dh,e.y):(i.dy=this.dragOverflowGuardY.adjustDeltaAfterOverflow(i.dy,e.y),i.dh=-i.dy),this.dragOverflowGuardY.reset(),this.checkedY=!0)}}constrainContainerRect(e,t,i){const n=x.appendDelta(t,i),s=this.delegate.getMinWidth(),o=this.delegate.getMinHeight();if(n.w<s&&!1===this.checkedX){i.dw=s-t.w,0!==i.dx&&(i.dx=-i.dw);const n=e.x>this.lastMousePos.x?ie.Incrementing:ie.Decrementing,o=n===ie.Decrementing?this.lastMousePos.x+i.dw:this.lastMousePos.x+i.dx;this.dragOverflowGuardX.startDragOverflow(o,n)}if(n.h<o&&!1===this.checkedY){i.dh=o-t.h,0!==i.dy&&(i.dy=-i.dh);const n=e.y>this.lastMousePos.y?ie.Incrementing:ie.Decrementing,s=n===ie.Decrementing?this.lastMousePos.y+i.dh:this.lastMousePos.y+i.dy;this.dragOverflowGuardY.startDragOverflow(s,n)}}getDOM(){return this.delegate.getDOM()}hasChanges(){return this.delegate.hasChanges()}setVisible(e){this.delegate.setVisible(e)}getMinWidth(){return this.delegate.getMinWidth()}getMinHeight(){return this.delegate.getMinHeight()}getWidth(){return this.delegate.getWidth()}getHeight(){return this.delegate.getHeight()}resize(e){this.delegate.resize(e)}getContainerType(){return this.delegate.getContainerType()}on(e,t){return!1===this.isInternalEvent(e)?this.delegate.on(e,t):this.eventManager.subscribe(e,t)}off(e){!1===this.isInternalEvent(e)?this.delegate.off(e):this.eventManager.unsubscribeAll(e)}once(e,t){return!1===this.isInternalEvent(e)?this.delegate.once(e,t):this.eventManager.subscribeOnce(e,t)}isInternalEvent(e){return"onDialogResized"===e}}class ei{constructor(e,t){this.dockManager=e,this.panel=t,this.isHidden=!1,this.eventManager=new f,this.handleDragStartEvent=this.handleDragStartEvent.bind(this),this.handleDragMoveEvent=this.handleDragMoveEvent.bind(this),this.handleDragEndEvent=this.handleDragEndEvent.bind(this),this.initialize(),this.dockManager.getModelContext().appendDialog(this),this.panel.setHeaderVisibility(!0),this.dockManager.notifyOnCreateDialog(this)}on(e,t){return this.eventManager.subscribe(e,t)}off(e){this.eventManager.unsubscribeAll(e)}once(e,t){return this.eventManager.subscribeOnce(e,t)}getDialogFrameDOM(){return this.domDialog.get()}initialize(){this.domDialog=k.create("div").attr("tabIndex","-1").addClass("DockerTS-Dialog"),this.draggable=new Gt(this.dockManager,this.panel,this.domDialog.get(),this.panel.getHeaderElement()),this.resizable=new Jt(this.dockManager,this.draggable,this.domDialog.get()),this.domDialog.appendTo(this.dockManager.getContainerElement()),this.mouseDownEvent=new v(this.domDialog.get()),this.mouseDownEvent.bind("mousedown",this.handleMouseDown.bind(this),{capture:!1}),this.subOnFocused=this.panel.on("onFocused",this.handleOnFocus.bind(this)),this.subOnExpanded=this.panel.on("onExpanded",this.handleOnExpand.bind(this)),this.subOnCollapsed=this.panel.on("onCollapsed",this.handleOnCollapse.bind(this)),this.subOnClosed=this.panel.on("onClose",this.handleOnClose.bind(this)),this.draggable.on("onDraggableDragStart",this.handleDragStartEvent),this.draggable.on("onDraggableDragMove",this.handleDragMoveEvent),this.draggable.on("onDraggableDragStop",this.handleDragEndEvent),this.resizable.on("onDialogResized",this.handleResizeEvent.bind(this)),this.assignNewZIndex(),this.dockManager.setActivePanel(this.panel)}handleDragStartEvent(e){const t=this.dockManager.config.zIndexes.zIndexWheel;k.from(this.getDialogFrameDOM()).zIndex(t),this.adjustDialogDraggingPosition(e),this.panel.updateState(),this.panel.onDraggingStarted(),this.eventManager.triggerEvent("onDragStart",{sender:this,event:e})}handleDragMoveEvent(e){this.setPosition(e.x,e.y),this.eventManager.triggerEvent("onDragMove",{sender:this,event:e.event})}handleDragEndEvent(e){k.from(this.getDialogFrameDOM()).zIndex(this.lastDialogZIndex),this.panel.updateState(),this.panel.onDraggingEnded(),this.eventManager.triggerEvent("onDragStop",{sender:this,event:e})}adjustDialogDraggingPosition(e){const t=k.from(this.getDialogFrameDOM()).getBoundsRect();if(e.pageX>t.x+.75*t.w){const i=e.pageX-.75*t.w,n=this.getPosition();this.setPosition(i,n.y)}}getZIndex(){return this.domDialog.getZIndex()}getPanel(){return this.panel}getPosition(){var e,t,i,n;return{x:null!==(t=null===(e=this.position)||void 0===e?void 0:e.x)&&void 0!==t?t:0,y:null!==(n=null===(i=this.position)||void 0===i?void 0:i.y)&&void 0!==n?n:0}}setPosition(e,t){const i=this.dockManager.getContentBoundingRect();this.position={x:e-i.x,y:t-i.y},this.domDialog.left(this.position.x).top(this.position.y),this.panel.updateState(),this.dockManager.notifyOnChangeDialogPosition(this,e,t)}resize(e){e=this.dockManager.adjustToFullWindowRelative(e),this.domDialog.left(e.x).top(e.y).width(e.w).height(e.h),this.dockManager.notifyOnChangeDialogPosition(this,e.x,e.y)}show(){this.domDialog.css("display",""),this.isHidden&&(this.isHidden=!1,this.dockManager.notifyOnShowDialog(this))}hide(){this.domDialog.css("display","none"),this.isHidden||(this.isHidden=!0,this.dockManager.notifyOnHideDialog(this))}destroy(){this.mouseDownEvent.unbind(),this.eventManager.disposeAll(),this.subOnClosed.unsubscribe(),this.subOnCollapsed.unsubscribe(),this.subOnExpanded.unsubscribe(),this.subOnFocused.unsubscribe(),this.domDialog.removeFromDOM(),this.draggable.dispose(),this.resizable.dispose(),this.dockManager.getModelContext().removeDialog(this)}bringToFront(){this.dockManager.isToplevelDialog(this)||(this.dockManager.moveDialogToTop(this),this.assignNewZIndex(),this.dockManager.setActivePanel(this.panel))}assignNewZIndex(){const e=this.dockManager.genNextDialogZIndex();this.lastDialogZIndex=e+2,this.domDialog.zIndex(e+2),this.panel.updateState(),this.resizable.updateState()}handleResizeEvent(e){this.resize(e)}handleOnFocus(){this.bringToFront(),this.dockManager.setActivePanel(this.panel)}handleMouseDown(e){this.bringToFront()}handleOnCollapse(){this.lastExpanedSize=this.domDialog.getHeight();const e=this.panel.getHeaderElement().getBoundingClientRect();this.domDialog.height(e.height)}handleOnExpand(){this.domDialog.height(this.lastExpanedSize)}handleOnClose(){this.destroy()}}class ti extends yt{constructor(e){super(e,r.Top),k.from(this.getDOM()).addClass("DockerTS-DocumentManager")}getMinimumChildNodeCount(){return 0}}class ii{constructor(){this._dialogs=[],this._collapsers=[]}existsDockNodeInModel(e){const t=[this._rootNode];for(;t.length>0;){const i=t.shift();if(i===e)return!0;i.childNodes.forEach((e=>t.push(e)))}return!1}setRootNode(e){this._rootNode=e}setDocumentManagerNode(e){this._documentManagerNode=e}isLastDialog(e){return he.lastElement(this._dialogs)===e}moveDialogToEnd(e){he.removeItem(this._dialogs,e),this._dialogs.push(e)}get rootNode(){return this._rootNode}get dialogs(){return this._dialogs}get collapsers(){return this._collapsers}get documentManagerNode(){return this._documentManagerNode}}class ni{constructor(e){this.dockManager=e,this._model=new ii,this._documentManagerView=new ti(this.dockManager)}setModel(e){this._model=e}get model(){return this._model}get documentManagerView(){return this._documentManagerView}appendDialog(e){this._model.dialogs.push(e)}removeDialog(e){he.removeItem(this._model.dialogs,e)}appendCollapser(e){this._model.collapsers.push(e)}removeCollapser(e){he.removeItem(this._model.collapsers,e)}}class si{constructor(e){this.name=e,this.instances=[]}queryInstances(){return[...this.instances]}getPanelTypeName(){return this.name}containsInstances(){return this.instances.length>0}containsViewInstance(e){return this.instances.includes(e)}addViewInstance(e){!1===this.containsViewInstance(e)&&this.instances.push(e)}removeViewInstance(e){const t=this.instances.indexOf(e);t>=0&&this.instances.splice(t,1)}}class oi{constructor(){this.panelTypes=[],this.instanceRegistries=[]}registerPanelType(e){if(this.isPanelTypeRegistered(e.name))throw new Error(`ERROR: Panel type ${e.name} is already registered.`);this.panelTypes.push(e),this.instanceRegistries.push(new si(e.name))}isPanelTypeRegistered(e){return void 0!==this.getPanelTypeMetadata(e)}getPanelTypeMetadata(e){return this.panelTypes.find((t=>t.name===e))}hasPanelTypeAnyInstances(e){return this.getRegistryByPanelTypeName(e).containsInstances()}registerViewInstance(e,t){this.getRegistryByPanelTypeName(e).addViewInstance(t)}unregisterViewInstance(e){for(const t of this.instanceRegistries)if(t.containsViewInstance(e)){t.removeViewInstance(e);break}}getViewInstances(e){return this.getRegistryByPanelTypeName(e).queryInstances()}getRegistryByPanelTypeName(e){return this.instanceRegistries.find((t=>t.getPanelTypeName()===e))}}class ai{constructor(e={}){this.options=e}getValue(e,t){return void 0===this.options[e]?t:this.options[e]}}const ri={enableLiveResize:!0,enableCollapsers:!0,collapserMarginSize:26,collapserHorizontalSlidingRatio:.3,collapserVerticalSlidingRatio:.4,collapserMaxHorizontalNonSlidingDim:300,collapserMaxVerticalNonSlidingDim:800,labels:{collapseLabel:"Collapse Panel",expandLabel:"Expand Panel",closeLabel:"Close Panel",closeAllLabel:"Close All",closeOthersLabel:"Close Others",minimizeLabel:"Minimize Panel",maximizeLabel:"Maximize Panel",restoreLabel:"Restore Panel"},minimumDefaultWidth:400,minimumDefaultHeight:200,defaultPanelSizeMagnitude:1.5,minimizedWindowWidth:250,minimizedWindowHeight:24,dialogResizeHandleThickness:10,dialogResizeHandleCornerSize:10,sideWheelMargin:40,tabStripScrollOffset:85,defaultPanelLabel:"Untitled",defaultMinWidth:150,defaultMinHeight:50,dragAndDropFrameRate:120,zIndexes:{zIndexCounter:1001,zIndexDialogCounter:10001,zIndexTabHost:1e3,zIndexTabHandle:100,zIndexWheel:999999,zIndexWheelItem:1000003,zIndexMaximizedPanel:1e6,zIndexContextMenu:1000001,zIndexDragAndDropBlocker:1000002,zIndexTabReorderOperation:999999}};class hi{constructor(e){this.name=e,this.eventManager=new f}getChannelName(){return this.name}notify(e,t){this.eventManager.triggerEvent(e,t)}subscribe(e,t){return this.eventManager.subscribe(e,t)}subscribeOnce(e,t){return this.eventManager.subscribeOnce(e,t)}unsubscribeAll(e){this.eventManager.unsubscribeAll(e)}}class di{constructor(){this.channels=[]}getChannel(e){void 0===e&&(e="__DEFAULT_CHANNEL__");let t=this.lookupChannel(e);return void 0===t&&(t=new hi(e),this.channels.push(t)),t}lookupChannel(e){return this.channels.find((t=>t.getChannelName()===e))}}class li extends Yt{constructor(e,t,i){super(e,t,i),this.tabbedApi=i,this.childContainers=[]}getChildContainers(){return[...this.childContainers]}addContainer(e){this.childContainers.push(e),this.tabHost.performLayout(this.childContainers,!1),this.updateState(),e.enableDefaultContextMenu(!1),this.updateChildContainerZIndexes(),e.on("onFocused",(()=>{this.triggerEvent("onFocused")}))}removeContainer(e){e.off("onFocused"),he.removeItem(this.childContainers,e),this.tabHost.performLayout(this.childContainers,!1),e.enableDefaultContextMenu(!0),this.updateState()}onInitialized(){super.onInitialized(),this.createTabHostElement(r.Left)}onInitialRender(){const e=super.onInitialRender();return this.injectTabHostIntoDOM(),e}onDisposed(){super.onDisposed(),this.tabHost.dispose()}createTabHostElement(e){this.tabHost=new bt(this.getDockManager(),e),this.tabHost.setEnableUndock(!1),this.tabHost.setEnableMaximization(!1),this.tabHost.setEnableTabReordering(!1),this.tabHost.setEnableFrameHeaderVisibility(!1)}injectTabHostIntoDOM(){const e=this.tabHost.getDOM();k.from(e).height("100%"),this.setContentElement(e)}setTabOrientation(e){this.tabHost.getTabOrientation()!==e&&(this.tabHost.dispose(),this.createTabHostElement(e),this.tabHost.performLayout(this.childContainers,!1),this.injectTabHostIntoDOM(),this.updateState())}setVisible(e){super.setVisible(e),!1===e?this.childContainers.forEach((e=>e.setVisible(!1))):this.tabHost.getSelectedTab().getContainer().setVisible(!0)}updateState(){var e;super.updateState(),this.tabHost.updateContainerState(),this.tabHost.updateLayoutState(),this.updateChildContainerZIndexes(),null===(e=this.childContainers)||void 0===e||e.forEach((e=>e.updateState())),this.overrideFocusedState()}setActiveChild(e){this.updateState(),this.tabHost.focusActiveTab(e)}getMinWidth(){return this.tabHost.getMinWidth()}getMinHeight(){return this.tabHost.getMinHeight()}performLayout(e,t){this.tabHost.performLayout(this.childContainers,t)}close(){const e=Object.create(null,{close:{get:()=>super.close}});return u(this,void 0,void 0,(function*(){var t,i,n;const s=null===(n=yield null===(i=(t=this.getAPI()).canClose)||void 0===i?void 0:i.call(t))||void 0===n||n;if(s){for(const e of this.childContainers)yield e.performClose();yield e.close.call(this)}return s}))}resize(e){}onDraggingStarted(){super.onDraggingStarted(),this.childContainers.forEach((e=>e.onDraggingStarted()))}onDraggingEnded(){super.onDraggingEnded(),this.childContainers.forEach((e=>e.onDraggingEnded()))}updateChildContainerZIndexes(){var e;let t=this.getContentFrameDOM().getZIndex();isNaN(t)&&(t=1),null===(e=this.childContainers)||void 0===e||e.forEach((e=>{e.getContentFrameDOM().zIndex(t+1)}))}overrideFocusedState(){var e,t;const i=(null===(e=this.tabHost.getSelectedTab())||void 0===e?void 0:e.getSelectionState())===n.Focused,s=this.getFrameHeaderDOM();this.dockManager.getActivePanel()===this||i?(s.addClass("DockerTS-FrameHeader--Selected"),null===(t=this.tabHost.getSelectedTab())||void 0===t||t.setSelectionState(n.Focused),this.triggerEvent("onFocused")):s.removeClass("DockerTS-FrameHeader--Selected")}}class ci extends Mt{constructor(e){super(e),this.tabbedPanelContainer=e}setTabOrientation(e){const t=this.convertTabOrientation(e);this.tabbedPanelContainer.setTabOrientation(t)}convertTabOrientation(e){switch(e){case"top":return r.Top;case"bottom":return r.Bottom;case"left":return r.Left;case"right":return r.Right}}}class ui extends M{constructor(e,t){if(super(),this.dockManager=e,this.collapseKind=t,this.collapseKind===o.Up||this.collapseKind===o.Fill)throw new Error("Invalid collapseKind value");this.initializeComponent()}onInitialized(){}onDisposed(){}onInitialRender(){return this.domRoot=k.create("div").applyClasses({"DockerTS-CollapserMargin":!0,"DockerTS-CollapserMargin--Left":this.collapseKind===o.Left,"DockerTS-CollapserMargin--Right":this.collapseKind===o.Right,"DockerTS-CollapserMargin--Down":this.collapseKind===o.Down}).hide(),this.domRoot.get()}onUpdate(e){}getMarginKind(){return this.collapseKind}appendHeader(e){!1===this.containsMarginAnyHeader()&&this.show(),this.domRoot.appendChild(e)}removeHeader(e){e.remove(),!1===this.containsMarginAnyHeader()&&this.hide()}show(){return u(this,void 0,void 0,(function*(){this.domRoot.show();const e=this.dockManager.config.collapserMarginSize;yield this.animateCollapserMargin(e)}))}hide(){return u(this,void 0,void 0,(function*(){yield this.animateCollapserMargin(0),this.domRoot.hide()}))}containsMarginAnyHeader(){return this.domRoot.get().childElementCount>0}animateCollapserMargin(e){return u(this,void 0,void 0,(function*(){const t=this.dockManager.getContainerElement(),i=this.getAnimationProperty();yield gt.animateCollapserMargin(t,i,e)}))}getAnimationProperty(){switch(this.collapseKind){case o.Left:return"left";case o.Right:return"right";case o.Down:return"bottom"}}}function gi(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function pi(e){return e}var mi=Math.max;var fi="[object AsyncFunction]",vi="[object Function]",Ci="[object GeneratorFunction]",bi="[object Proxy]";function yi(e){if(!T(e))return!1;var t=W(e);return t==vi||t==Ci||t==fi||t==bi}var Si,Mi=z["__core-js_shared__"],wi=(Si=/[^.]+$/.exec(Mi&&Mi.keys&&Mi.keys.IE_PROTO||""))?"Symbol(src)_1."+Si:"";var Di=Function.prototype.toString;var xi=/^\[object .+?Constructor\]$/,ki=Function.prototype,Ti=Object.prototype,Ri=ki.toString,Oi=Ti.hasOwnProperty,zi=RegExp("^"+Ri.call(Oi).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pi(e){return!(!T(e)||(t=e,wi&&wi in t))&&(yi(e)?zi:xi).test(function(e){if(null!=e){try{return Di.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function Ei(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return Pi(i)?i:void 0}var Hi=function(){try{var e=Ei(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ii=Hi?function(e,t){return Hi(e,"toString",{configurable:!0,enumerable:!1,value:(i=t,function(){return i}),writable:!0});var i}:pi,Bi=Date.now;var Fi,Ai,Li,Ni=(Fi=Ii,Ai=0,Li=0,function(){var e=Bi(),t=16-(e-Li);if(Li=e,t>0){if(++Ai>=800)return arguments[0]}else Ai=0;return Fi.apply(void 0,arguments)});function _i(e,t){return Ni(function(e,t,i){return t=mi(void 0===t?e.length-1:t,0),function(){for(var n=arguments,s=-1,o=mi(n.length-t,0),a=Array(o);++s<o;)a[s]=n[t+s];s=-1;for(var r=Array(t+1);++s<t;)r[s]=n[s];return r[t]=i(a),gi(e,this,r)}}(e,t,pi),e+"")}function Wi(e,t){return e===t||e!=e&&t!=t}function Ui(e,t){for(var i=e.length;i--;)if(Wi(e[i][0],t))return i;return-1}var Vi=Array.prototype.splice;function ji(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}ji.prototype.clear=function(){this.__data__=[],this.size=0},ji.prototype.delete=function(e){var t=this.__data__,i=Ui(t,e);return!(i<0)&&(i==t.length-1?t.pop():Vi.call(t,i,1),--this.size,!0)},ji.prototype.get=function(e){var t=this.__data__,i=Ui(t,e);return i<0?void 0:t[i][1]},ji.prototype.has=function(e){return Ui(this.__data__,e)>-1},ji.prototype.set=function(e,t){var i=this.__data__,n=Ui(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this};var qi=Ei(z,"Map"),Xi=Ei(Object,"create");var Yi=Object.prototype.hasOwnProperty;var Ki=Object.prototype.hasOwnProperty;function $i(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Gi(e,t){var i,n,s=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?s["string"==typeof t?"string":"hash"]:s.map}function Zi(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}$i.prototype.clear=function(){this.__data__=Xi?Xi(null):{},this.size=0},$i.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},$i.prototype.get=function(e){var t=this.__data__;if(Xi){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return Yi.call(t,e)?t[e]:void 0},$i.prototype.has=function(e){var t=this.__data__;return Xi?void 0!==t[e]:Ki.call(t,e)},$i.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Xi&&void 0===t?"__lodash_hash_undefined__":t,this},Zi.prototype.clear=function(){this.size=0,this.__data__={hash:new $i,map:new(qi||ji),string:new $i}},Zi.prototype.delete=function(e){var t=Gi(this,e).delete(e);return this.size-=t?1:0,t},Zi.prototype.get=function(e){return Gi(this,e).get(e)},Zi.prototype.has=function(e){return Gi(this,e).has(e)},Zi.prototype.set=function(e,t){var i=Gi(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this};function Qi(e){var t=this.__data__=new ji(e);this.size=t.size}function Ji(e,t,i){"__proto__"==t&&Hi?Hi(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function en(e,t,i){(void 0!==i&&!Wi(e[t],i)||void 0===i&&!(t in e))&&Ji(e,t,i)}Qi.prototype.clear=function(){this.__data__=new ji,this.size=0},Qi.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Qi.prototype.get=function(e){return this.__data__.get(e)},Qi.prototype.has=function(e){return this.__data__.has(e)},Qi.prototype.set=function(e,t){var i=this.__data__;if(i instanceof ji){var n=i.__data__;if(!qi||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Zi(n)}return i.set(e,t),this.size=i.size,this};var tn=function(e,t,i){for(var n=-1,s=Object(e),o=i(e),a=o.length;a--;){var r=o[++n];if(!1===t(s[r],r,s))break}return e},nn="object"==typeof exports&&exports&&!exports.nodeType&&exports,sn=nn&&"object"==typeof module&&module&&!module.nodeType&&module,on=sn&&sn.exports===nn?z.Buffer:void 0;on&&on.allocUnsafe;var an=z.Uint8Array;function rn(e,t){var i,n,s=(i=e.buffer,n=new i.constructor(i.byteLength),new an(n).set(new an(i)),n);return new e.constructor(s,e.byteOffset,e.length)}var hn=Object.create,dn=function(){function e(){}return function(t){if(!T(t))return{};if(hn)return hn(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();var ln=function(e,t){return function(i){return e(t(i))}}(Object.getPrototypeOf,Object),cn=Object.prototype;function un(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||cn)}function gn(e){return U(e)&&"[object Arguments]"==W(e)}var pn=Object.prototype,mn=pn.hasOwnProperty,fn=pn.propertyIsEnumerable,vn=gn(function(){return arguments}())?gn:function(e){return U(e)&&mn.call(e,"callee")&&!fn.call(e,"callee")},Cn=Array.isArray,bn=9007199254740991;function yn(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=bn}function Sn(e){return null!=e&&yn(e.length)&&!yi(e)}var Mn="object"==typeof exports&&exports&&!exports.nodeType&&exports,wn=Mn&&"object"==typeof module&&module&&!module.nodeType&&module,Dn=wn&&wn.exports===Mn?z.Buffer:void 0,xn=(Dn?Dn.isBuffer:void 0)||function(){return!1},kn="[object Object]",Tn=Function.prototype,Rn=Object.prototype,On=Tn.toString,zn=Rn.hasOwnProperty,Pn=On.call(Object);var En={};En["[object Float32Array]"]=En["[object Float64Array]"]=En["[object Int8Array]"]=En["[object Int16Array]"]=En["[object Int32Array]"]=En["[object Uint8Array]"]=En["[object Uint8ClampedArray]"]=En["[object Uint16Array]"]=En["[object Uint32Array]"]=!0,En["[object Arguments]"]=En["[object Array]"]=En["[object ArrayBuffer]"]=En["[object Boolean]"]=En["[object DataView]"]=En["[object Date]"]=En["[object Error]"]=En["[object Function]"]=En["[object Map]"]=En["[object Number]"]=En["[object Object]"]=En["[object RegExp]"]=En["[object Set]"]=En["[object String]"]=En["[object WeakMap]"]=!1;var Hn="object"==typeof exports&&exports&&!exports.nodeType&&exports,In=Hn&&"object"==typeof module&&module&&!module.nodeType&&module,Bn=In&&In.exports===Hn&&R.process,Fn=function(){try{return Bn&&Bn.binding&&Bn.binding("util")}catch(e){}}(),An=Fn&&Fn.isTypedArray,Ln=An?function(e){return function(t){return e(t)}}(An):function(e){return U(e)&&yn(e.length)&&!!En[W(e)]};function Nn(e,t){return"__proto__"==t?void 0:e[t]}var _n=Object.prototype.hasOwnProperty;function Wn(e,t,i){var n=e[t];_n.call(e,t)&&Wi(n,i)&&(void 0!==i||t in e)||Ji(e,t,i)}var Un=9007199254740991,Vn=/^(?:0|[1-9]\d*)$/;function jn(e,t){var i=typeof e;return!!(t=null==t?Un:t)&&("number"==i||"symbol"!=i&&Vn.test(e))&&e>-1&&e%1==0&&e<t}function qn(e,t){var i=Cn(e),n=!i&&vn(e),s=!i&&!n&&xn(e),o=!i&&!n&&!s&&Ln(e),a=i||n||s||o,r=a?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],h=r.length;for(var d in e)a&&("length"==d||s&&("offset"==d||"parent"==d)||o&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||jn(d,h))||r.push(d);return r}var Xn=Object.prototype.hasOwnProperty;function Yn(e){if(!T(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=un(e),i=[];for(var n in e)("constructor"!=n||!t&&Xn.call(e,n))&&i.push(n);return i}function Kn(e){return Sn(e)?qn(e):Yn(e)}function $n(e){return function(e,t,i,n){var s=!i;i||(i={});for(var o=-1,a=t.length;++o<a;){var r=t[o],h=void 0;void 0===h&&(h=e[r]),s?Ji(i,r,h):Wn(i,r,h)}return i}(e,Kn(e))}function Gn(e,t,i,n,s,o,a){var r=Nn(e,i),h=Nn(t,i),d=a.get(h);if(d)en(e,i,d);else{var l,c=o?o(r,h,i+"",e,t,a):void 0,u=void 0===c;if(u){var g=Cn(h),p=!g&&xn(h),m=!g&&!p&&Ln(h);c=h,g||p||m?Cn(r)?c=r:U(l=r)&&Sn(l)?c=function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}(r):p?(u=!1,c=h.slice()):m?(u=!1,c=rn(h)):c=[]:function(e){if(!U(e)||W(e)!=kn)return!1;var t=ln(e);if(null===t)return!0;var i=zn.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&On.call(i)==Pn}(h)||vn(h)?(c=r,vn(r)?c=$n(r):(!T(r)||n&&yi(r))&&(c=function(e){return"function"!=typeof e.constructor||un(e)?{}:dn(ln(e))}(h))):u=!1}u&&(a.set(h,c),s(c,h,n,o,a),a.delete(h)),en(e,i,c)}}function Zn(e,t,i,n,s){e!==t&&tn(t,(function(o,a){if(T(o))s||(s=new Qi),Gn(e,t,a,i,Zn,n,s);else{var r=n?n(Nn(e,a),o,a+"",e,t,s):void 0;void 0===r&&(r=o),en(e,a,r)}}),Kn)}function Qn(e,t,i,n,s,o){return T(e)&&T(t)&&(o.set(t,e),Zn(e,t,void 0,Qn,o),o.delete(t)),e}var Jn,es=(Jn=function(e,t,i,n){Zn(e,t,i,n)},_i((function(e,t){var i=-1,n=t.length,s=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(s=Jn.length>3&&"function"==typeof s?(n--,s):void 0,o&&function(e,t,i){if(!T(i))return!1;var n=typeof t;return!!("number"==n?Sn(i)&&jn(t,i.length):"string"==n&&t in i)&&Wi(i[t],e)}(t[0],t[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++i<n;){var a=t[i];a&&Jn(e,a,i,s)}return e}))),ts=_i((function(e){return e.push(void 0,Qn),gi(es,void 0,e)}));class is{static defaultsDeep(...e){return ts(...e)}}class ns{constructor(e,t={}){if(this.container=e,this._config=t,this.defaultDialogPosition={x:0,y:0},this.lastMinimizedSlotId=0,this.minimizedSlots=[],this.collapserMargins=[],this._config=is.defaultsDeep({},ri,this._config),k.from(this.container).css("position","relative").css("display","grid").css("overflow","hidden").cacheBounds(!1),!1===this.config.enableCollapsers)this.dockContentContainer=k.from(this.container);else{this.dockContentContainer=k.create("div").css("position","absolute").css("display","grid").left(0).top(0).right(0).bottom(0).css("overflow","visible").cacheBounds(!1).addClass("DockerTS-DockContent").appendTo(this.container),k.from(this.container).addClass("DockerTS-DockContainer"),this.collapserMargins.push(new ui(this,o.Left)),this.collapserMargins.push(new ui(this,o.Right)),this.collapserMargins.push(new ui(this,o.Down)),this.collapserMargins.forEach((e=>this.container.appendChild(e.getDOM())));const e=this.config.collapserMarginSize;this.container.style.setProperty("--docker-ts-margin-thickness",`${e}px`)}this.handleContainerResized=se.throttle(this.handleContainerResized.bind(this),1e3/(2*this.config.dragAndDropFrameRate),{leading:!0,trailing:!0}),oe.initialize(this.config.zIndexes.zIndexDragAndDropBlocker,this.config.dragAndDropFrameRate)}initialize(){this.context=new ni(this);const e=new g(this.context.documentManagerView);this.context.model.setRootNode(e),this.context.model.setDocumentManagerNode(e),this.setRootNode(this.context.model.rootNode),this.eventManager=new f,this.channelManager=new di,this.dockWheel=new $t(this),this.layoutEngine=new St(this),this.panelTypeRegistry=new oi,this.resizeObserver=new ResizeObserver((()=>{this.handleContainerResized()})),k.from(this.container).css("overflow","hidden"),this.resizeObserver.observe(this.container,{box:"border-box"}),this.lastZIndex=this.config.zIndexes.zIndexCounter,this.lastDialogZIndex=this.config.zIndexes.zIndexDialogCounter,this.rebuildLayout(this.context.model.rootNode),this.invalidate()}get config(){return this._config}getCollapserMargin(e){return this.collapserMargins.find((t=>t.getMarginKind()===e))}getContainerBoundingRect(){return this.container.getBoundingClientRect()}getRelativeFullWindowRect(){const e=this.dockContentContainer.getLeft(),t=this.dockContentContainer.getRight(),i=this.dockContentContainer.getBottom();return{x:-e,y:0,w:this.dockContentContainer.getWidth()+e+t,h:this.dockContentContainer.getHeight()+i}}getContentBoundingRect(){return this.dockContentContainer.getBoundsRect()}adjustToFullWindowRelative(e){const t=this.dockContentContainer.getLeft();return this.dockContentContainer.getRight(),{x:e.x-t,y:e.y,w:e.w,h:e.h}}getContainerElement(){return this.dockContentContainer.get()}getModelContext(){return this.context}genNextZIndex(){return this.lastZIndex++}genNextDialogZIndex(){return this.lastDialogZIndex+=4}getWheelZIndex(){return this.config.zIndexes.zIndexWheel}getDocumentNode(){return this.context.model.documentManagerNode}getChannel(e){return this.channelManager.getChannel(e)}getLayoutEngine(){return this.layoutEngine}gainPanelApiContract(e){if(!1===this.panelTypeRegistry.isPanelTypeRegistered(e))throw new Error(`ERROR: Panel Type with name ${e} is not registered.`);return this.panelTypeRegistry.getPanelTypeMetadata(e).factoryFn(this)}registerPanelType(e,t,i){if(!0===this.panelTypeRegistry.isPanelTypeRegistered(e))throw new Error(`ERROR: Panel Type with name ${e} is ALREADY not registered.`);this.panelTypeRegistry.registerPanelType({name:e,instanceType:t,factoryFn:i})}registerTabbedPanelType(e,t,i){if(!0===this.panelTypeRegistry.isPanelTypeRegistered(e))throw new Error(`ERROR: Panel Type with name ${e} is ALREADY not registered.`);this.panelTypeRegistry.registerPanelType({name:e,instanceType:t,factoryFn:i})}createPanel(e,t={}){const i=this.createPanelInternal(e,t),n=this.gainPanelApiContract(e),s=new ai(t),o=new Mt(i);return n.initialize(o,s).then((e=>{i.setContentElement(e)})),i}createPanelAsync(e){return u(this,arguments,void 0,(function*(e,t={}){const i=this.createPanelInternal(e,t),n=this.gainPanelApiContract(e),s=new ai(t),o=new Mt(i),a=yield n.initialize(o,s);return i.setContentElement(a),i}))}createTabbedPanel(e,t={}){const i=this.createTabbedPanelInternal(e,t),n=this.gainPanelApiContract(e),s=new ai(t),o=new ci(i);return n.initialize(o,s),i}createTabbedPanelAsync(e){return u(this,arguments,void 0,(function*(e,t={}){const i=this.createTabbedPanelInternal(e,t),n=this.gainPanelApiContract(e),s=new ai(t),o=new ci(i);return yield n.initialize(o,s),i}))}createPanelInternal(e,t={}){if(!1===this.panelTypeRegistry.isPanelTypeRegistered(e))throw new Error(`ERROR: Panel Type with name ${e} is not registered.`);const i=this.panelTypeRegistry.getPanelTypeMetadata(e);if("singleton"===i.instanceType&&this.panelTypeRegistry.hasPanelTypeAnyInstances(e))return this.panelTypeRegistry.getViewInstances(e)[0];const n=i.factoryFn(this);return new Yt(this,e,n)}createTabbedPanelInternal(e,t={}){if(!1===this.panelTypeRegistry.isPanelTypeRegistered(e))throw new Error(`ERROR: Panel Type with name ${e} is not registered.`);const i=this.panelTypeRegistry.getPanelTypeMetadata(e);if("singleton"===i.instanceType&&this.panelTypeRegistry.hasPanelTypeAnyInstances(e))return this.panelTypeRegistry.getViewInstances(e)[0];const n=i.factoryFn(this);return new li(this,e,n)}dockLeft(e,t,i){return this.requestDockContainer(e,t,((e,t)=>{this.layoutEngine.dockLeft(e,t)}),!1,i)}dockRight(e,t,i){return this.requestDockContainer(e,t,((e,t)=>{this.layoutEngine.dockRight(e,t)}),!0,i)}dockUp(e,t,i){return this.requestDockContainer(e,t,((e,t)=>{this.layoutEngine.dockUp(e,t)}),!1,i)}dockDown(e,t,i){return this.requestDockContainer(e,t,((e,t)=>{this.layoutEngine.dockDown(e,t)}),!0,i)}dockFill(e,t){return this.requestDockContainer(e,t,((e,t)=>{this.layoutEngine.dockFill(e,t)}),!1)}dockDialogLeft(e,t){this.requestDockDialog(e,t,((e,t)=>{this.layoutEngine.dockLeft(e,t)}),.5,!1)}dockDialogRight(e,t){this.requestDockDialog(e,t,((e,t)=>{this.layoutEngine.dockRight(e,t)}),.5,!0)}dockDialogUp(e,t){this.requestDockDialog(e,t,((e,t)=>{this.layoutEngine.dockUp(e,t)}),.5,!0)}dockDialogDown(e,t){this.requestDockDialog(e,t,((e,t)=>{this.layoutEngine.dockDown(e,t)}),.5,!0)}dockDialogFill(e,t){this.requestDockDialog(e,t,((e,t)=>{this.layoutEngine.dockFill(e,t)}),1,!1)}floatDialog(e,t){const i=new ei(this,e);return i.setPosition(t.x,t.y),i.resize(t),this.bindDialogDragEvents(i),i}queryDockInformationForContainer(e){const t=this.findNodeFromContainer(e);return this.layoutEngine.queryDockInformation(t)}queryDockInformationForNode(e){return this.layoutEngine.queryDockInformation(e)}existsDockNodeInModel(e){return this.context.model.existsDockNodeInModel(e)}isInsideDocumentManager(e){const t=this.findNodeFromContainer(e);return null!==t&&t.parent===this.getDocumentNode()}requestMinimizeSlot(){const e=this.lastMinimizedSlotId++;return this.minimizedSlots.unshift(e),this.recomputeMinimizedSlotsCSS(),e}releaseMinimizeSlot(e){const t=this.minimizedSlots.indexOf(e);t>=0&&(this.minimizedSlots.splice(t,1),this.recomputeMinimizedSlotsCSS(),this.updateState())}getNextFreeMinimizedSlotRect(){const e=this.getContentBoundingRect(),t=this.config.minimizedWindowWidth,i=this.config.minimizedWindowHeight;return{x:e.x+e.w-t*(this.minimizedSlots.length+1),y:e.y+e.h-i,w:t,h:i}}isToplevelDialog(e){return this.context.model.isLastDialog(e)}moveDialogToTop(e){this.context.model.moveDialogToEnd(e)}recomputeMinimizedSlotsCSS(){const e=this.config.minimizedWindowWidth;this.dockContentContainer.css("--docker-ts-minimized-width",e.toFixed(0)+"px");let t=0;for(let i=this.minimizedSlots.length-1;i>=0;i--){const n=this.minimizedSlots[i],s=this.getSlotCSSPropertyName(n);this.dockContentContainer.css(s,t.toFixed(0)+"px"),t+=e}}getSlotCSSPropertyName(e){return`--docker-ts-slot-${e}`}requestDockContainer(e,t,i,n,s){const o=new g(t);if(t.getContainerType()===h.Panel){const e=t;e.prepareForDocking(),e.getDOM().remove()}let a,r=null;if(e.parent&&e.parent.container&&(a=e.parent.container,r=a.getRatios()),i(e,o),s&&o.parent&&(o.parent.container.getContainerType()===h.ColumnLayout||o.parent.container.getContainerType()===h.RowLayout)){const e=o.parent.container;if(r&&e===a){if(n){for(let e=0;e<r.length;e++)r[e]=r[e]+r[e]*s;r.push(s)}else r[0]=r[0]-s,r.unshift(s);e.setRatios(r)}else e.setContainerRatio(t,s)}return this.rebuildLayout(this.context.model.rootNode),this.invalidate(),o}requestDockDialog(e,t,i,n,s){return u(this,void 0,void 0,(function*(){const o=t.getPanel(),r=new g(o);let d;yield o.prepareForDocking(),t.destroy(),e.parent&&e.parent.container.getContainerType()!==h.FillLayout&&(d=e.parent.container,d.getRatios());const l=this.layoutEngine.getDockBounds(e,o,a.Row,s);if(i(e,r),!n||!r.parent||r.parent.container.getContainerType()!==h.ColumnLayout&&r.parent.container.getContainerType()!==h.RowLayout)return this.rebuildLayout(this.context.model.rootNode),this.invalidate(),r;{const e=r.parent.container,t=this.layoutEngine.getVaryingDimension(e,a.Row);e.setContainerRatio(o,l.w/t)}}))}isMoveInsideContainer(e,t){const i=e.getBoundingClientRect(),n={x:i.left+t.dx,y:i.top+t.dy,w:i.width,h:i.height};return this.isRectInsideContainer(n)}isResizeInsideContainer(e,t){const i=e.getBoundingClientRect(),n={x:i.left+t.dx,y:i.top+t.dy,w:i.width+t.dw,h:i.height+t.dh};return this.isRectInsideContainer(n)}isRectInsideContainer(e){const t=this.dockContentContainer.get().getBoundingClientRect();return t.left<e.x&&t.top<e.y&&e.x+e.w<t.right&&e.y+e.h<t.bottom}rebuildLayout(e){e.childNodes.forEach((e=>this.rebuildLayout(e))),e.performLayout(!1)}invalidate(){const e=y.startMeasuring();S.forceAllEnqueuedUpdates();const t=x.fromDOMRect(this.getContainerElement().getBoundingClientRect());this.resize(t),S.forceAllEnqueuedUpdates(),y.stopMeasuring(e,"DockMananager::invalidate()")}updateState(){this.context.model.rootNode.container.updateState();for(const e of this.context.model.dialogs)e.getPanel().updateState();for(const e of this.context.model.collapsers)e.getPanel().updateState()}handleContainerResized(){this.invalidate()}resize(e){}setModel(e){this.context.documentManagerView.getDOM().remove(),this.context.setModel(e),this.setRootNode(e.rootNode),this.rebuildLayout(e.rootNode),this.loadResize(e.rootNode)}loadResize(e){e.childNodes.reverse().forEach((t=>{this.loadResize(t),e.container.setActiveChild(t.container)}))}setRootNode(e){e.detachFromParent(),this.context.model.setRootNode(e),this.dockContentContainer.get().appendChild(e.container.getDOM())}bindDialogDragEvents(e){e.on("onDragStart",(({sender:e,event:t})=>this.handleDialogDragStarted(e,t))),e.on("onDragMove",(({sender:e,event:t})=>this.handleDialogDragged(e,t))),e.on("onDragStop",(({sender:e,event:t})=>this.handleDialogDragEnded(e,t)))}handleDialogDragStarted(e,t){const i=this.findNodeOnPoint({x:t.pageX,y:t.pageY});this.dockWheel.setActiveDialog(e),this.dockWheel.setActiveNode(i),this.dockWheel.showWheel()}handleDialogDragged(e,t){const i=this.findNodeOnPoint({x:t.pageX,y:t.pageY});this.dockWheel.setActiveNode(i)}handleDialogDragEnded(e,t){this.dockWheel.onDialogDropped(e),this.dockWheel.hideWheel()}findNodeOnPoint(e){const t=[this.context.model.rootNode];let i=null;for(;t.length>0;){const n=t.pop();this.isPointInsideNode(e,n)&&(i=n,n.childNodes.forEach((e=>t.push(e))))}return i}isPointInsideNode(e,t){const i=t.container.getDOM().getBoundingClientRect();return i.x<e.x&&i.y<e.y&&e.x<i.x+i.width&&e.y<i.y+i.height}requestTabReorder(e,t){}requestUndockToDialog(e,t,i){const n=this.findNodeFromContainer(e);this.layoutEngine.undock(n);const s=n.container,o=new ei(this,s);return this.bindDialogDragEvents(o),null!=t&&o.setPosition(t.pageX-i.x,t.pageY-i.y),o}requestClose(e){const t=this.findNodeFromContainer(e);this.layoutEngine.close(t),this.activePanel===e&&(this.activePanel=null),this.activeDocument===e&&(this.activeDocument,this.activeDocument=null)}openInDialog(e,t,i,n){const s=new ei(this,e);if(this.bindDialogDragEvents(s),null!==t){const e=s.getPanel().getWidth();i.x>e&&(i.x=.75*e),s.setPosition(t.pageX-i.x,t.pageY-i.y)}return s}requestUndock(e){const t=this.findNodeFromContainer(e);this.layoutEngine.undock(t)}requestRemove(e){const t=this.findNodeFromContainer(e),i=t.parent;return t.detachFromParent(),i&&this.rebuildLayout(i),t}findNodeFromContainer(e){return this.findNodeFromContainerElement(e.getDOM())}findNodeFromContainerElement(e){const t=[this.context.model.rootNode];for(;t.length>0;){const i=t.pop();if(i.container.getDOM().isSameNode(e))return i;i.childNodes.forEach((e=>t.push(e)))}return null}getActivePanel(){return this.activePanel}getActiveDocument(){return this.activeDocument}setActivePanel(e){this.activePanel!==e&&(this.activePanel=e,this.updateState())}listenTo(e,t){return this.eventManager.subscribe(e,t)}triggerEvent(e,t){this.eventManager.triggerEvent(e,t)}suspendLayout(e){this.triggerEvent("onSuspendLayout",{dockManager:this,container:e})}resumeLayout(e){this.triggerEvent("onResumeLayout",{dockManager:this,container:e})}notifyOnDock(e){this.triggerEvent("onDock",{dockManager:this,node:e})}notifyOnUnDock(e){this.triggerEvent("onUndock",{dockManager:this,node:e})}notifyOnTabReorder(e){this.triggerEvent("onTabReorder",{dockManager:this,node:e})}notifyOnClosePanel(e){this.triggerEvent("onClosePanel",{dockManager:this,panel:e})}notifyOnCreateDialog(e){this.triggerEvent("onCreateDialog",{dockManager:this,dialog:e})}notifyOnShowDialog(e){this.triggerEvent("onShowDialog",{dockManager:this,dialog:e})}notifyOnHideDialog(e){this.triggerEvent("onHideDialog",{dockManager:this,dialog:e})}notifyOnChangeDialogPosition(e,t,i){this.triggerEvent("onChangeDialogPosition",{dockManager:this,dialog:e,position:{x:t,y:i}})}notifyOnContainerResized(e){this.triggerEvent("onContainerResized",{dockManager:this,container:e})}notifyOnTabChange(e){this.triggerEvent("onTabChange",{dockManager:this,tabPage:e})}notifyOnActivePanelChange(e,t){this.triggerEvent("onActivePanelChange",{dockManager:this,previousActivePanel:t,activePanel:e})}notifyOnActiveDocumentChange(e,t){this.triggerEvent("onActiveDocumentChange",{dockManager:this,previousActivePanel:t,activePanel:e})}saveState(){throw 0}loadState(e){return u(this,void 0,void 0,(function*(){}))}getPanels(){}undockEnabled(e){}lockDockState(e){}hideCloseButton(e){}updatePanels(e){}getVisiblePanels(){throw 0}_allPanels(e,t){}}y.enableOptimizations(!1);export{h as ContainerType,o as DockKind,ns as DockManager,e as MOUSE_BTN_LEFT,t as MOUSE_BTN_MIDDLE,i as MOUSE_BTN_RIGHT,a as OrientationKind,Yt as PanelContainer,s as PanelContainerState,n as SelectionState,r as TabOrientation,li as TabbedPanelContainer,d as WheelTypes};
